import{_,r as k,l as C,w as d,o,A as g,i as A,d as V,c,m as u,F as h,x as f,t as x,v as b}from"./index-07ad36bc.js";const M={props:["options","modelValue","value"],emits:["input","update:modelValue"],data(){return{col:0,row:0,valueArr:[],open:!1}},mounted(){window.addEventListener("click",this.winClick)},unmounted(){window.removeEventListener("click",this.winClick)},methods:{winClick(e){let l=this.$refs.selector.$el;l&&l.contains(e.target)==!1&&(this.open=!1)},onMouseEnter(e,l){for(let s=0;s<this.col;s++)if(s>e-1){this.valueArr.length=e;break}else s===e-1&&(this.valueArr[s]=l)},onChange(){this.open=!1;const e=this.valueArr.filter(l=>l).map(l=>""+l);this.$emit("input",e),this.$emit("update:modelValue",e)},dropdownShouldOpen(){return this.open}},computed:{optionArr(){var s;let e=this.options,l=[e];for(let t=0;t<this.col&&(e=(s=e.find(r=>r&&r.value===this.valueArr[t]))==null?void 0:s.children,!!e);t++)l.push(e);for(let t=0;t<this.row;t++)l[0][t]||(l[0][t]=null);return l}},watch:{options:{handler(){let e=this.$props.options,l=0,s=e.length;for(;e.length>0;)e.some(t=>t==null?void 0:t.children)&&l++,e=e.filter(t=>t).map(t=>t.children).flat(),s=Math.max(s,e.length);this.col=l+1,this.row=s},immediate:!0},value(e){this.valueArr=(e||[]).slice()},modelValue(e){this.valueArr=(e||[]).slice()}}},y=["data-leaf","onClick","onMouseenter","title"];function E(e,l,s,t,r,i){const m=k("v-select"),p=C("esc");return d((o(),g(m,{ref:"selector",options:[s.options],class:"c-cascader",modelValue:s.modelValue.join(" / "),onClick:l[1]||(l[1]=a=>r.open=!r.open),"dropdown-should-open":i.dropdownShouldOpen,searchable:!1,clearable:!1},{option:A(()=>[V("div",{class:"opt-er",onClick:l[0]||(l[0]=f(()=>{},["prevent","stop"]))},[(o(!0),c(h,null,u(r.col,a=>(o(),c("div",{class:"opt-col",key:a},[(o(!0),c(h,null,u(i.optionArr[a-1],(n,v)=>d((o(),c("div",{class:"opt-row","data-leaf":!(n!=null&&n.children),onClick:f(w=>!(n!=null&&n.children)&&i.onChange(),["stop","prevent"]),onMouseenter:w=>i.onMouseEnter(a,n.value),key:v,title:n==null?void 0:n.label},x(n==null?void 0:n.label),41,y)),[[b,n]])),128))]))),128))])]),_:1},8,["options","modelValue","dropdown-should-open"])),[[p,r.open=!1]])}const S=_(M,[["render",E]]);export{S as C};
