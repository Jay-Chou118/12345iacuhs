import{H as F}from"./Header-29f8eb92.js";import{B as H}from"./Button-ccc4c628.js";import{c as E}from"./index.es-693a20d1.js";import{I as z}from"./ImportFileDialog-e2ea92f2.js";import{_ as B,o as u,c as _,d as t,w as b,v,t as n,F as S,m as M,a as m,p as I,b as T,k as N,e as y,j as V,r as f,h as k,i as x,A as w,f as D,T as O,D as q,C as j,x as $}from"./index-e364a543.js";import{s as W,b as G}from"./CopyPath-4fe495ee.js";import{s as X}from"./time-4b339df6.js";import{W as Y,P as Z}from"./ev-timeplot-32fe040f.js";import"./Message-fbe6eafa.js";import"./Cascader-ea212442.js";import"./Spin-398db77b.js";const J={1:{title:"高压电池SOC低于阈值",desc:"高压电池SOC低于阈值，停止智能补电轮询逻辑，BMDM监测到自身电量低时，无法请求智能补电，最终导致小电池馈电。\n关联信号：IntelgntChrgPollingLogl（智能补电轮询逻辑）=0x1（stop）"},2:{title:"BMDM自身可能存在故障",desc:"（罗列出BMDM上报的当前故障电池是否存在与系统无法通讯的情况/或者存在无法充电的故障）BMDM自身可能存在故障导致BMDM监测到自身电量低时，无法请求智能补电，最终导致小电池馈电。故障明细可前往TSP网联平台查看。"},3:{title:"VCCD未被成功唤醒",desc:"WakUpMem=0x1说明BMDM主动唤醒了网络，但一直未收到报文，表明VCCD未成功被唤醒，一般VCCD未唤醒的原因有：VCCD配电异常或VCCD故障\n关联信号：WakUpMem=0x1"},4:{title:"未发送智能补电请求",desc:"BattSocRaw持续小于50%,IntelgntChrgReq=0x0说明BMDM低电量下，未申请智能补电，最终导致小电池馈电\n关联信号：BattSocRaw、IntelgntChrgReq=0x0"},5:{title:"高压电池初始化失败",desc:""},6:{title:"高压电池SOC低于阈值",desc:"高压电池SOC低于阈值，导致上高压失败，从而导致智能补电失败，最终小电池馈电。\n关联信号：IntelgntChrgnAlwSts=0x1（reject_for_low_SOC）"},7:{title:"高压系统故障",desc:"高压系统由于故障无法上高压电，从而导致智能补电失败，最终小电池馈电。\n关联信号：IntelgntChrgnAlwSts=0x2（reject_for_error）"},8:{title:"VCU轮询故障",desc:"VCU 轮询故障,从而导致智能补电失败，最终小电池馈电。\n关联信号：VCUModReqToHvBatt不等于0x3（HV_On）"},9:{title:"预充继电器闭合异常",desc:"预充继电器闭合异常导致预充失败，导致上高压失败，导致智能补电失败，最终小电池馈电。\n关联信号：PreChrgnCntctSts不等于0x1（预充回路（预充继电器和主负继电器）闭合正常）"},10:{title:"预充回路闭合前后电池电压偏差过大",desc:"MainCntctSts不等于0x1 （Close）且HvBattActPackU和HvBattActBusU偏差一直大于12V(可标定)表明预充回路闭合前后电池电压偏差过大，导致上高压失败，从而导致智能补电失败 ，最终小电池馈电。 \n关联信号：MainCntctSts不等于0x1 （Close）、HvBattActPackU、HvBattActBusU"},11:{title:"主回路闭合异常",desc:"MainCntctSts不等于0x1 （Close）表明主回路（主正继电器和主负继电器）闭合异常，导致上高压失败，从而导致智能补电失败，最终小电池馈电。\n关联信号：MainCntctSts不等于0x1 （Close）"},12:{title:"高压系统上高压失败",desc:"高压系统上高压失败，从而导致智能补电失败，最终小电池馈电。\n关联信号：HvBattModSts不等于0x3（HV ON）"},13:{title:"VCU未请求进入Buck模式",desc:"VCU未请求进入Buck模式等故障，导致智能补电失败，最终小电池馈电。\n关联信号：VCUDCDCModReq不等于0x03（Buck_mode_request）"},14:{title:"DCDC初始化失败",desc:"DCDC初始化失败，导致智能补电失败，最终小电池馈电。\n关联信号：DCDCModSts=0x0 Init && DCDCFltLvlIndcn不等于0x0"},15:{title:"DCDC未进入Buck模式",desc:"DCDCModSts不等于0x03（Power_conversion_HV_to_LV_Buck） 表明DCDC未进入Buck模式，导致智能补电失败，最终小电池馈电。\n关联信号：DCDCModSts不等于0x03（Power_conversion_HV_to_LV_Buck）"},16:{title:"DCDC发生LV1或LV2的故障",desc:"DCDC发生LV1，2的故障，导致智能补电失败，最终小电池馈电。\n关联信号：DCDCFltLvlIndcn=0x2 or 0x3 DCDCModSts=0x06"},17:{title:"低压系统处于限流状态",desc:"电池限流模块的状态信号LvBattDCDCSts=0x0（DCDC is not work）表明低压系统处于限流状态，可能导致智能补电慢或者不成功，小电池馈电原因可能与限流有关。\n关联信号：LvBattDCDCSts=0x0（DCDC is not work）"},18:{title:"电池传感器硬件故障",desc:"电池传感器硬件故障，可能导致智能补电失败，从而导致小电池馈电。\n关联信号：BattSnsrHwFltRaw=0x1~0x8"},19:{title:"电池发生一般性警示故障",desc:"电池发生一般性警示故障，可能导致智能补电失败，从而导致小电池馈电。\n关联信号：BattSnsrGenlWarnRaw=0x1~0x6,0x8,0xA"},20:{title:"电池发生一般性断开故障",desc:"电池发生一般性断开故障，可能导致智能补电失败，从而导致小电池馈电。\n关联信号：BattSnsrGenlFltRaw=0x1~0x7,0x9,0xC,0xE"}};const K={name:"ReportView",props:["reportData"],data(){},computed:{filterList(){var l;let e=this.$props.reportData,i=((l=e.times)==null?void 0:l.length)||0,s={},o={};for(let a=0;a<i;a++){let r=e.levels[a],d=e.ids[a],p=e.times[a];r&&(s[r]?s[r]++:s[r]=1,o[d]||(o[d]={...J[d],time:p}))}return{data:Object.entries(o).sort((a,r)=>a[1].time-r[1].time).map(a=>({level:a[0],...a[1],color:{4:"red",3:"orange",2:"yellow",1:"blue"}[a[0]],time:new Date(a[1].time*1e3).toLocaleString("zh-Hans-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,hourCycle:"h23",timeZone:"Asia/Shanghai"})})),counter:s}},filterLabel(){return this.filterList.data.map(e=>e.title).join(" / ")}},mounted(){console.log(this.filterList)},methods:{exportPdf(){let e=this.filterList;console.log(this.directory);let i="battrep-"+Date.now()+".txt",s="".concat(this.filterLabel,"\n❹四级（").concat(e.counter[4],"） ❸三级（").concat(e.counter[3],"） ❷二级（").concat(e.counter[2],"） ❶一级（").concat(e.counter[1],"）\n\n").concat(e.data.map(o=>"".concat({4:"❹",3:"❸",2:"❷",1:"❶"}[o.level]," ").concat(o.time," ┅━【").concat(o.title,"】\n").concat(o.desc)).join("\n\n"));W(s,i)}}},c=e=>(I("data-v-b84cc431"),e=e(),T(),e),Q={class:"o-pul-er"},tt={class:"o-pul-wrap"},et=c(()=>t("div",{class:"o-pul-left"},[t("i",{class:"analyse-icon"}),t("span",{class:"o-pul-tit"},"分析报告")],-1)),at={class:"o-pul-right"},st=c(()=>t("span",{style:{color:"#D9D9D9","font-size":"18px",transform:"scaleX(0.5)"}},"|",-1)),it=c(()=>t("i",{class:"export-icon"},null,-1)),lt=c(()=>t("span",{class:"o-pul-tit"},"导出报告",-1)),ot=[it,lt],rt={ref:"body"},ct={key:0,class:"o-pul-content"},nt={class:"o-pul-content-tit-p"},dt=c(()=>t("br",null,null,-1)),ht=c(()=>t("br",null,null,-1)),ut={class:"o-pul-content-tit"},_t={class:"o-pul-tag abnormal-tag","data-color":"red"},pt=c(()=>t("i",{class:"abnormal-icon"},null,-1)),mt=c(()=>t("p",{class:"tag-word"},"四级：",-1)),Ct={class:"tag-number"},Dt={class:"o-pul-tag abnormal-tag","data-color":"orange"},ft=c(()=>t("i",{class:"abnormal-icon"},null,-1)),bt=c(()=>t("p",{class:"tag-word"},"三级：",-1)),vt={class:"tag-number"},gt={class:"o-pul-tag abnormal-tag","data-color":"yellow"},wt=c(()=>t("i",{class:"abnormal-icon"},null,-1)),yt=c(()=>t("p",{class:"tag-word"},"二级：",-1)),Lt={class:"tag-number"},xt={class:"o-pul-tag abnormal-tag","data-color":"blue"},Vt=c(()=>t("i",{class:"abnormal-icon"},null,-1)),kt=c(()=>t("p",{class:"tag-word"},"一级：",-1)),Bt={class:"tag-number"},St={class:"o-pul-list-er o-pul-list-time"},Mt={class:"o-pul-list-right"},It=c(()=>t("i",{class:"disc-icon"},null,-1)),Tt=["data-color"],Rt=c(()=>t("i",{class:"abnormal-icon"},null,-1)),Ut={class:"o-pul-list-container"},At={key:1,class:"o-pul-content"},Pt=c(()=>t("div",{class:"o-pul-content-no-message"},"暂未找到异常信息，以下是blf文件内最后一帧信息：",-1)),Ft={class:"o-pul-card-er"},Ht={class:"o-pul-card"},Et=c(()=>t("h3",null,[t("i",{class:"data-review-icon"}),m(" 电压值分析 ")],-1)),zt={class:"o-pul-card-detail"},Nt=c(()=>t("dd",null,null,-1)),Ot={class:"o-pul-card-detail"},qt=c(()=>t("dd",null,null,-1)),jt={class:"o-pul-card"},$t=c(()=>t("h3",null,[t("i",{class:"data-review-icon"}),m(" 电流值分析")],-1)),Wt={class:"o-pul-card-detail"},Gt=c(()=>t("dd",null,null,-1)),Xt={class:"o-pul-card-detail"},Yt=c(()=>t("dd",null,null,-1)),Zt={class:"o-pul-card-detail"},Jt=c(()=>t("dd",null,null,-1)),Kt={class:"o-pul-card-detail"},Qt=c(()=>t("dd",null,null,-1)),te={class:"o-pul-card"},ee=c(()=>t("h3",null,[t("i",{class:"data-review-icon"}),m(" 负载分析")],-1)),ae={class:"o-pul-card-detail"},se=c(()=>t("dd",null,null,-1)),ie=c(()=>t("div",{class:"o-pul-footer"},[t("b",null,"模型逻辑参考"),t("p",null,[m("低电量主动请求：当电池监测到自身电量过低时，主动唤醒主节点，请求补电。"),t("br"),m("智能补电：当电池容量低于一定水平时，由低压电池通过总线唤醒方式主动唤醒主节点，发送充电请求给高压侧，唤醒高压进行充电。")])],-1));function le(e,i,s,o,l,a){return u(),_("div",Q,[t("div",tt,[et,b(t("div",at,[st,t("div",{class:"head-btn",onClick:i[0]||(i[0]=(...r)=>a.exportPdf&&a.exportPdf(...r))},ot)],512),[[v,a.filterLabel]])]),t("div",rt,[a.filterLabel?(u(),_("div",ct,[t("p",nt,n(a.filterLabel),1),dt,ht,t("div",ut,[b(t("span",_t,[pt,mt,t("p",Ct,n(a.filterList.counter[4]||0),1)],512),[[v,a.filterList.counter[4]]]),b(t("span",Dt,[ft,bt,t("p",vt,n(a.filterList.counter[3]||0),1)],512),[[v,a.filterList.counter[3]]]),b(t("span",gt,[wt,yt,t("p",Lt,n(a.filterList.counter[2]||0),1)],512),[[v,a.filterList.counter[2]]]),b(t("span",xt,[Vt,kt,t("p",Bt,n(a.filterList.counter[1]||0),1)],512),[[v,a.filterList.counter[1]]])]),t("div",null,[t("ul",null,[(u(!0),_(S,null,M(a.filterList.data,r=>(u(),_("li",{key:r.title,class:"o-pul-content-er"},[t("div",St,n(r.time),1),t("div",Mt,[It,t("div",{class:"o-pul-list-er o-pul-list-tit","data-color":r.color},[Rt,m(" "+n(r.title),1)],8,Tt),t("div",Ut,n(r.desc),1)])]))),128))])])])):(u(),_("div",At,[Pt,t("div",Ft,[t("div",Ht,[Et,t("dl",null,[t("dt",zt,"VCUDCDCULVSp:"+n(s.reportData.latest.VCUDCDCULVSp),1),Nt,t("dt",Ot,"BattURaw:"+n(s.reportData.latest.BattURaw),1),qt])]),t("div",jt,[$t,t("dl",null,[t("dt",Wt,"VCUDCDCLVCurLim:"+n(s.reportData.latest.VCUDCDCLVCurLim),1),Gt,t("dt",Xt,"DCDCCurAvlMaxLV:"+n(s.reportData.latest.DCDCCurAvlMaxLV),1),Yt,t("dt",Zt,"DCDCCurActLV:"+n(s.reportData.latest.DCDCCurActLV),1),Jt,t("dt",Kt,"BattIRaw:"+n(s.reportData.latest.BattIRaw),1),Qt])]),t("div",te,[ee,t("dl",null,[t("dt",ae,"LvLoadCtrlLvl:"+n(s.reportData.latest.LvLoadCtrlLvl),1),se])])])]))],512),ie])}const oe=B(K,[["render",le],["__scopeId","data-v-b84cc431"]]);const re={props:["store"],components:{Button:H,Header:F,Draggable:E,ImportFileDialog:z,TimePlotMulti:Y,ProgressBar:Z,ReportView:oe},data(){var i;let e=O;return{backBlock:!1,modal:{title:"导入文件",visible:!1},treeData:e,curView:{label:(i=e[0])==null?void 0:i.text,value:0},directory:"",directorySize:{label:"",value:0,durationMaybe:0,durationMaybeLabel:"0秒"},colorList:["blue","cerulean","cyan","green","lime","purple","pink","red","orange","yellow"],sdb:"E4U3_1115",carType:"MS11",backBlock:!1,chartDataLoaded:!0,waitChart:{},fileChoosed:!1,traceList:new Map,timeData:{},batReportData:{times:[1677628049694e-3,1677628049704e-3,1677628049714e-3,1677628049724e-3,1677628049725e-3],ids:[4,2,3,1,1],levels:[1,2,3,4,4],latest:{VCUDCDCULVSp:8.512,BattURaw:0,VCUDCDCLVCurLim:512,DCDCCurAvlMaxLV:210,DCDCCurActLV:11.5,BattIRaw:-8.109375,LvLoadCtrlLvl:13.3}}}},watch:{sdbVal:{handler(e){var o;let i=[];const s=this.$ls.get("blfread_sdbData")||[];if(this.carType==="custom"){let l=(o=s.find(a=>a.sdb===this.sdb))==null?void 0:o.comments;l&&(i=l)}else i=q;this.C2C=i.map((l,a)=>"".concat(l,"(CAN ").concat(a,")"))},immediate:!0},chartDataLoaded(e,i){e?(this.backBlock=!1,document.querySelector(".o-body").style.cursor=""):(this.backBlock=!0,document.querySelector(".o-body").style.cursor="wait")},treeData:{handler(e,i){},deep:!0},directory:{async handler(e){const i=await N.getFileSize(e),s=.83*.2,o=Math.round((1678e-19*i*i+1768e-10*i+.5581)*s);this.directorySize={label:G(i),value:i,durationMaybe:o*1e3,durationMaybeLabel:X(o)}}}},computed:{sdbVal(){return[this.carType,this.sdb]},quitConfirm(){return!!this.directory},carTypeLabel(){return this.carType&&this.carType!=="custom"?this.carType+" / ":""},view(){return console.log("树树书",this.treeData),console.log("小电池curView",this.curView),this.treeData[this.curView.value]},directoryLabel(){let e=this.directory.split("\\").pop();return e.length>25?e.slice(0,10)+"..."+e.slice(-15):e}},methods:{onImportView(e){console.log("onImportView"),this.addView(),this.$nextTick(()=>{this.updateSignal(e.children,this.treeData[this.curView.value]),this.manageModal.manageVisible=!1,this.$nextTick(()=>{this.manageModal.manageVisible=!0})})},resetTimeData(){this.directory="",this.backBlock=!1,this.chartDataLoaded=!0,this.waitChart={},this.fileChoosed=!1,this.traceList=new Map,this.timeData={}},importFile(){this.modal.visible=!0},onCancelDialog(){this.modal.visible=!1},choosePath(){/\.blf$/i.test(this.directory)&&(this.chartDataLoaded=!1,this.clearTimeData(),y.blfMAT.getBLFdata({blfFile:this.directory}).then(async e=>{this.fileChoosed=!0,this.treeData.forEach(s=>{this.waitChart[s.id]=!0});const i=this.treeData.slice();i.splice(this.curView.value,1),i.unshift(this.treeData[this.curView.value]);for(let s=0;s<i.length;s++)await this.play(i[s]),s===0&&(this.chartDataLoaded=!0)}).catch(()=>{}).finally(()=>{this.chartDataLoaded=!0}))},clearTimeData(){this.batReportData={times:[],ids:[],levels:[],latest:{VCUDCDCULVSp:0,BattURaw:0,VCUDCDCLVCurLim:0,DCDCCurAvlMaxLV:0,DCDCCurActLV:0,BattIRaw:0,LvLoadCtrlLvl:0}};for(let e in this.timeData)this.timeData[e]=[];this.treeData.forEach(e=>{e.children.forEach(i=>{i.warning=void 0})})},hideSignal(e,i){this.waitChart[e.pid]||(e.hidden=!e.hidden,this.play(i,!0))},deleteSignal(e){console.log("del",e),!this.waitChart[e.pid]&&(this.treeData=this.treeData.map(i=>{if(i.id==e.pid){let s={...i,children:i.children.filter(o=>!(o.id==e.id&&o.msg==e.msg&&o.channel==e.channel))};return this.$nextTick(()=>this.play(s,!0)),s}return{...i}}))},onChangeView(e){console.log("切换视图",e)},async play(e,i){if(!this.fileChoosed)return;if(i){this.loadChart(e,i);return}this.waitChart[e.id]=!0;let s,o,l;try{if(s=await y.blfMAT.getAnalysisByParams({data:[...e.children.map(r=>({busId:r.channel,canId:r.msg,name:r.text})),{busId:5,canId:304,name:"VCUDCDCULVSp"},{busId:5,canId:304,name:"VCUDCDCLVCurLim"},{busId:5,canId:306,name:"DCDCCurAvlMaxLV"},{busId:5,canId:628,name:"DCDCCurActLV"},{busId:15,canId:562,name:"BattIRaw"},{busId:10,canId:433,name:"LvLoadCtrlLvl"},{busId:15,canId:579,name:"BattURaw"}]}),console.log("res>>>",s),s.data.length>0){let r=s.data.length;o=s.data[r-2],l=s.data[r-1],this.batReportData={times:[],ids:[],levels:[],latest:{VCUDCDCULVSp:0,BattURaw:0,VCUDCDCLVCurLim:0,DCDCCurAvlMaxLV:0,DCDCCurActLV:0,BattIRaw:0,LvLoadCtrlLvl:0}},this.batReportData.times=o.times,this.batReportData.ids=o.values,this.batReportData.levels=l.values;for(let d in this.batReportData.latest)s.data.forEach(p=>{if(p.name===d)return this.batReportData.latest[d]=p.values.slice(-1)[0]});console.log("stateDetail>>>",o),console.log("this.batReportData>>>",this.batReportData)}console.log("第三个接口res",s)}catch(r){this.waitChart[e.id]=!1;return}const a={};for(let r in s.data){const d=s.data[r];this.traceList.set(d.busId+"_"+d.name,{name:d.name,t:Object.freeze(d.times),v:Object.freeze(d.values),enums:d.enums,cycle:d.cycle||500}),a[d.busId+"_"+d.name]=d.times.length}e.children.forEach(r=>{switch(a[r.channel+"_"+r.text]){case 0:r.warning=!0;break;case void 0:r.warning=null;break;default:r.warning=!1;break}}),this.loadChart(e),this.waitChart[e.id]=!1},loadChart(e){const i={blue:"#2266ff",cerulean:"#00c7f2",cyan:"#00e0b8",green:"#3fd926",lime:"#add900",purple:"#8125ff",pink:"#ff4475",red:"#ff3838",orange:"#ffad4d",yellow:"#f1d900"};console.log("加载图表",e);const s=e.children.filter(o=>{var l;return!o.hidden&&((l=this.traceList.get(o.channel+"_"+o.text))==null?void 0:l.t.length)>0}).map(o=>{const l=this.traceList.get(o.channel+"_"+o.text);return Object.assign(l,{color:i[o.color]})});this.timeData[e.id]=s},updateSignal(e,i){this.treeData=this.treeData.map(s=>{if(s.id==i.id){let o=e.map((a,r)=>{let d=s.children.find(p=>a.id==p.id&&a.msg==p.msg&&a.channel==p.channel);return d?{...d,pid:s.id,color:this.colorList[r%9]}:{pid:s.id,id:a.id,text:a.text,comment:a.comment,msg:a.msg,channel:a.channel,type:"signal",color:this.colorList[r%9],colorEditable:!1}});const l={...s,children:o,chooseSignalAble:!1};return this.play(l),l}return s})},onCheckView(e){console.log("导入文件点击确认",e),this.resetTimeData(),this.$nextTick(async()=>{this.modal.visible=!1;let s=this.treeData.filter(o=>o.id===e.curId).map(o=>({label:o.text,value:this.treeData.findIndex(l=>l.id===e.curId)}));this.curView=s[0],this.carType=e.carType,this.sdb=e.sdb,this.directory=e.directory,this.files=e.files.length?e.files:void 0,this.comments=e.comments.length?e.comments:void 0,await y.blfMAT.getDBC({carType:this.carType,sdb:this.sdb,files:this.files,comments:this.comments}).then(o=>{window._sdb=o.data}).then(()=>{this.choosePath()})}),V.report("track","click",{element_name:"导入文件",asset_name:this.directory+";",tip:"1174.13.0.1.29260"})}},mounted(){console.log("view",this.view),this.clearTimeData(),this.SDBLoading=!0,y.blfMAT.getDBC({carType:"MS11",sdb:this.sdb}).then(e=>{window._sdb=e.data}).finally(()=>{this.SDBLoading=!1}),V.report("trackPage",{page:"小电池馈电",tip:"1174.13.0.1.29259"})},beforeUnmount(){this.timeData={}}},g=e=>(I("data-v-55a13f15"),e=e(),T(),e),ce={class:"tiny-battery"},ne=g(()=>t("i",{class:"lead-icon"},null,-1)),de={class:"record-header-message"},he={class:"record-header-message-imp"},ue={class:"record-header-message-imp"},_e={class:"o-pul-er"},pe=g(()=>t("div",{class:"o-pul-wrap"},[t("div",{class:"o-pul-left"},[t("i",{class:"data-review-icon"}),t("span",{class:"o-pul-tit"},"数据回放")])],-1)),me={class:"o-pul-er-wrap"},Ce={class:"o-pul-board"},De={class:"o-pul-button-wrap"},fe=g(()=>t("i",{class:"t-icon chooseSignal"},null,-1)),be=g(()=>t("span",null,"选择信号",-1)),ve=[fe,be],ge=g(()=>t("span",{style:{color:"#D9D9D9","font-size":"18px",transform:"scaleX(0.5)"}},"|",-1)),we=g(()=>t("div",{class:"board-head-btn",id:"delete_module"},[t("i",{class:"t-icon saveView"}),t("span",null,"保存为视图")],-1)),ye={class:"o-pul-tree-er"},Le=["data-hidden"],xe=["data-open","onClick"],Ve=["data-color","onClick"],ke=["onMouseleave"],Be=["title","data-color","onClick"],Se=["title"],Me={key:0,class:"t-node-warning",title:"信号无数据"},Ie={key:1,class:"t-node-error",title:"文件内无此信号"},Te=["onClick"],Re=["data-loading"],Ue=j('<div class="timechart-hotkey" data-v-55a13f15><div class="timechart-hotkey-it" data-v-55a13f15>缩放轴 <span class="hotkey-btn" data-v-55a13f15>ctrl+滚轮</span></div><div class="timechart-hotkey-it" data-v-55a13f15>平移轴 <span class="hotkey-btn" data-v-55a13f15>shift+滚轮</span></div><div class="timechart-hotkey-it" data-v-55a13f15>选择帧 <span class="hotkey-btn" data-v-55a13f15>左键单击</span></div></div>',1),Ae=["id"],Pe={key:0,class:"board-spin-er"},Fe={class:"board-spin-progress"},He={class:"board-spin-text"};function Ee(e,i,s,o,l,a){const r=f("Button"),d=f("Header"),p=f("ReportView"),R=f("Draggable"),U=f("TimePlotMulti"),A=f("ProgressBar"),P=f("ImportFileDialog");return u(),_("div",ce,[k(d,{title:"智能诊断-小电池馈电",quitConfirm:a.quitConfirm,backBlock:l.backBlock},{default:x(()=>[k(r,{type:"primary",class:"header-import-btn",onClick:a.importFile},{default:x(()=>[ne,m("导入文件")]),_:1},8,["onClick"]),t("span",de,[m(" BLF文件："),t("span",he,n(a.directoryLabel||"--"),1),b(t("span",{style:{color:"#333","text-shadow":"0 0.3px currentColor"}},"（"+n(l.directorySize.label)+"）",513),[[v,l.directorySize.value]]),m("  DBC配置："),t("span",ue,n(a.carTypeLabel)+n(l.sdb||"--"),1)])]),_:1},8,["quitConfirm","backBlock"]),l.batReportData.times.length?(u(),w(p,{key:0,reportData:l.batReportData},null,8,["reportData"])):D("",!0),t("div",_e,[pe,t("div",me,[t("div",Ce,[t("div",De,[t("div",{class:"board-head-btn",onClick:i[0]||(i[0]=h=>a.view.chooseSignalAble=!a.view.chooseSignalAble)},ve),ge,we]),t("div",ye,[a.view?(u(),w(R,{key:0,maxLevel:1,class:"t-list",modelValue:a.view.children,"onUpdate:modelValue":i[1]||(i[1]=h=>a.view.children=h),onAfterDrop:i[2]||(i[2]=h=>a.play(a.view,!0))},{default:x(({node:h,stat:L})=>[t("div",{class:"t-node","data-type":"signal","data-hidden":h.hidden},[t("i",{class:"t-node-exp","data-open":L.open,onClick:C=>L.open=!L.open},null,8,xe),m(),t("i",{class:"t-node-icon","data-color":h.color,title:"更改颜色",onClick:$(C=>h.colorEditable=!0,["stop","prevent"])},[b(t("div",{class:"color-picker",onMouseleave:C=>h.colorEditable=!1},[(u(!0),_(S,null,M(l.colorList,C=>(u(),_("div",{class:"color-item",title:C,"data-color":C,key:C,onClick:ze=>{h.color=C,a.play(a.view,!0)}},null,8,Be))),128))],40,ke),[[v,h.colorEditable]])],8,Ve),t("span",{class:"t-node-text",title:"【".concat(h.text,"】\n").concat(h.comment||"")},[t("span",null,n(h.text),1),h.warning===!0?(u(),_("div",Me)):D("",!0),!h.hidden&&h.warning===null?(u(),_("div",Ie)):D("",!0)],8,Se),t("div",{class:"t-node-watch",onClick:C=>{a.hideSignal(h,a.view)}},null,8,Te)],8,Le)]),_:1},8,["modelValue"])):D("",!0)])]),t("div",{class:"timechart-er","data-loading":l.waitChart[a.view.id]},[Ue,(u(),_("div",{id:"timechart_"+a.view.id,style:{width:"100%",height:"100%"},key:a.view.id},[l.timeData[a.view.id]?(u(),w(U,{key:0,timeData:l.timeData[a.view.id]},null,8,["timeData"])):D("",!0)],8,Ae))],8,Re),l.chartDataLoaded?D("",!0):(u(),_("div",Pe,[t("div",Fe,[l.directorySize.durationMaybe?(u(),w(A,{key:0,second:l.directorySize.durationMaybe},null,8,["second"])):D("",!0)]),t("div",He,"正在解析文件 "+n(a.directoryLabel)+"（"+n(l.directorySize.label)+"），约"+n(l.directorySize.durationMaybeLabel)+"…",1)]))])]),l.modal.visible?(u(),w(P,{key:1,curViewInx:l.curView.value,title:l.modal.title,onCancel:a.onCancelDialog,onImportFileSubmit:a.onCheckView,carType:l.carType,sdb:l.sdb,from:"tinyBattery"},null,8,["curViewInx","title","onCancel","onImportFileSubmit","carType","sdb"])):D("",!0)])}const Ke=B(re,[["render",Ee],["__scopeId","data-v-55a13f15"]]);export{Ke as default};
