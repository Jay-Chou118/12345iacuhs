import{B as A}from"./Button-0588485b.js";import{M as K}from"./Message-841cf593.js";import{C as Q}from"./Cascader-7048cf62.js";import{_ as I,r as b,o as l,c as n,d as s,w as v,g as $,h as u,i as k,a as h,x as D,p as M,b as L,B as W,S as _,T as X,e as V,s as x,k as R,l as N,t as y,f as g,F as w,m as T,n as Z,A as B,v as U,C as ee}from"./index-3e9757eb.js";import{S as te}from"./Spin-a6ebe0b2.js";import{A as se}from"./ev-timeplot-298d10f3.js";import{C as ae}from"./CopyPath-2600c311.js";const ie={components:{Button:A},props:["cardName"],data(){return{renameStr:this.$props.cardName}},methods:{}},oe=e=>(M("data-v-16200198"),e=e(),L(),e),le={class:"tool-picker-contianer-wrap"},de=oe(()=>s("div",{class:"tool-picker-arrow"},null,-1)),ne={class:"tool-picker-footer-wrap"},re={class:"o-dialog-footer"};function ce(e,t,a,r,i,d){const f=b("Button");return l(),n("div",{class:"tool-picker-wrap",onClick:t[3]||(t[3]=D(m=>e.$emit("reNameModule"),["stop"]))},[s("div",le,[v(s("input",{class:"o-table-remark chs-input-er",maxlength:"22",placeholder:"通道重命名","onUpdate:modelValue":t[0]||(t[0]=m=>i.renameStr=m)},null,512),[[$,i.renameStr]])]),de,s("div",ne,[s("div",re,[u(f,{style:{width:"30px"},onClick:t[1]||(t[1]=D(m=>e.$emit("renameCancel"),["stop"]))},{default:k(()=>[h("取消")]),_:1}),u(f,{type:"primary",style:{width:"30px",margin:"0 20px 0 10px"},onClick:t[2]||(t[2]=D(m=>e.$emit("ok",i.renameStr),["stop"]))},{default:k(()=>[h("确定")]),_:1})])])])}const he=I(ie,[["render",ce],["__scopeId","data-v-16200198"]]);const pe={components:{Button:A},props:["cardIndex","cardName","cardId"],data(){return{titleName:this.$props.cardName,titleId:this.$props.cardId}},methods:{},mounted(){}},j=e=>(M("data-v-dda52175"),e=e(),L(),e),me=j(()=>s("div",{class:"tool-picker-contianer-wrap"},[s("i",{class:"i-warning"}),s("span",null,"确认要删除模板吗")],-1)),ue=j(()=>s("div",{class:"tool-picker-arrow"},null,-1)),be={class:"tool-picker-footer-wrap"},fe={class:"o-dialog-footer"};function _e(e,t,a,r,i,d){const f=b("Button");return l(),n("div",{class:"tool-picker-wrap",style:W("--cardIndex:"+e.$props.cardIndex)},[me,ue,s("div",be,[s("div",fe,[u(f,{style:{width:"30px"},onClick:t[0]||(t[0]=D(m=>e.$emit("delCancel"),["stop"]))},{default:k(()=>[h("取消")]),_:1}),u(f,{type:"primary",style:{width:"30px",margin:"0 20px 0 10px"},onClick:t[1]||(t[1]=D(m=>e.$emit("ok",i.titleId),["stop"]))},{default:k(()=>[h("确定")]),_:1})])])],4)}const ye=I(pe,[["render",_e],["__scopeId","data-v-dda52175"]]);const ge={emits:["cancel"],components:{Button:A},data(){return{addNameStr:""}},methods:{}},ve=e=>(M("data-v-997e1218"),e=e(),L(),e),Ce={class:"tool-picker-wrap"},ke={class:"tool-picker-contianer-wrap"},Ve=ve(()=>s("div",{class:"tool-picker-arrow"},null,-1)),we={class:"tool-picker-footer-wrap"},De={class:"o-dialog-footer"};function Te(e,t,a,r,i,d){const f=b("Button");return l(),n("div",Ce,[s("div",ke,[v(s("input",{class:"o-table-remark chs-input-er",placeholder:"添加通道","onUpdate:modelValue":t[0]||(t[0]=m=>i.addNameStr=m)},null,512),[[$,i.addNameStr]])]),Ve,s("div",we,[s("div",De,[u(f,{style:{width:"30px"},onClick:t[1]||(t[1]=m=>e.$emit("cancel"))},{default:k(()=>[h("取消")]),_:1}),u(f,{type:"primary",style:{width:"30px",margin:"0 20px 0 10px"},onClick:t[2]||(t[2]=m=>e.$emit("ok",i.addNameStr))},{default:k(()=>[h("确定")]),_:1})])])])}const Ae=I(ge,[["render",Te],["__scopeId","data-v-997e1218"]]);let P=0,E=0;const Ie={props:["title","curViewInx","carType","sdb","from","hisDirectory"],emits:["cancel","importFileSubmit","treeDataChange","updateDefaultOptions"],components:{Button:A,Cascader:Q,RenameTool:he,TipModal:ye,AddModal:Ae,AddOrSelector:se,Spin:te,Message:K,CopyPath:ae},data(){let e=this.$ls.get("blfread_sdbData")||[];return e.length==0&&(e=[{id:-1,carType:"custom",files:["","","","","","","","","","","","","","","",""],sdb:"默认视图",comments:["","","","","","","","","","","","","","","",""]},{id:-3,carType:"custom",files:["","","","","","","","","","","","","","","",""],sdb:"mdf",comments:["","","","","","","","","","","","","","","",""]}]),{sdbCustom:e,canInfoOptions:Array.from({length:16},(t,a)=>({channel:"CAN"+a,dbcFile:"",remark:""})),adapted:!1,adaptedMode:"",quickAdapted:!1,isBigFile:!1,dbcVal:[_.DEFAULT[0].value,_.DEFAULT[0].children[0].value],sdbVal:{label:e[0].sdb,value:0},showRenameModal:!1,showAddModal:!1,showDeleteModal:!1,directory:"",treeData:this.$props.from==="tinyBattery"?X:this.$ls.get("blfread_treeData")||[],curId:-1,adaptionList:[],adaptionOpt:[],dataLoading:!1,adaCheckFlag:!0,message:{visible:!1,level:"",content:""},adaCheckList:{noAdapted:{label:"无自适应",value:"noAdapted"},adapted:{label:"自适应",value:"adapted"},quickAdapted:{label:"快速自适应",value:"quickAdapted"}},adaptedType:"noAdapted",selectList:[],_getDbcBlock:!1,changeDbcLoading:!1}},watch:{sdbCustom:{deep:!0,immediate:!0,handler(e){if(this.$props.from!=="tinyBattery"){JSON.stringify(this.$ls.get("blfread_sdbData"))!==JSON.stringify(e)&&this.$ls.set("blfread_sdbData",e);let t=this.$ls.get("blfread_treeData")||[];t=t.filter(a=>!(a.carType==="custom"&&!e.some(r=>r.sdb===a.sdb))),e.forEach(a=>{t.some(r=>r.carType===a.carType&&r.sdb===a.sdb)||t.push({id:+Math.random().toString().replace(".",""),text:"默认视图",type:"view",editable:!1,carType:a.carType,sdb:a.sdb,chooseSignalAble:!1,deleteConfirm:!1,children:[]})}),this.$ls.set("blfread_treeData",t),this.treeData=t,this.$emit("treeDataChange")}}},curViewInx:{handler(e,t){this.$nextTick(()=>{this.treeData[e]&&(this.curId=this.treeData[e].id)})},deep:!0},dbcVal(e){clearTimeout(E),e&&(this.adaptedType="noAdapted",this.$props.from!=="tinyBattery"?e[0]==="自定义模板"?(this.adaCheckFlag=!1,window._blfcpp="python"):(this.adaCheckFlag=!0,window._blfcpp="python",(this.fileType==="blf"||this.fileType==="asc"||this.fileType==="log")&&(this._getDbcBlock||(this._getDbcBlock=!0,this.changeDbcLoading=!0,E=setTimeout(()=>{this.changeDbcLoading=!1},1e3),console.log("20241011","20241011"),V[this.$props.from==="frameAnalysis"?"blfTraceFromLogging":this.$props.from==="eteReader"?"ete":"blf"].getDBC({carType:e[0],sdb:e[1]}).then(t=>{this.$emit("updateDefaultOptions",t.data),console.log("20241011",t)}).catch(t=>{console.log("20241011err",t)}).finally(()=>{this._getDbcBlock=!1})))):this.from=="eteReader"&&(this.adaCheckFlag=!0)),this.updateOrAddView(),this.dataLoading=!1},fileType(e){(e==="blf"||e==="asc"||e==="log")&&(this._getDbcBlock||(this._getDbcBlock=!0,V[this.$props.from==="frameAnalysis"?"blfTraceFromLogging":this.$props.from==="eteReader"?"ete":"blf"].getDBC({carType:this.dbcVal[0],sdb:this.dbcVal[1]}).then(t=>{this.$emit("updateDefaultOptions",t.data)}).finally(()=>{this._getDbcBlock=!1})))},adaptedType(e){e==="adapted"?(this.adaptedMode="common",this.getSelfAdaption()):e==="quickAdapted"?(this.adaptedMode="quick",this.getSelfAdaption()):this.adaptedMode=""}},mounted(){if(this.sdbCustom.some(e=>e.carType==="custom"&&e.sdb==="mdf")||this.sdbCustom.push({id:-3,carType:"custom",files:["","","","","","","","","","","","","","","",""],sdb:"mdf",comments:["","","","","","","","","","","","","","","",""]}),this.$props.from==="tinyBattery"?(this.curId=-2,this.curIndex=-2,this.adaCheckFlag=!1):(this.curIndex=this.$props.curViewInx||0,this.curId=this.treeData[this.curIndex].id,this.treeData=this.$ls.get("blfread_treeData")||[]),this.$props.carType==="custom"){this.dbcVal=["自定义模板"];let e=this.customOpts.find(t=>t.label===this.$props.sdb);this.$props.sdb==="mdf"&&(e={label:"mdf",value:"-3"}),this.sdbVal={label:e.label,value:e.value}}else this.dbcVal=[this.$props.carType,this.$props.sdb];this.hisDirectory==""?this.choosePath():this.directory=this.hisDirectory},computed:{fileType(){return/\.dat$|\.mf4$|\.mdf$/i.test(this.directory)?"mdf":/\.asc$/i.test(this.directory)?"asc":/\.log$/i.test(this.directory)?"log":"blf"},dbcValUser(){return[this.dbcVal[0]==="自定义模板"?"custom":this.dbcVal[0],this.dbcVal[1]||this.sdbVal.label]},formValid(){if(this.$props.from==="tinyBattery")return this.directory;if(this.dbcVal[0]=="自定义模板")return this.directory;if(this.from=="eteReader")return this.directory&&this.dbcValUser[0]!==""&&this.dbcValUser[1]!=="";if(this.from=="frameAnalysis")return this.directory&&this.dbcValUser[0]!==""&&this.dbcValUser[1]!=="";{let e=this.treeData.find(t=>this.curId===t.id);return this.directory&&e&&e.carType===this.dbcValUser[0]&&e.sdb===this.dbcValUser[1]}},directoryLabel(){let e=""+this.directory;return e.length>70&&(e=e.slice(0,50)+"..."+e.slice(-10)),e},cardView(){let e=this.treeData.filter(t=>t.carType===this.dbcValUser[0]&&t.sdb===this.dbcValUser[1]).map(t=>({id:t.id,title:t.text,content:t.children.map(a=>a.text).join(", ")}));return!e.some(t=>t.id===this.curId)&&e.length>0&&setTimeout(()=>{this.curId=e[0].id},100),e},dbcVerOpts(){return this.$props.from==="eteReader"?[..._.DEFAULT]:[..._.DEFAULT,{label:"自定义模板",value:"自定义模板"}]},customOpts(){let e=this.sdbCustom.map((t,a)=>({label:t.sdb,value:a,files:t.files,comments:t.comments}));return this.fileType!=="mdf"&&(e=e.filter(t=>t.label!=="mdf")),e}},methods:{updateOrAddView(){if(this.dbcVal[0]==="自定义模板"&&this.fileType!=="mdf"){let e=this.sdbCustom.findIndex(t=>t.sdb!=="mdf");if(e!=-1)this.sdbVal={label:this.sdbCustom[e].sdb,value:e};else{let t=this.sdbCustom.length;this.sdbCustom.push({id:Date.now(),carType:"custom",files:["","","","","","","","","","","","","","","",""],sdb:"默认视图",comments:["","","","","","","","","","","","","","","",""]}),this.sdbVal={label:this.sdbCustom[t].sdb,value:t}}}},addTpl(){this.showAddModal=!this.showAddModal},onAdd(e){let t=this.sdbCustom.length;(this.sdbCustom.some(a=>a.sdb===e.label)||e.label==="mdf")&&(e.label+=Math.random().toString().slice(-3)),this.sdbCustom.push({id:Date.now(),carType:"custom",files:["","","","","","","","","","","","","","","",""],sdb:e.label,comments:["","","","","","","","","","","","","","","",""]}),this.sdbVal={label:e.label,value:t}},clickAddModal(e){this.sdbCustom.push({id:Date.now(),carType:"custom",files:["","","","","","","","","","","","","","","",""],sdb:e,comments:["","","","","","","","","","","","","","","",""]}),this.showAddModal=!1,this.$nextTick(()=>{this.sdbVal={label:e,value:this.sdbCustom.length-1}})},cancelAddModal(){this.showAddModal=!1},choosePath(){let e=["BLF文件 (*.blf;*.BLF)"];this.$props.from==="reader"?e=["支持的文件类型 (*.blf;*.BLF;*.mf4;*.MF4;*.dat;*.DAT;*.mdf;*.MDF;*.asc;*.ASC;*.log;*.LOG)","BLF文件 (*.blf;*.BLF)","MDF文件 (*.mf4;*.MF4;*.dat;*.DAT;*.mdf;*.MDF)","ASC文件 (*.asc;*.ASC)","LOG文件 (*.log;*.LOG)"]:this.$props.from==="frameAnalysis"&&(e=["支持的文件类型 (*.blf;*.BLF;*.asc;*.ASC;*.log;*.LOG)","BLF文件 (*.blf;*.BLF)","ASC文件 (*.asc;*.ASC)","LOG文件 (*.log;*.LOG)"]),x==="android"?JSBridge.send({method:"chooseBlfPath"},t=>{console.log("res",t),t.data.split("/").pop(),t.data&&(this.directory=t.data,this.adapted=!1,this.adaptedType="noAdapted",this.$nextTick(()=>{if(this.fileType==="mdf"){this.dbcVal=["自定义模板"];let a=this.customOpts.find(r=>r.label==="mdf");this.sdbVal={label:a.label,value:a.value}}else this.sdbVal.label==="mdf"&&(this.dbcVal=[_.DEFAULT[0].value,_.DEFAULT[0].children[0].value],this.sdbVal={label:this.sdbCustom[0].sdb,value:0})}))}):R.choosePath({directory:this.directory,dialogType:"OPEN_DIALOG",fileTypes:e,allow_multiple:!1}).then(t=>{t.data.directory&&(this.directory=t.data.directory,this.adapted=!1,this.adaptedType="noAdapted",this.$nextTick(()=>{if(this.fileType==="mdf"){this.dbcVal=["自定义模板"];let a=this.customOpts.find(r=>r.label==="mdf");this.sdbVal={label:a.label,value:a.value}}else this.sdbVal.label==="mdf"&&(this.dbcVal=[_.DEFAULT[0].value,_.DEFAULT[0].children[0].value],this.sdbVal={label:this.sdbCustom[0].sdb,value:0})}))})},reNameModule(){this.showRenameModal=!this.showRenameModal},clickRename(e){this.showRenameModal=!1,this.sdbVal={label:e,value:this.sdbVal.value},this.sdbCustom[this.sdbVal.value].sdb=e},cancelRename(){this.showRenameModal=!1},deleteModule(){this.showDeleteModal=!this.showDeleteModal},clickTipModal(){this.sdbCustom=this.sdbCustom.filter(e=>e.sdb!==this.sdbVal.label),this.updateOrAddView(),this.showDeleteModal=!1},copyModule(){let e=JSON.parse(JSON.stringify(this.sdbCustom.filter(t=>t.sdb==this.sdbVal.label)));e[0].sdb=e[0].sdb+Math.random().toString().slice(-3),this.sdbCustom.push(e[0]),this.sdbVal={label:e[0].sdb.slice(-22),value:this.sdbCustom.length-1}},delDbcPath(e){this.sdbCustom[this.sdbVal.value].files[e]=""},chooseDbcPath(e){x==="android"?JSBridge.send({method:"chooseDBCPath"},t=>{console.log("res",t),this.sdbCustom[this.sdbVal.value].files[e]=t.data}):R.choosePath({directory:this.canInfoOptions[e].dbcFile,dialogType:"OPEN_DIALOG",fileTypes:["DBC文件 (*.dbc;*.DBC)"],allow_multiple:!1}).then(t=>{t.data.directory&&(this.sdbCustom[this.sdbVal.value].files[e]=t.data.directory)})},cancelTipModal(){this.showDeleteModal=!1},selectCard(e){this.curId=e},reSet(){this.dbcVal=[_.DEFAULT[0].value,_.DEFAULT[0].children[0].value]},submit(){const e=this.dbcVal[0]==="自定义模板";this.$emit("importFileSubmit",{adaptedType:this.adaptedType,directory:this.directory,carType:e?"custom":this.dbcVal[0],sdb:this.dbcVal[1]?this.dbcVal[1]:this.sdbVal.label,files:e&&this.sdbCustom[this.sdbVal.value].files.length>0?this.sdbCustom[this.sdbVal.value].files:[],comments:e&&this.sdbCustom[this.sdbVal.value].comments.length>0?this.sdbCustom[this.sdbVal.value].comments:[],curId:this.curId,fileType:this.fileType,isBigFile:this.isBigFile,sendReAdjust:this.adaptedMode?{isConfirm:!0,reMatchRes:this.adaptionList.map(t=>({matched_busId:+t.dbcComment.key,origin_busId:t.origin_busId,dbcComment:t.dbcComment.value}))}:{isConfirm:!1}})},async getSelfAdaption(){this.dataLoading=!0,this.fileType==="blf"||this.$props.from==="frameAnalysis"?await V[this.$props.from==="frameAnalysis"?"blfTraceFromLogging":this.$props.from==="eteReader"?"ete":"blf"].selfAdaption({blfFile:this.directory,mode:this.adaptedMode}).then(e=>{this.adaptionOpt=[],this.adaptionList=[],e.data.channelComment!==-1?(this.adaptionOpt=Object.entries(e.data.channelComment).map(([t,a])=>({key:t,value:a})),this.adaptionList=e.data.matched_res.sort((t,a)=>t.origin_busId-a.origin_busId).map((t,a)=>({dbcComment:{key:this.adaptionOpt.find(r=>r.value===t.dbcComment).key,value:t.dbcComment},matchRate:t.matchRate,matched_busId:t.matched_busId,origin_busId:t.origin_busId}))):this.showMessage({level:"error",content:e.data.msg,timeout:2e3})}).finally(()=>{this.dataLoading=!1}):this.fileType==="asc"&&this.$props.from!="frameAnalysis"?(await V.ascReader.getDBC({carType:this.dbcVal[0],sdb:this.dbcVal[1]}).then(e=>{this.$emit("updateDefaultOptions",e.data)}),await V.ascReader.selfAdaption({ascFile:this.directory,mode:this.adaptedMode}).then(e=>{this.adaptionOpt=[],this.adaptionList=[],e.data.channelComment!==-1?(this.adaptionOpt=Object.entries(e.data.channelComment).map(([t,a])=>({key:t,value:a})),this.adaptionList=e.data.matched_res.sort((t,a)=>t.origin_busId-a.origin_busId).map((t,a)=>({dbcComment:{key:this.adaptionOpt.find(r=>r.value===t.dbcComment).key,value:t.dbcComment},matchRate:t.matchRate,matched_busId:t.matched_busId,origin_busId:t.origin_busId}))):this.showMessage({level:"error",content:e.data.msg,timeout:2e3})}).finally(()=>{this.dataLoading=!1})):this.$props.from!="frameAnalysis"&&(await V.logReader.getDBC({carType:this.dbcVal[0],sdb:this.dbcVal[1]}).then(e=>{this.$emit("updateDefaultOptions",e.data)}),await V.logReader.selfAdaption({logFile:this.directory,mode:this.adaptedMode}).then(e=>{this.adaptionOpt=[],this.adaptionList=[],e.data.channelComment!==-1?(this.adaptionOpt=Object.entries(e.data.channelComment).map(([t,a])=>({key:t,value:a})),this.adaptionList=e.data.matched_res.sort((t,a)=>t.origin_busId-a.origin_busId).map((t,a)=>({dbcComment:{key:this.adaptionOpt.find(r=>r.value===t.dbcComment).key,value:t.dbcComment},matchRate:t.matchRate,matched_busId:t.matched_busId,origin_busId:t.origin_busId}))):this.showMessage({level:"error",content:e.data.msg,timeout:2e3})}).finally(()=>{this.dataLoading=!1}))},showMessage({level:e,content:t,timeout:a}){clearTimeout(P),e!=null&&(this.message.level=e),t!=null&&(this.message.content=t),this.message.visible=!0,a>0&&(P=setTimeout(()=>{this.message.visible=!1},a))},deleteDBC(e){this.adaptionList[e].matchRate=""}}},p=e=>(M("data-v-8f404091"),e=e(),L(),e),Me=["data-loading"],Le={class:"o-dialog-wrap"},Be={class:"o-dialog-header-wrap"},$e={class:"o-dialog-title"},Oe={class:"o-dialog-container-wrap"},Se={class:"o-import-configuration"},Fe=p(()=>s("div",{class:"o-dialog-item-tit"},"导入参数配置",-1)),xe={class:"o-dialog-item-wrap"},Re=p(()=>s("span",{class:"o-dialog-item"},"导入文件",-1)),Ne={key:0,class:"o-dialog-item-p"},Ue={class:"o-dialog-item-wrap"},Pe=p(()=>s("span",{class:"o-dialog-item"},"DBC配置",-1)),Ee={class:"o-dialog-item-select"},je={key:0},Ge=["value"],qe={class:"icon-ques"},Je=["data-loading"],ze=p(()=>s("tr",null,[s("th",null,"chn"),s("th",null,"dbc_chn"),s("th",null,"rate")],-1)),Ye={style:{width:"100px"}},He={key:1,class:"o-td-center",style:{width:"260px",height:"33.6px","line-height":"33.6px"}},Ke=["onClick"],Qe={style:{width:"100px"}},We={key:0,class:"o-content-view"},Xe={class:"o-dialog-item-wrap"},Ze=p(()=>s("span",{class:"o-dialog-item"},"通道配置",-1)),et={style:{width:"30%"}},tt=p(()=>s("span",{style:{color:"#D9D9D9","font-size":"18px",margin:"0 0px 2px 16px"}},"|",-1)),st=p(()=>s("i",{class:"t-icon rename"},null,-1)),at=p(()=>s("span",null,"重命名",-1)),it=p(()=>s("i",{class:"t-icon delete"},null,-1)),ot=p(()=>s("span",null,"删除模板",-1)),lt=p(()=>s("i",{class:"t-icon copy"},null,-1)),dt=p(()=>s("span",null,"复制为新模板",-1)),nt=[lt,dt],rt={class:"o-dialog-table"},ct=ee('<div class="o-dialog-table-title" data-v-8f404091><span class="o-table-can" style="font-weight:bold;" data-v-8f404091>通道</span><span style="color:#D9D9D9;font-size:18px;margin-right:12px;" data-v-8f404091>|</span><span style="font-weight:bold;width:364px;display:inline-block;" data-v-8f404091>DBC文件</span><span style="color:#D9D9D9;font-size:18px;margin-right:12px;" data-v-8f404091>|</span><span class="o-table-remark" style="font-weight:bold;" data-v-8f404091>通道备注</span></div>',1),ht={class:"o-dialog-table-item"},pt={class:"o-table-can o-dialog-table-can",style:{"font-size":"18px",color:"#666"}},mt={key:0},ut={class:"o-input-wrap"},bt=["title"],ft=["onClick"],_t=["onClick"],yt=["onUpdate:modelValue"],gt={key:1,class:"o-choose-view"},vt=p(()=>s("div",{class:"o-dialog-item-tit"},"选择视图",-1)),Ct={class:"o-dialog-card-wrap"},kt=["onClick"],Vt={class:"o-dialog-card-header"},wt={class:"o-dialog-card-tit"},Dt={key:0,class:"i-checked"},Tt={key:1,class:"i-check-box"},At={class:"o-modal-card-container"},It={class:"o-dialog-footer-wrap"},Mt={class:"o-dialog-footer"};function Lt(e,t,a,r,i,d){var F;const f=b("CopyPath"),m=b("Cascader"),G=b("v-select"),q=b("AddOrSelector"),J=b("RenameTool"),z=b("TipModal"),O=b("Button"),Y=b("Message"),S=N("tooltip"),H=N("esc");return v((l(),n("div",{class:"o-import-dialog","data-loading":i.changeDbcLoading},[s("div",Le,[s("div",Be,[s("div",$e,y(e.$props.title),1),s("i",{class:"o-dialog-title-close",onClick:t[0]||(t[0]=o=>e.$emit("cancel"))})]),s("div",Oe,[s("div",Se,[Fe,s("div",xe,[Re,i.directory?(l(),n("p",Ne,[u(f,{path:i.directory,length:68},null,8,["path"])])):g("",!0),s("a",{class:"chose-file",onClick:t[1]||(t[1]=(...o)=>d.choosePath&&d.choosePath(...o)),style:{width:"70px"}},"选择文件")]),d.fileType!=="mdf"?(l(),n(w,{key:0},[s("div",Ue,[Pe,s("div",Ee,[u(m,{options:d.dbcVerOpts,modelValue:i.dbcVal,"onUpdate:modelValue":t[2]||(t[2]=o=>i.dbcVal=o)},null,8,["options","modelValue"])]),i.adaCheckFlag?(l(),n("div",je,[(l(!0),n(w,null,T(i.adaCheckList,(o,c)=>(l(),n("label",{class:"o-input record-header-message-imp",key:c},[h(" "),v(s("input",{name:"pull_type",type:"radio","onUpdate:modelValue":t[3]||(t[3]=C=>i.adaptedType=C),value:c},null,8,Ge),[[Z,i.adaptedType]]),h(y(o.label),1)]))),128)),v(s("i",qe,null,512),[[S,"仅对前10万帧数据进行匹配dbc配置"]])])):g("",!0)]),v(s("table",{class:"adp-er timechart-er","data-loading":i.dataLoading},[ze,(l(!0),n(w,null,T(i.adaptionList,(o,c)=>(l(),n("tr",{key:c,style:{height:"33.6px","line-height":"33.6px"}},[s("td",Ye,"CAN "+y(o.origin_busId),1),o.matchRate===""?(l(),B(G,{key:0,style:{width:"260px"},options:i.adaptionOpt,clearable:!1,label:"value",value:"key",modelValue:i.adaptionList[c].dbcComment,"onUpdate:modelValue":C=>i.adaptionList[c].dbcComment=C,class:"chf-input-ecu"},null,8,["options","modelValue","onUpdate:modelValue"])):(l(),n("td",He,[h(y(o.dbcComment.value)+"   ",1),s("i",{class:"i-close",onClick:C=>d.deleteDBC(c)},null,8,Ke)])),s("td",Qe,y(o.matchRate),1)]))),128))],8,Je),[[U,i.adaptedType==="adapted"||i.adaptedType==="quickAdapted"]])],64)):g("",!0)]),i.dbcVal[0]==="自定义模板"&&d.fileType!=="mdf"?(l(),n("div",We,[s("div",Xe,[Ze,s("div",et,[u(q,{options:d.customOpts,value:"value",label:"label",modelValue:i.sdbVal,"onUpdate:modelValue":t[4]||(t[4]=o=>i.sdbVal=o),onAdd:d.onAdd},null,8,["options","modelValue","onAdd"])]),tt,s("div",{class:"head-btn",onClick:t[5]||(t[5]=o=>d.reNameModule())},[st,at,i.showRenameModal?(l(),B(J,{key:0,onOk:d.clickRename,cardName:i.sdbVal.label,onRenameCancel:d.cancelRename},null,8,["onOk","cardName","onRenameCancel"])):g("",!0)]),i.treeData[e.$props.curViewInx].sdb!==i.sdbVal.label&&i.sdbVal.label!=="mdf"?(l(),n("div",{key:0,class:"head-btn delete-module",id:"delete_module",onClick:t[6]||(t[6]=o=>d.deleteModule())},[it,ot,i.showDeleteModal?(l(),B(z,{key:0,onOk:d.clickTipModal,onDelCancel:d.cancelTipModal},null,8,["onOk","onDelCancel"])):g("",!0)])):g("",!0),s("div",{class:"head-btn",id:"copy_module",onClick:t[7]||(t[7]=o=>d.copyModule())},nt)]),s("div",rt,[ct,s("div",ht,[(l(!0),n(w,null,T(((F=i.sdbCustom[i.sdbVal.value])==null?void 0:F.files)||[],(o,c)=>(l(),n("div",{class:"o-table-item-wrap",key:c},[s("span",pt,[h("CAN"),c<9?(l(),n("span",mt," ")):g("",!0),h(y(c+1),1)]),s("div",ut,[v((l(),n("div",{class:"o-table-dbc chs-input-er input-overflow-sty",title:o||"--"},[h(y(o||"--"),1)],8,bt)),[[S,o]]),v(s("i",{class:"t-icon delete-file",onClick:C=>d.delDbcPath(c)},null,8,ft),[[U,o]]),s("a",{class:"chose-file chose-dbc-file",onClick:C=>d.chooseDbcPath(c)},"选择",8,_t)]),v(s("input",{class:"o-table-remark chs-input-er",placeholder:"通道描述","onUpdate:modelValue":C=>i.sdbCustom[i.sdbVal.value].comments[c]=C},null,8,yt),[[$,i.sdbCustom[i.sdbVal.value].comments[c]]])]))),128))])])])):g("",!0),e.$props.from!=="tinyBattery"&&e.$props.from!="eteReader"&&e.$props.from!="frameAnalysis"?(l(),n("div",gt,[vt,s("div",Ct,[(l(!0),n(w,null,T(d.cardView,o=>(l(),n("div",{class:"o-dialog-card",key:o.id,onClick:c=>d.selectCard(o.id)},[s("div",Vt,[s("span",wt,y(o.title),1),i.curId===o.id?(l(),n("i",Dt)):(l(),n("i",Tt))]),s("div",At,y(o.content),1)],8,kt))),128))])])):g("",!0)]),s("div",It,[s("div",Mt,[u(O,{style:{width:"52px"},onClick:t[8]||(t[8]=o=>d.reSet())},{default:k(()=>[h("重置")]),_:1}),u(O,{type:"primary","data-cy":"importFileBtn",disabled:!d.formValid,style:{width:"52px",margin:"0 20px 0 10px"},onClick:d.submit},{default:k(()=>[h("确定")]),_:1},8,["disabled","onClick"])])])]),u(Y,{message:i.message},null,8,["message"])],8,Me)),[[H,()=>e.$emit("cancel")]])}const Nt=I(Ie,[["render",Lt],["__scopeId","data-v-8f404091"]]);export{Nt as I};
