import{H as B}from"./Header-0fec3d0f.js";import{B as y}from"./Button-b8afde1b.js";import{M as E}from"./Message-c1bea39a.js";import{C as v}from"./Cascader-50e0ddf9.js";import{_ as k,e as n,j as S,k as b,r as N,c as m,h as u,d as o,a as c,w as h,g as d,f as w,i as p,v as g,t as F,o as f,p as O,b as L}from"./index-77d71887.js";let T=0;const X={props:["store","closeFlag"],components:{Button:y,Header:B,Message:E,Cascader:v},data(){return{debug:window._debug,consoleText:"",carBumVal:"",chartDataLoaded:!0,modal:{visible:!1,resultVisible:!1},pullLoading:!1,pullLoadingProgress:"",message:{visible:!1,level:"",content:""},onFlag:!0,local:{nfcCardData:"",VCCD:{VIN:"--"},TBOX:{VIN:"--"},ADD:{VIN:"--"},DCD:{VIN:"--"},ETC:{VIN:"--"},SN:"--",SIM:"--",ICCID:"--",IMEI:"--",IMSI:"--"},localMock:{nfcCardData:"62 37 85 4C 4B 42 43 43 32 4D 53 30 4E 4B 31 30 38 31 34 37 20 23 04 16 00 00 00 57 BD C2 57 37 60 00 4D 49 4D 53 31 31 30 34 35 34 30 30 30 30 33 39 01 5F DA 3C 2F 2F 5D 0E 7D 55 09 C5 00 00 16 58 00 00 00 00 00 00 16 58 01 B0 F9 3C 48 33 B0 15 43 A2 8B F7 00 00 16 25 00 00 00 00 00 00 16 25",VCCD:{VIN:""},TBOX:{VIN:""},ADD:{VIN:""},DCD:{VIN:""},ETC:{VIN:""},SN:"",SIM:"",ICCID:"",IMEI:"",IMSI:""},cloud:{VIN:"--",SN:"--",SIM:"--",ICCID:"--",IMEI:"--",IMSI:"--"},step:0,carVersionOptions:[{label:"未选择",value:""},{label:"MS11",value:"MS11"},{label:"MX11",value:"MX11"},{label:"MX11-诊断",value:"MX11-诊断"}],carVersionMode:{label:"未选择",value:""}}},watch:{closeFlag(t){this.onFlag==!1&&this.showMessage({timeout:-1})},chartDataLoaded(t,l){t?(document.querySelector("#app").style.cursor="",document.querySelector("#app").style.pointerEvents=""):(document.querySelector("#app").style.cursor="wait",document.querySelector("#app").style.pointerEvents="none")}},computed:{pullDataValid(){return this.carBumVal!=""&&this.carVersionMode.value!=""},localValid(){return{SN:this.local.SN.length===33,SIM:this.local.SIM.length===11,ICCID:this.local.ICCID.length===19,IMEI:this.local.IMEI.length===15,IMSI:this.local.IMSI.length===15}}},mounted(){S.report("trackPage",{page:"TSP及数字钥匙绑定",tip:"1174.14.0.1.29261"})},unmounted(){},methods:{bindCar(){this.carBumVal=this.carBumVal.toUpperCase(),this.onFlag=!1,this.chartDataLoaded=!1,this.step=1,this.consoleText="正在从TSP云端拉取".concat(this.carBumVal,"的VIN号..."),this.local={VCCD:{VIN:"--"},TBOX:{VIN:"--"},ADD:{VIN:"--"},DCD:{VIN:"--"},ETC:{VIN:"--"},SN:"--",SIM:"--",ICCID:"--",IMEI:"--",IMSI:"--"},this.cloud={VIN:"--",SN:"--",SIM:"--",ICCID:"--",IMEI:"--",IMSI:"--"},n.tsp.getCloudData({code:this.carBumVal}).then(t=>{var l,i,I,s,r,V,D,C,M,e,_,x;this.cloud.VIN=((i=(l=t.data)==null?void 0:l.respData)==null?void 0:i.vin)||"",this.cloud.SN=((s=(I=t.data)==null?void 0:I.respData)==null?void 0:s.deviceNo)||"",this.cloud.SIM=((V=(r=t.data)==null?void 0:r.respData)==null?void 0:V.simNo)||"",this.cloud.ICCID=((C=(D=t.data)==null?void 0:D.respData)==null?void 0:C.iccid)||"",this.cloud.IMEI=((e=(M=t.data)==null?void 0:M.respData)==null?void 0:e.imei)||"",this.cloud.IMSI=((x=(_=t.data)==null?void 0:_.respData)==null?void 0:x.imsi)||""}).catch(t=>{t.code==="ERR_NETWORK"&&(this.consoleText+="\n未连接到内网，请连接后重试!")}).finally(()=>{if(this.consoleText.includes("未连接")){this.stopBindCar(0);return}if(this.consoleText+="\n".concat(this.carBumVal,"在云端对应的VIN号拉取成功！\nVIN号：").concat(this.cloud.VIN,"，五码信息如下：\nSN号：").concat(this.cloud.SN,"\nSIM卡号：").concat(this.cloud.SIM,"\nICCID：").concat(this.cloud.ICCID,"\nIMEI：").concat(this.cloud.IMEI,"\nIMSI：").concat(this.cloud.IMSI),this.validCloud()){this.consoleText+="\n绑定失败，请勿重复绑定！",this.stopBindCar(0);return}this.carVersionMode.value==="MS11"?(this.step=2,this.consoleText+="\n------------------------------------------------------------------\n正在读取车端VIN号...",n.doip.getVinFromVccdTboxAddDcdEtc().then(t=>{var l;if(((l=t.data)==null?void 0:l.length)>0){let i=Object.fromEntries(JSON.stringify(t.data).match(/"[^"]+":\[\{"0xF190":"[^"]*"\}\]/g).map(I=>I.slice(1,-3).replace('":[{"0xF190":',"").split('"')));this.local.VCCD.VIN=i.VCCD===""?"超时！操作失败，请重新插拔车端OBD接口后再次操作":i.VCCD,this.local.TBOX.VIN=i.TBOX===""?"超时！操作失败，请重新插拔车端OBD接口后再次操作":i.TBOX}}).finally(()=>{if(window._debug&&(this.local.VCCD.VIN=this.localMock.VCCD.VIN||this.local.VCCD.VIN,this.local.TBOX.VIN=this.localMock.TBOX.VIN||this.local.TBOX.VIN,this.local.ADD.VIN=this.localMock.ADD.VIN||this.local.ADD.VIN,this.local.DCD.VIN=this.localMock.DCD.VIN||this.local.DCD.VIN,this.local.ETC.VIN=this.localMock.ETC.VIN||this.local.ETC.VIN),this.consoleText+="\n车端VIN号读取成功！\n  VCCD-VIN号 (F190)：".concat(this.local.VCCD.VIN,"\n  TBOX-VIN号 (F190)：").concat(this.local.TBOX.VIN,"\n  ").concat(this.countValidLocalVin(),"个控制器的VIN号与云端VIN号一致！\n  ------------------------------------------------------------------"),!this.validLocalVin()){this.consoleText+="\n云端绑定未发起！控制器VIN号与云端不一致",this.stopBindCar(0);return}this.step=3,this.consoleText+="\n正在读取车端五码...",n.doip.getIdentifyInfoFromTBox().then(t=>{let l=Object.fromEntries(JSON.stringify(t.data).replace(/\s/g,"").slice(12,-5).split('"},{"').map(i=>i.split('":"')));this.local.SN=l["0xF107"]||"",this.local.SIM=l["0x190E"]||"",this.local.ICCID=l["0x190B"]||"",this.local.IMEI=l["0x190C"]||"",this.local.IMSI=l["0x190D"]||"",this.local.carType=l.carType||""}).finally(()=>{if(window._debug&&(this.local.SN=this.localMock.SN||this.local.SN,this.local.SIM=this.localMock.SIM||this.local.SIM,this.local.ICCID=this.localMock.ICCID||this.local.ICCID,this.local.IMEI=this.localMock.IMEI||this.local.IMEI,this.local.IMSI=this.localMock.IMSI||this.local.IMSI),this.step=4,this.consoleText+="\n车端五码读取成功！\n  终端设备SN号 (F107)：".concat(this.local.SN,"，").concat(this.localValid.SN?"格式正确":"格式不正确！","\n  SIM卡号 (190E)：").concat(this.local.SIM,"，").concat(this.localValid.SIM?"格式正确":"格式不正确！","\n  ICCID (190B)：").concat(this.local.ICCID,"，").concat(this.localValid.ICCID?"格式正确":"格式不正确！","\n  IMEI (190C)：").concat(this.local.IMEI,"，").concat(this.localValid.IMEI?"格式正确":"格式不正确！","\n  IMSI (190D)：").concat(this.local.IMSI,"，").concat(this.localValid.IMSI?"格式正确":"格式不正确！","\n  ------------------------------------------------------------------"),!this.validLocal5Code()){this.consoleText+="\n云端绑定未发起！五码格式不正确",this.stopBindCar(0);return}this.consoleText+="\n正在等待云端返回绑定结果...",console.log("carType",this.local.carType),n.tsp.updateLocalData({deviceNo:this.local.SN,iccid:this.local.ICCID,imei:this.local.IMEI,imsi:this.local.IMSI,sim:this.local.SIM,userId:window._userInfo.user,userName:window._userInfo.displayName,vin:this.cloud.VIN,carType:this.local.carType}).then(t=>{this.consoleText+="\n"+t.data.respMsg}).finally(()=>{this.step=5,this.stopBindCar(1)})})})):this.carVersionMode.value==="MX11"?(console.log("选择车型",this.carVersionMode.value),this.step=2,this.consoleText+="\n------------------------------------------------------------------\n正在读取车端VIN号...",n.doip.getVinFromVccdTboxAddDcdEtc15().then(t=>{var l;if(((l=t.data)==null?void 0:l.length)>0){let i=Object.fromEntries(JSON.stringify(t.data).match(/"[^"]+":\[\{"0xF190":"[^"]*"\}\]/g).map(I=>I.slice(1,-3).replace('":[{"0xF190":',"").split('"')));this.local.VCCD.VIN=i.VCCD===""?"五码信息文件中不存在五码信息！":i.VCCD}else this.consoleText+="\n请检查ADB连接，并检查是否存在五码信息文件！\n------------------------------------------------------------------\n"}).catch(t=>{this.consoleText+="\n请检查ADB连接，并检查是否存在五码信息文件！\n------------------------------------------------------------------\n"}).finally(()=>{if(window._debug&&(this.local.VCCD.VIN=this.localMock.VCCD.VIN||this.local.VCCD.VIN,this.local.TBOX.VIN=this.localMock.TBOX.VIN||this.local.TBOX.VIN,this.local.ADD.VIN=this.localMock.ADD.VIN||this.local.ADD.VIN,this.local.DCD.VIN=this.localMock.DCD.VIN||this.local.DCD.VIN,this.local.ETC.VIN=this.localMock.ETC.VIN||this.local.ETC.VIN),this.local.VCCD.VIN!=="--"&&this.local.VCCD.VIN!==""&&this.local.VCCD.VIN!=="五码信息文件中不存在五码信息！"?this.consoleText+="\n车端VIN号读取成功！\nXCD-VIN号 (F190)：".concat(this.local.VCCD.VIN,"\n").concat(this.countValidLocalVin(),"个控制器的VIN号与云端VIN号一致！\n------------------------------------------------------------------"):this.local.VCCD.VIN!=="--"&&(this.consoleText+="\n五码信息文件中不存在五码信息！\n------------------------------------------------------------------\n"),!this.validLocalVin15()){this.consoleText+="\n云端绑定未发起！控制器VIN号与云端不一致",this.stopBindCar(0);return}this.step=3,this.consoleText+="\n正在读取车端五码...",n.doip.getIdentifyInfoFromTBox15().then(t=>{let l=Object.fromEntries(JSON.stringify(t.data).replace(/\s/g,"").slice(12,-5).split('"},{"').map(i=>i.split('":"')));this.local.SN=l["0xF107"]||"",this.local.SIM=l["0x190E"]||"",this.local.ICCID=l["0x190B"]||"",this.local.IMEI=l["0x190C"]||"",this.local.IMSI=l["0x190D"]||"",this.local.carType=l.carType||""}).finally(()=>{if(window._debug&&(this.local.SN=this.localMock.SN||this.local.SN,this.local.SIM=this.localMock.SIM||this.local.SIM,this.local.ICCID=this.localMock.ICCID||this.local.ICCID,this.local.IMEI=this.localMock.IMEI||this.local.IMEI,this.local.IMSI=this.localMock.IMSI||this.local.IMSI),this.step=4,this.consoleText+="\n车端五码读取成功！\n  终端设备SN号 (F107)：".concat(this.local.SN,"，").concat(this.localValid.SN?"格式正确":"格式不正确！","\n  SIM卡号 (190E)：").concat(this.local.SIM,"，").concat(this.localValid.SIM?"格式正确":"格式不正确！","\n  ICCID (190B)：").concat(this.local.ICCID,"，").concat(this.localValid.ICCID?"格式正确":"格式不正确！","\n  IMEI (190C)：").concat(this.local.IMEI,"，").concat(this.localValid.IMEI?"格式正确":"格式不正确！","\n  IMSI (190D)：").concat(this.local.IMSI,"，").concat(this.localValid.IMSI?"格式正确":"格式不正确！","\n  ------------------------------------------------------------------"),!this.validLocal5Code()){this.consoleText+="\n云端绑定未发起！五码格式不正确",this.stopBindCar(0);return}this.consoleText+="\n正在等待云端返回绑定结果...",n.tsp.updateLocalData({deviceNo:this.local.SN,iccid:this.local.ICCID,imei:this.local.IMEI,imsi:this.local.IMSI,sim:this.local.SIM,userId:window._userInfo.user,userName:window._userInfo.displayName,vin:this.cloud.VIN,carType:this.local.carType}).then(t=>{this.consoleText+="\n"+t.data.respMsg}).finally(()=>{this.step=5,this.stopBindCar(1)})})})):(this.step=2,this.consoleText+="\n------------------------------------------------------------------\n正在读取车端VIN号...",n.doip.getVinFromVccdTboxAddDcdEtc15E4().then(t=>{var l;if(((l=t.data)==null?void 0:l.length)>0){let i=Object.fromEntries(JSON.stringify(t.data).match(/"[^"]+":\[\{"0xF190":"[^"]*"\}\]/g).map(I=>I.slice(1,-3).replace('":[{"0xF190":',"").split('"')));this.local.VCCD.VIN=i.VCCD===""?"五码信息文件中不存在五码信息！":i.VCCD}else this.consoleText+="\n请检查ADB连接，并检查是否存在五码信息文件！\n------------------------------------------------------------------\n"}).catch(t=>{this.consoleText+="\n请检查ADB连接，并检查是否存在五码信息文件！\n------------------------------------------------------------------\n"}).finally(()=>{if(window._debug&&(this.local.VCCD.VIN=this.localMock.VCCD.VIN||this.local.VCCD.VIN,this.local.TBOX.VIN=this.localMock.TBOX.VIN||this.local.TBOX.VIN,this.local.ADD.VIN=this.localMock.ADD.VIN||this.local.ADD.VIN,this.local.DCD.VIN=this.localMock.DCD.VIN||this.local.DCD.VIN,this.local.ETC.VIN=this.localMock.ETC.VIN||this.local.ETC.VIN),this.local.VCCD.VIN!=="--"&&this.local.VCCD.VIN!==""&&this.local.VCCD.VIN!=="五码信息文件中不存在五码信息！"?this.consoleText+="\n车端VIN号读取成功！\nXCD-VIN号 (F190)：".concat(this.local.VCCD.VIN,"\n").concat(this.countValidLocalVin(),"个控制器的VIN号与云端VIN号一致！\n------------------------------------------------------------------"):this.local.VCCD.VIN!=="--"&&(this.consoleText+="\n五码信息文件中不存在五码信息！\n------------------------------------------------------------------\n"),!this.validLocalVin15()){this.consoleText+="\n云端绑定未发起！控制器VIN号与云端不一致",this.stopBindCar(0);return}this.step=3,this.consoleText+="\n正在读取车端五码...",n.doip.getIdentifyInfoFromTBox15E4().then(t=>{let l=Object.fromEntries(JSON.stringify(t.data).replace(/\s/g,"").slice(12,-5).split('"},{"').map(i=>i.split('":"')));this.local.SN=l["0xF107"]||"",this.local.SIM=l["0x190E"]||"",this.local.ICCID=l["0x190B"]||"",this.local.IMEI=l["0x190C"]||"",this.local.IMSI=l["0x190D"]||"",this.local.carType=l.carType||""}).finally(()=>{if(window._debug&&(this.local.SN=this.localMock.SN||this.local.SN,this.local.SIM=this.localMock.SIM||this.local.SIM,this.local.ICCID=this.localMock.ICCID||this.local.ICCID,this.local.IMEI=this.localMock.IMEI||this.local.IMEI,this.local.IMSI=this.localMock.IMSI||this.local.IMSI),this.step=4,this.consoleText+="\n车端五码读取成功！\n  终端设备SN号 (F107)：".concat(this.local.SN,"，").concat(this.localValid.SN?"格式正确":"格式不正确！","\n  SIM卡号 (190E)：").concat(this.local.SIM,"，").concat(this.localValid.SIM?"格式正确":"格式不正确！","\n  ICCID (190B)：").concat(this.local.ICCID,"，").concat(this.localValid.ICCID?"格式正确":"格式不正确！","\n  IMEI (190C)：").concat(this.local.IMEI,"，").concat(this.localValid.IMEI?"格式正确":"格式不正确！","\n  IMSI (190D)：").concat(this.local.IMSI,"，").concat(this.localValid.IMSI?"格式正确":"格式不正确！","\n  ------------------------------------------------------------------"),!this.validLocal5Code()){this.consoleText+="\n云端绑定未发起！五码格式不正确",this.stopBindCar(0);return}this.consoleText+="\n正在等待云端返回绑定结果...",n.tsp.updateLocalData({deviceNo:this.local.SN,iccid:this.local.ICCID,imei:this.local.IMEI,imsi:this.local.IMSI,sim:this.local.SIM,userId:window._userInfo.user,userName:window._userInfo.displayName,vin:this.cloud.VIN,carType:this.local.carType}).then(t=>{this.consoleText+="\n"+t.data.respMsg}).finally(()=>{this.step=5,this.stopBindCar(1)})})}))}),S.report("track","click",{element_name:"五码绑定",asset_name:this.carBumVal+";",tip:"1174.14.0.1.29262"})},bindCarBle(){this.onFlag=!1,this.chartDataLoaded=!1,this.consoleText="正在拉取数字钥匙数据...",this.carVersionMode.value==="MS11"?n.doip.getIdentifyInfoFromBLEM().then(t=>{if(this.debug)this.local.nfcCardData=this.localMock.nfcCardData;else try{this.local.nfcCardData=t.data[0].nfcCardData[0]["0x3785"]}catch(l){}}).finally(()=>{this.local.nfcCardData?this.consoleText+="\n拉取成功,数字钥匙数据：\n"+this.local.nfcCardData+"\n------------------------------------------------------------------\n正在等待云端返回绑定结果...":(this.consoleText+="\n 超时！操作失败，请重新插拔车端OBD接口后再次操作",this.stopBindCarBle(!1)),n.NFCInfo.getNFCInfo({nfcCardData:this.local.nfcCardData}).then(t=>{this.consoleText+="\n拉取结果：[:".concat(t.data.respCode," ]").concat(t.data.respMsg||"")}).catch(t=>{t.code==="ERR_NETWORK"&&(this.consoleText+="\n未连接到内网，请连接后重试!",this.stopBindCarBle(!1))}).finally(()=>{this.consoleText.includes("操作成功")?this.stopBindCarBle(!0):this.stopBindCarBle(!1)})}):n.doip.getIdentifyInfoFromBLEM15().then(t=>{if(this.debug)this.local.nfcCardData=this.localMock.nfcCardData;else try{this.local.nfcCardData=t.data[0].nfcCardData[0]["0x3785"]}catch(l){}}).finally(()=>{this.local.nfcCardData?this.consoleText+="\n拉取成功,数字钥匙数据：\n"+this.local.nfcCardData+"\n------------------------------------------------------------------\n正在等待云端返回绑定结果...":(this.consoleText+="\n 超时！操作失败，请重新插拔车端OBD接口后再次操作",this.stopBindCarBle(!1)),n.NFCInfo.getNFCInfo({nfcCardData:this.local.nfcCardData}).then(t=>{this.consoleText+="\n拉取结果：[:".concat(t.data.respCode," ]").concat(t.data.respMsg||"")}).catch(t=>{t.code==="ERR_NETWORK"&&(this.consoleText+="\n未连接到内网，请连接后重试!",this.stopBindCarBle(!1))}).finally(()=>{this.consoleText.includes("操作成功")?this.stopBindCarBle(!0):this.stopBindCarBle(!1)})}),S.report("track","click",{element_name:"数字钥匙绑定",asset_name:this.carBumVal+";",tip:"1174.14.0.1.29263"})},stopBindCarBle(t){this.onFlag=!0,this.chartDataLoaded=!0},validCloud(){return(this.cloud.SN.length===33||this.cloud.SN.length===12)&&this.cloud.SIM.length===11&&this.cloud.ICCID.length===19&&this.cloud.IMEI.length===15},validLocal5Code(){return(this.local.SN.length===33||this.local.SN.length===12)&&this.local.SIM.length===11&&this.local.ICCID.length===19&&this.local.IMEI.length===15},validLocalVin(){return![this.local.VCCD.VIN,this.local.TBOX.VIN].some(t=>t!==this.cloud.VIN)},validLocalVin15(){return![this.local.VCCD.VIN].some(t=>t!==this.cloud.VIN)},countValidLocalVin(){return[this.local.VCCD.VIN,this.local.TBOX.VIN,this.local.ADD.VIN,this.local.DCD.VIN,this.local.ETC.VIN].filter(t=>t===this.cloud.VIN).length},async stopBindCar(t){this.onFlag=!0,this.chartDataLoaded=!0,n.tsp.sendLog({deviceNo:this.local.SN,iccid:this.local.ICCID,imei:this.local.IMEI,imsi:this.local.IMSI,log:this.consoleText,sim:this.local.SIM,userId:window._userInfo.user,userName:window._userInfo.displayName,vin:this.cloud.VIN,carType:this.local.carType,result:t})},async exportResult(){let t=new Date().valueOf(),l=this.carBumVal+"-"+t,i=window.downloadPath;await b.choosePath({directory:i,dialogType:"SAVE_DIALOG",saveFilename:l+".txt",fileTypes:["所有文件 (*.*)"],allow_multiple:!1}).then(I=>{I.data.directory&&(console.log("saveFilename2222",l,i),n.blf.exportExeLog({content:this.consoleText,directory:I.data.directory}).then(s=>{s.data.code=="0"&&this.showMessage({timeout:5e3,level:"success",content:"导出成功"})}).catch(s=>{console.log(s)}))})},showMessage({level:t,content:l,timeout:i}){clearTimeout(T),t!=null&&(this.message.level=t),l!=null&&(this.message.content=l),this.message.visible=!0,i>0&&(T=setTimeout(()=>{console.log(T,"msgTimer"),this.message.visible=!1},i))},hideMessage(){this.message.visible=!1},cannel(){this.modal.visible=!1},submit(){this.modal.visible=!1,this.onFlag=!this.onFlag,this.stopBindCar(0)},resultCannel(){this.modal.resultVisible=!1}}},a=t=>(O("data-v-c25c862e"),t=t(),L(),t),A={class:"pull-dt-page"},U={class:"o-pul-er"},R=a(()=>o("div",{class:"o-pul-title"},"读取配置",-1)),P={key:0,style:{background:"#eee"}},$=a(()=>o("h4",null,"debug模拟车端数据",-1)),j=a(()=>o("br",null,null,-1)),J=a(()=>o("br",null,null,-1)),q=a(()=>o("br",null,null,-1)),H=a(()=>o("br",null,null,-1)),K=a(()=>o("br",null,null,-1)),W=a(()=>o("hr",null,null,-1)),G=a(()=>o("br",null,null,-1)),z=a(()=>o("br",null,null,-1)),Q=a(()=>o("br",null,null,-1)),Y=a(()=>o("br",null,null,-1)),Z=a(()=>o("br",null,null,-1)),ll=a(()=>o("hr",null,null,-1)),tl=a(()=>o("br",null,null,-1)),ol={class:"o-pul-p input-cation"},sl=a(()=>o("span",{style:{color:"red"}},"* ",-1)),el=a(()=>o("span",{class:"ota-header-message"},"车    型：",-1)),il={class:"o-pul-p input-cation"},al=a(()=>o("span",{style:{color:"red"}},"* ",-1)),cl=a(()=>o("span",{class:"record-header-message"},"车辆编号：",-1)),nl={key:1,class:"o-pul-p start-rec"},hl=a(()=>o("i",{class:"play-icon"},null,-1)),Il=a(()=>o("i",{class:"play-icon"},null,-1)),dl={key:2,class:"o-pul-p start-rec"},rl=a(()=>o("i",{class:"stop-icon"},null,-1)),Cl=["data-empty"],ul={class:"o-console-wrap"},pl=a(()=>o("div",{class:"o-console-title"},"读取进度",-1)),Vl=["data-loading"],Dl={class:"o-modal-wrap"},Ml={class:"o-modal-header"},Nl={class:"o-modal-header-wrap"},ml=a(()=>o("div",{class:"o-modal-title"},"提示",-1)),fl=a(()=>o("div",{class:"o-modal-container"},[o("span",{class:"record-header-message"},"任务还在执行中，此时关闭TSP助手会终断此任务，确认要继续关闭吗？")],-1)),Sl={class:"o-modal-footer"},gl={class:"o-modal-footer-wrap"};function Tl(t,l,i,I,s,r){const V=N("Header"),D=N("v-select"),C=N("Button"),M=N("Message");return f(),m("div",A,[u(V,{title:"TSP及数字钥匙绑定",showRight:!0,carNum:t.$props.store.connectCar.carNum,connectStatus:t.$props.store.connectCar.status,recentTest:t.$props.store.connectCar.latest},null,8,["carNum","connectStatus","recentTest"]),o("div",U,[R,s.debug?(f(),m("div",P,[$,o("label",null,[c("VCCD"),h(o("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>s.localMock.VCCD.VIN=e)},null,512),[[d,s.localMock.VCCD.VIN]])]),j,o("label",null,[c("TBOX"),h(o("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>s.localMock.TBOX.VIN=e)},null,512),[[d,s.localMock.TBOX.VIN]])]),J,o("label",null,[c("ADD"),h(o("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>s.localMock.ADD.VIN=e)},null,512),[[d,s.localMock.ADD.VIN]])]),q,o("label",null,[c("DCD"),h(o("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>s.localMock.DCD.VIN=e)},null,512),[[d,s.localMock.DCD.VIN]])]),H,o("label",null,[c("ETC"),h(o("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>s.localMock.ETC.VIN=e)},null,512),[[d,s.localMock.ETC.VIN]])]),K,W,o("label",null,[c("SN"),h(o("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>s.localMock.SN=e)},null,512),[[d,s.localMock.SN]])]),G,o("label",null,[c("SIM"),h(o("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>s.localMock.SIM=e)},null,512),[[d,s.localMock.SIM]])]),z,o("label",null,[c("ICCID"),h(o("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>s.localMock.ICCID=e)},null,512),[[d,s.localMock.ICCID]])]),Q,o("label",null,[c("IMEI"),h(o("input",{"onUpdate:modelValue":l[8]||(l[8]=e=>s.localMock.IMEI=e)},null,512),[[d,s.localMock.IMEI]])]),Y,o("label",null,[c("IMSI"),h(o("input",{"onUpdate:modelValue":l[9]||(l[9]=e=>s.localMock.IMSI=e)},null,512),[[d,s.localMock.IMSI]])]),Z,ll,o("label",null,[c("数字钥匙"),h(o("textarea",{style:{width:"430px",height:"6em"},"onUpdate:modelValue":l[10]||(l[10]=e=>s.localMock.nfcCardData=e)},null,512),[[d,s.localMock.nfcCardData]])]),tl])):w("",!0),o("div",ol,[sl,el,u(D,{options:s.carVersionOptions,clearable:!1,searchable:!1,label:"label",value:"value",modelValue:s.carVersionMode,"onUpdate:modelValue":l[11]||(l[11]=e=>s.carVersionMode=e),class:"tch-tool-select"},null,8,["options","modelValue"])]),o("div",il,[al,cl,h(o("input",{type:"text",class:"o-che-input","onUpdate:modelValue":l[12]||(l[12]=e=>s.carBumVal=e),placeholder:"输入当前车辆编号"},null,512),[[d,s.carBumVal]])]),s.onFlag?(f(),m("div",nl,[u(C,{type:"primary",disabled:!r.pullDataValid,progress:s.pullLoadingProgress,loading:s.pullLoading,onClick:r.bindCar},{default:p(()=>[hl,c("五码绑定")]),_:1},8,["disabled","progress","loading","onClick"]),c("  "),u(C,{type:"primary",progress:s.pullLoadingProgress,loading:s.pullLoading,onClick:r.bindCarBle},{default:p(()=>[Il,c("数字钥匙绑定")]),_:1},8,["progress","loading","onClick"])])):(f(),m("div",dl,[u(C,{type:"primary",progress:s.pullLoadingProgress,loading:s.pullLoading},{default:p(()=>[rl,c("绑定中...")]),_:1},8,["progress","loading"])]))]),o("div",{class:"o-console-er","data-empty":s.consoleText===""},[o("div",ul,[pl,h(u(C,{onClick:l[13]||(l[13]=e=>r.exportResult()),class:"export-result"},{default:p(()=>[c("导出Log日志")]),_:1},512),[[g,s.consoleText]])]),h(o("div",{class:"o-console-body","data-loading":!s.chartDataLoaded},F(s.consoleText),9,Vl),[[g,s.consoleText]])],8,Cl),h(o("div",Dl,[o("div",Ml,[o("div",Nl,[ml,o("i",{class:"o-modal-title-close",onClick:l[14]||(l[14]=(...e)=>r.cannel&&r.cannel(...e))})]),fl,o("div",Sl,[o("div",gl,[u(C,{style:{width:"52px"},onClick:r.cannel},{default:p(()=>[c("取消")]),_:1},8,["onClick"]),u(C,{type:"primary",style:{width:"52px",margin:"0 20px 0 10px"},onClick:r.submit},{default:p(()=>[c("确定")]),_:1},8,["onClick"])])])])],512),[[g,this.modal.visible]]),u(M,{message:s.message},null,8,["message"])])}const vl=k(X,[["render",Tl],["__scopeId","data-v-c25c862e"]]);export{vl as default};
