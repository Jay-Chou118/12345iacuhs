System.register(["./index-legacy-a6fcfd60.js"],(function(e,t){"use strict";var n,r,l,a,i,o,s,d,c,u,h,p,f,g,v,y,b,m,S,D,x,w;return{setters:[e=>{n=e.r,r=e.o,l=e.c,a=e.h,i=e.i,o=e.K,s=e.F,d=e.m,c=e.B,u=e.O,h=e.P,p=e.Q,f=e.R,g=e.U,v=e.V,y=e.W,b=e.d,m=e.A,S=e.y,D=e.a,x=e.t,w=e.f}],execute:function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function O(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var l=r.call(e,n||"default");if("object"!==t(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===t(n)?n:String(n)}function k(e,t,n){return(t=O(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!
       * helper-js v3.1.5
       * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
       * Homepage: null
       * Released under the MIT License.
       */function _(e){return"[object Array]"===Object.prototype.toString.call(e)}function C(e){return"[object Object]"===Object.prototype.toString.call(e)}function E(e,t){let n,r=0;for(;(n=e.indexOf(t))>-1;)e.splice(n,1),r++;return r}function N(e){return e[e.length-1]}function F(e,t){return Object.keys(t).forEach((n=>{!function(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}(e,n,t[n])})),e}function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=F({...n},{childrenKey:"children"});const{childrenKey:r}=n,l=_(e)?e:[e];class a{}const i=(e,l,o)=>{n.reverse&&(e=e.slice()).reverse();const s=e.length;for(let d=0;d<s;d++){const c=e[d],u=n.reverse?s-d-1:d,h=o?[...o,u]:[];n.childFirst&&null!=c[r]&&i(c[r],c,h);const p=t(c,u,l,h);if(!1===p)throw new a;if("skip children"!==p){if("skip siblings"===p)break;n.childFirst||null!=c[r]&&i(c[r],c,h)}}};try{i(l,null,_(e)?[]:null)}catch(o){if(!(o instanceof a))throw o}}function T(e,t){const n=function(e,t){let n;return L(e,(function(){if(t(...arguments))return n={node:arguments.length<=0?void 0:arguments[0],index:arguments.length<=1?void 0:arguments[1],parent:arguments.length<=2?void 0:arguments[2],path:arguments.length<=3?void 0:arguments[3]},!1}),arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),n}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return null==n?void 0:n.node}function K(e,t){const n={childrenKey:"children"};t&&Object.assign(n,t);const{childrenKey:r,nodeHandler:l}=n,a=new P;return a.childrenKey=r,L(e,((e,t,n,i)=>{let o=Object.assign({},e);o[r]&&(o[r]=[]),l&&(o=l(o,{oldNode:e,index:t,parent:n,path:i})),a.set(i,o)}),{childrenKey:r}),a.data}class P{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];k(this,"data",void 0),k(this,"childrenKey","children"),this.data=e}get rootChildren(){const{childrenKey:e}=this,{data:t}=this;return _(t)?t:t[e]}*iteratePath(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{childrenKey:n,rootChildren:r}=this;if(t.reverse){const n=[...this.iteratePath(e,{...t,reverse:!1})];n.reverse();for(const{path:e,node:t}of n){const n=e;yield{path:n,node:t}}}else{let t=[],l=r;for(const r of e){const e=[...t,r],a=l[r];yield{path:e,node:a},t=e,l=a[n]}}}getFamily(e){const t=[];for(const{node:n}of this.iteratePath(e))t.push(n);return t}get(e){return N(this.getFamily(e))}getParentAndIndex(e){const t=e.slice(),n=t.pop();return{parent:this.get(t),index:n,parentPath:t}}getParent(e){return this.getParentAndIndex(e).parent}set(e,t){if(null==e||0===e.length)this.data=t;else{const{childrenKey:n}=this;let{rootChildren:r}=this;const{parent:l,index:a}=this.getParentAndIndex(e);let i;1===e.length?(r||(this.data?this.data[n]=[]:this.data=[]),i=r):(l[n]||(l[n]=[]),i=l[n]),i[a]=t}}delete(e){const{childrenKey:t,rootChildren:n}=this,{parent:r,index:l}=this.getParentAndIndex(e),a=1===e.length?n:r[t],i=a[l];return a.splice(l,1),i}walk(e,t){const{childrenKey:n,data:r}=this;return L(r,e,n,t)}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return K(this.data),function(e){const t={};return Object.keys(e).forEach((n=>{void 0!==e[n]&&(t[n]=e[n])})),t}({childrenKey:this.childrenKey,nodeHandler:e.nodeHandler||void 0})}}function B(e){return"function"==typeof e?e(...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]):e}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];let r;const l={};let a=l;return{action:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(0===o.length)return a===l&&(a=e()),a;if(r||(r=new z),!r.has(o)&&(r.set(o,e(...o)),null!=t.capacity)){n.push(o);const e=n.splice(0,n.length-t.capacity);for(const t of e)r.delete(t)}return r.get(o)},clearCache:()=>{r=null,n.splice(0,n.length)}}}function H(e){let t=e.getBoundingClientRect();if(document.documentElement.clientTop>0){const e=t.top-document.documentElement.clientTop,n=t.bottom,r=t.left-document.documentElement.clientLeft,l=t.right,a={top:e,right:l,bottom:n,left:r,width:t.width||l-r,height:t.height||n-e,x:r,y:e};t={...a,toJSON:()=>a}}return t}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n&&n.withSelf?e:e.parentElement;for(;r;){const e=n.until&&r===n.until;if(e&&!n.withUntil)return;const l=t(r);if("break"===l)return;if(l)return r;if(e)return;r=r.parentElement}}function $(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function j(e,t){for(const n of t)if($(e,n))return!0;return!1}function U(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),n,r)}function R(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on".concat(t),n,r)}function V(e,t){return getComputedStyle(e)[t]}function M(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n={start:0,end:e.length-1,maxTimes:1e3,...n};let{start:r,end:l}=n;const{returnNearestIfNoHit:a,maxTimes:i}=n;let o,s;null==r&&(r=0,l=e.length-1);let d,c=0;for(;r>=0&&r<=l;){if(c>=i)throw Error("binarySearch: loop times is over ".concat(i,", you can increase the limit."));o=Math.floor((l-r)/2+r),s=e[o];const n=c+1;if(d=t(s,o,n),d>0)l=o-1;else{if(!(d<0))return{index:o,value:s,count:n,hit:!0};r=o+1}c++}return a?{index:o,value:s,count:c+1,hit:!1,greater:d>0}:null}class z{constructor(){k(this,"_map",new Map),k(this,"_values",{}),k(this,"_objCount",0)}_keysToString(e){const{_map:t}=this;let n=[];for(const r of e){if(!t.has(r))return null;n.push(t.get(r)[0])}return n.toString()}has(e){return null!=this._keysToString(e)}get(e){const{_values:t}=this,n=this._keysToString(e);if(null==n)throw"Value not found by specified keys";return t[n][1]}set(e,t){const{_map:n,_values:r}=this;let l=[];for(const a of e){let e,t=1;n.has(a)?([e,t]=n.get(a),t++):(this._objCount++,e=this._objCount.toString()),n.set(a,[e,t]),l.push(e)}r[l.toString()]=[e.slice(),t]}delete(e){const{_values:t,_map:n}=this,r=this._keysToString(e);if(null==r)throw"Value not found by specified keys";delete t[r];for(const l of e){let[e,t]=n.get(l);t--,0===t?n.delete(l):n.set(l,[e,t])}}clear(){this._map.clear(),this._values={}}*entries(){const{_values:e}=this;for(const t in e){const[n,r]=e[t];yield[n,r]}}count(){return[...this.entries()].length}}
/*!
       * @virtual-list/vue
       * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
       * Homepage: https://virtual-list.phphe.com
       * Released under the MIT License.
       */var W=(e,t)=>{const n=e.__vccOpts||e;for(const[r,l]of t)n[r]=l;return n};const X=u({props:{table:Boolean}}),Y={key:0},q={key:1};var J=W(u({components:{VirtualListTable:W(X,[["render",function(e,t,n,a,i,s){return e.table?(r(),l("table",Y,[o(e.$slots,"prepend"),b("tbody",null,[o(e.$slots,"default")]),o(e.$slots,"append")])):(r(),l("div",q,[o(e.$slots,"prepend"),o(e.$slots,"default"),o(e.$slots,"append")]))}]])},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const t=h(0),n=h(e.firstRender-1),r=p((()=>{var t,r,l;return r=n.value,l=((null==(t=e.items)?void 0:t.length)||1)-1,r<l?r:l})),l=h(0),a=p((()=>b.value[t.value]?L(t.value):0)),i=p((()=>b.value.length>0?L(b.value.length-1)+N(u.value):0)),o=p((()=>b.value[r.value]?i.value-L(r.value)-u.value[r.value]:0)),s=p((()=>e.disabled?{}:{overflow:"auto"})),d=p((()=>{const t={display:"flex"};return e.disabled||(e.horizontal?Object.assign(t,{"margin-left":a.value+"px","margin-right":o.value+"px",width:i.value-o.value-a.value+"px"}):Object.assign(t,{"margin-top":a.value+"px","margin-bottom":o.value+"px"})),t["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete t.display,delete t["flex-direction"]),t})),c=p((()=>f((e.items||[]).map((()=>null))))),u=p((()=>(e.items||[]).map(((t,n)=>{var r;if(null!=c[n])return c[n];let a=null==(r=e.itemSize)?void 0:r.call(e,t,n);return null==a&&(a=l.value),a})))),b=p((()=>{const e=[];return u.value.reduce(((t,n)=>(e.push(t),t+n)),0),e}));g((()=>e.items),k);const m=p((()=>{if(!e.items||e.disabled)return;const n=[];for(let l=t.value;l<=r.value;l++){const t=e.items[l];if(!t)break;n.push({item:t,index:l})}return n})),S=h(),D=h();let x;v((async()=>{k();try{!function(){const e=S.value;new ResizeObserver((e=>{for(let t of e)if($(t.target,"vtlist")){k();break}})).observe(e)}()}catch(e){await y(),k()}}));let w=!1,O=!1;async function k(){var r;if(w)return void(O=!0);if(!e.items||e.disabled)return;w=!0;const a=S.value,i=null==(r=D.value)?void 0:r.$el;if(!a||!i)return;let o;l.value||(l.value=function(){const t=10,n=[],r=e.table?i.querySelector("tbody").children:i.children;for(let e=0;e<r.length;e++){const l=r[e],a=getComputedStyle(l);if(["absolute","fixed"].includes(a.position))continue;const i=C(l);if(n.push(i),n.length>=t)break}return 0===n.length?0:n.reduce(((e,t)=>e+t),0)/n.length}()),t.value=function(){const t=E(a)-F(a)-e.buffer;return M(b.value,(e=>e-t),{returnNearestIfNoHit:!0}).index}(),n.value=function(){const t=E(a)-F(a)+_(a)+e.buffer;return M(b.value,(e=>e-t),{returnNearestIfNoHit:!0}).index}(),await y();let s=0;const d={},u=e.table?i.querySelector("tbody").children:i.children;for(let e=0;e<u.length;e++){const n=u[e],r=V(n,"position");if(r&&["absolute","fixed"].includes(r))continue;const l="none"!==V(n,"display")?C(n):0,a=n.getAttribute("vt-index"),i=a?parseInt(a):t.value+s;d[i]=(d[i]||0)+l,s++}for(const e of Object.keys(d)){const t=parseInt(e);c.value[t]!==d[t]&&(c.value[t]=d[t],o=!0)}o&&await y(),w=!1,O&&(O=!1,k())}function _(t){const n=getComputedStyle(t);let r=parseFloat(e.horizontal?n.width:n.height);return"border-box"===n.boxSizing&&(r=e.horizontal?r-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth):r-parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)),r}function C(t){let n=_(t);const r=getComputedStyle(t);return e.horizontal?n+=parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth)+parseFloat(r.marginLeft)+parseFloat(r.marginRight):n+=parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth)+parseFloat(r.marginTop)+parseFloat(r.marginBottom),n=Number.isNaN(n)?0:n,n}function E(t){return e.horizontal?t.scrollLeft:t.scrollTop}function F(t){const n=getComputedStyle(t);return e.horizontal?parseFloat(n.paddingLeft):parseFloat(n.paddingTop)}function L(e){return b.value[e]}return{listElRef:S,listInnerRef:D,onscroll:function(){const t=S.value;if(!t)return;const n=E(t);null!=x&&e.buffer-Math.abs(n-x)>=10||(x=n,k())},listStyle:s,listInnerStyle:d,visibleItemsInfo:m,getItemKey:function(t,n){if(e.itemKey){if("string"==typeof e.itemKey&&"index"===e.itemKey)return n;if("function"==typeof e.itemKey)return e.itemKey(t,n)}},update:k,sizes:u,positions:b,runtimeSizes:c}}}),[["render",function(e,t,u,h,p,f){const g=n("VirtualListTable");return r(),l("div",{class:"vtlist",ref:"listElRef",style:c(e.listStyle),onScrollPassive:t[0]||(t[0]=(...t)=>e.onscroll&&e.onscroll(...t))},[a(g,{class:"vtlist-inner",ref:"listInnerRef",style:c(e.listInnerStyle),table:e.table},{prepend:i((()=>[o(e.$slots,"prepend")])),append:i((()=>[o(e.$slots,"append")])),default:i((()=>[e.disabled?(r(!0),l(s,{key:0},d(e.items,((t,n)=>o(e.$slots,"default",{key:e.getItemKey(t,n),item:t,index:n}))),128)):(r(!0),l(s,{key:1},d(e.visibleItemsInfo,(({item:t,index:n})=>o(e.$slots,"default",{key:e.getItemKey(t,n),item:t,index:n}))),128))])),_:3},8,["style","table"])],36)}]]);
/*!
       * @he-tree/tree-utils v0.1.0-alpha.1
       * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
       * Homepage: null
       * Released under the MIT License.
       */const G="children",Q={childrenKey:"children",defaultOpen:!1,statsHandler:e=>e,statsFlatHandler:e=>e,afterSetStat(e,t,n){},afterRemoveStat(e){},statHandler:e=>e};class Z extends Error{constructor(e){super(e),this.name="StatNotFoundError"}}
/*!
       * drag-event-service v2.0.0
       * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
       * Homepage: null
       * Released under the MIT License.
       */const ee={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},te={isTouch:e=>e.type&&e.type.startsWith("touch"),_getStore:e=>(e._wrapperStore||(e._wrapperStore=[]),e._wrapperStore),on(e,t,n,r){const{args:l,mouseArgs:a,touchArgs:i}=ne(r),o=this._getStore(e),s=this,d=function(e){let r;if(s.isTouch(e))r={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,screenX:e.changedTouches[0].screenX,screenY:e.changedTouches[0].screenY};else if(r={x:e.pageX,y:e.pageY,pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY},"start"===t&&1!==e.which)return;return n.call(this,e,r)};o.push({handler:n,wrapper:d}),U.call(null,e,ee[t][0],d,...l,...a),U.call(null,e,ee[t][1],d,...l,...i)},off(e,t,n,r){const{args:l,mouseArgs:a,touchArgs:i}=ne(r),o=this._getStore(e);for(let s=o.length-1;s>=0;s--){const{handler:r,wrapper:i}=o[s];n===r&&(R.call(null,e,ee[t][0],i,...l,...a),R.call(null,e,ee[t][1],i,...l,...a),o.splice(s,1))}}};function ne(e){return e||(e={}),{args:e.args||[],mouseArgs:e.mouseArgs||[],touchArgs:e.touchArgs||[]}}
/*!
       * @he-tree/dnd-utils v0.2.0
       * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
       * Homepage: null
       * Released under the MIT License.
       */const re=new Map,le={triggerElement:null,dragElement:null,internal:!1,dropEffect:"none",preventDefault:!1},ae=le;function ie(e){e.dataTransfer&&(e.dataTransfer.dropEffect=ae.dropEffect)}function oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(re.has(e))throw"Already registered on specified element";const n={...t},r=n;function l(e){var t;const r=e.target;r.nodeType===Node.ELEMENT_NODE&&(ae.triggerElement=r);const l=r;if(n.ingoreHTMLTags&&l.tagName&&n.ingoreHTMLTags.find((e=>e.toUpperCase()===l.tagName)))return;const a=null===(t=n.beforeDragStart)||void 0===t?void 0:t.call(n,e);a&&(a.setAttribute("draggable","true"),ae.dragElement=a)}function a(e){var t;ae.internal=!0,null===(t=n.onDragStart)||void 0===t||t.call(n,e),ie(e)}function i(e){var t;null===(t=n.onDrag)||void 0===t||t.call(n,e),ie(e)}function o(e){var t;null===(t=n.onDragEnd)||void 0===t||t.call(n,e),ae.internal=!1,ae.dragElement&&ae.dragElement.removeAttribute("draggable"),ae.triggerElement=null,ae.dragElement=null,ae.dropEffect="none"}F(n,se),te.on(e,"start",l,{touchArgs:[{passive:!0}]});const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e;let r=!1;const l=e=>{var n;r=!0,null===(n=t.onEnter)||void 0===n||n.call(t,e),c.resume()},a=e=>{var n;ce(e.target),null===(n=t.onDragEnter)||void 0===n||n.call(t,e),r||l(e)},i=e=>{var n;r||l(e),null===(n=t.onDragOver)||void 0===n||n.call(t,e)},o=e=>{var l;null===(l=t.onDragLeave)||void 0===l||l.call(t,e);const a=function(){var n;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;r=!1,null===(n=t.onLeave)||void 0===n||n.call(t,l),c.stop()},i=de;de=null,i&&function(e,t){for(;;){if(null==e.parentNode)return!1;if(e.parentNode===t)return!0;e=e.parentNode}}(i,n)||a()},s=e=>{var n;null===(n=t.onDrop)||void 0===n||n.call(t,e)},d=e=>{var n;e instanceof KeyboardEvent&&"Escape"!==e.key||(r=!1,c.stop(),null===(n=t.onEndBeforeLeave)||void 0===n||n.call(t,e))},c=function(e){let t=[];const n=()=>{if(!r.listening){for(const n of e){U.apply(this,n);const e=()=>R.apply(this,n);t.push(e)}r.listening=!0}},r={listening:!1,stop:()=>{if(r.listening){for(const e of t)e();t=[],r.listening=!1}},resume:n,start:n};return r.start(),r}([[e,"drop",d],[window,"mouseup",d],[window,"touchend",d],[window,"keydown",d]]);c.stop();const u=()=>{R(e,"dragenter",a),R(e,"dragover",i),R(e,"dragleave",o),R(e,"drop",s),c.stop()};return U(e,"dragenter",a),U(e,"dragover",i),U(e,"dragleave",o),U(e,"drop",s),u}(e,{onDragLeave(e){var t;null===(t=n.onDragLeave)||void 0===t||t.call(n,e),ie(e)},onDragEnter(e){var t;r.ifPreventDefault(e)&&e.preventDefault(),null===(t=n.onDragEnter)||void 0===t||t.call(n,e),ie(e)},onDragOver(e){var t;r.ifPreventDefault(e)&&e.preventDefault(),null===(t=n.onDragOver)||void 0===t||t.call(n,e),ie(e)},onDrop(e){var t;r.ifPreventDefault(e)&&e.preventDefault(),null===(t=n.onDrop)||void 0===t||t.call(n,e)},onEnter(e){var t;null===(t=n.onEnter)||void 0===t||t.call(n,e)},onLeave(e){var t;null===(t=n.onLeave)||void 0===t||t.call(n,e)}});return U(e,"dragstart",a),U(e,"drag",i),U(e,"dragend",o),Object.assign(n,{root:e,destroy:()=>{te.off(e,"start",l,{touchArgs:[{passive:!0}]}),R(e,"dragstart",a),R(e,"drag",i),R(e,"dragend",o),s(),re.delete(e)}}),re.set(e,r),r}const se={ingoreHTMLTags:["INPUT","TEXTAREA","SELECT","OPTGROUP","OPTION"],ifPreventDefault:e=>!!le.dragElement||ae.preventDefault,beforeDragStart(e){},onDragStart(e){},onDrag(e){},onDragEnter(e){},onDragLeave(e){},onDragOver(e){},onDragEnd(e){},onDrop(e){}};let de=null;const ce=e=>{de=e,setTimeout((()=>{de=null}),20)};var ue=Object.defineProperty,he=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,ye=(e,t,n)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,be=(e,t)=>{for(var n in t||(t={}))ge.call(t,n)&&ye(e,n,t[n]);if(fe)for(var n of fe(t))ve.call(t,n)&&ye(e,n,t[n]);return e},me=(e,t)=>{const n=e.__vccOpts||e;for(const[r,l]of t)n[r]=l;return n};const Se=u({props:["stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor"],emits:["open","close","check"],setup(e,{emit:t}){const n=p((()=>({[e.rtl?"paddingRight":"paddingLeft"]:e.indent*(e.stat.level-1)+"px"})));return g((()=>e.stat.checked),(n=>{e.processor.afterOneCheckChanged(e.stat)&&t("check",e.stat)})),g((()=>e.stat.open),(n=>{t(n?"open":"close",e.stat)})),{indentStyle:n,vLines:p((()=>{const t=[],n=e=>{var t;if(e.parent){let n=null==(t=e.parent)?void 0:t.children.indexOf(e);for(;;){n++;let t=e.parent.children[n];if(!t)break;if(!t.hidden)return!0}}return!1},r=e.rtl?"right":"left",l=e.btt?"top":"bottom";let a=e.stat;for(;a;){let i=(a.level-2)*e.indent+e.treeLineOffset;const o=n(a),s=()=>{t.push({style:{[r]:i+"px",[l]:o?0:"50%"}})};a===e.stat?a.level>1&&s():o&&s(),a=a.parent}return t})),hLineStyle:p((()=>{let t=(e.stat.level-2)*e.indent+e.treeLineOffset;return{[e.rtl?"right":"left"]:t+"px"}}))}}}),De={class:"tree-node-inner"},xe={key:1,class:"tree-node",ref:"el"};function we(e,t={}){var n;return function(e){const t={...Q,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},data:e,stats:null,statsFlat:null,_statsMap:null,initialized:!1,init(){const{data:e,childrenKey:t}=this,n=new P([]);this._statsMap=new Map,L(e,((e,t,r,l)=>{const a=this.statHandler({isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null,data:e,open:Boolean(this.defaultOpen),parent:n.getParent(l),children:[],level:l.length});this._statsMap.set(e,a),n.set(l,a)}),{childrenKey:t});const r=[];n.walk((e=>{r.push(e)})),this.stats=this.statsHandler(n.rootChildren),this.statsFlat=this.statsFlatHandler(r),this.initialized=!0},getStat(e){let t=this._statsMap.get(e);if(!t)throw new Z("Stat not found");return t},has(e){if(e.isStat)return this.statsFlat.indexOf(e)>-1;try{let t=this.getStat(e);return Boolean(t)}catch(t){if(t instanceof Z)return!1;throw t}},_getPathByStat(e){if(null==e)return[];const t=this.getSiblings(e).indexOf(e);return[...e.parent?this._getPathByStat(e.parent):[],t]},afterOneCheckChanged(e){const{checked:t}=e;if(e._ignoreCheckedOnce)return delete e._ignoreCheckedOnce,!1;const n=e=>{const{parent:t}=e;if(t){let e,r;for(const n of t.children)if(n.checked)e=!0;else if(r=!0,e)break;const l=!r||!!e&&0;t.checked!==l&&(t._ignoreCheckedOnce=!0,t.checked=l),n(t)}};return n(e),L(e.children,(e=>{e.checked!==t&&(e._ignoreCheckedOnce=!0,e.checked=t)}),{childrenKey:G}),!0},isVisible(e){const t=e.isStat?e:this.getStat(e),n=e=>!e||!e.hidden&&e.open&&n(e.parent);return Boolean(!t.hidden&&n(t.parent))},updateCheck(){L(this.stats,(e=>{if(e.children&&e.children.length>0){const t=e.children.every((e=>e.checked));e.checked!==t&&(e._ignoreCheckedOnce=!0,e.checked=t)}}),{childFirst:!0,childrenKey:G})},getChecked(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.statsFlat.filter((t=>t.checked||e&&0===t.checked))},getUnchecked(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.statsFlat.filter((t=>e?!t.checked:!1===t.checked))},openAll(){for(const e of this.statsFlat)e.open=!0},closeAll(){for(const e of this.statsFlat)e.open=!1},openNodeAndParents(e){const t=e.isStat?e:this.getStat(e);for(const n of this.iterateParent(t,{withSelf:!0}))n.open=!0},_calcFlatIndex(e,t){let n=e?this.statsFlat.indexOf(e)+1:0;const r=e?e.children:this.stats;for(let l=0;l<t;l++)n+=this._count(r[l]);return n},add(e,t,n){if(this.has(e))throw"Can't add because data exists in tree";const r=t?t.children:this.stats;null==n&&(n=r.length);const l=this.statHandler({isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null,open:Boolean(this.defaultOpen),data:e,parent:t||null,children:[],level:t?t.level+1:1});this._setPosition(l,t||null,n);const a=e[this.childrenKey];if(a){const e=a.slice();for(const t of e)this.add(t,l)}},remove(e){const t=this.getSiblings(e);if(t.includes(e)){E(t,e);const n=this._flat(e);this.statsFlat.splice(this.statsFlat.indexOf(e),n.length);for(const e of n)this._statsMap.delete(e.data);return this.afterRemoveStat(e),!0}return!1},getSiblings(e){const{parent:t}=e;return t?t.children:this.stats},_setPosition(e,t,n){(t?t.children:this.stats).splice(n,0,e),e.parent=t,e.level=t?t.level+1:1;const r=this._calcFlatIndex(t,n),l=this._flat(e);this.statsFlat.splice(r,0,...l);for(const a of l)this._statsMap.has(a.data)||this._statsMap.set(a.data,a);L(e,((e,t,n)=>{n&&(e.level=n.level+1)}),{childrenKey:G}),this.afterSetStat(e,t,n)},*iterateParent(e,t){let n=null!=t&&t.withSelf?e:e.parent;for(;n;)yield n,n=n.parent},move(e,t,n){if(this.has(e)){if(e.parent===t&&this.getSiblings(e).indexOf(e)===n)return!1;if(e===t)throw new Error("Can't move node to it self");if(t&&e.level<t.level){let n;for(const r of this.iterateParent(t))if(r.level===e.level){n=r;break}if(e===n)throw new Error("Can't move node to its descendant")}this.remove(e)}return this._setPosition(e,t,n),!0},_flat(e){const t=[];return L(e,(e=>{t.push(e)}),{childrenKey:G}),t},_count(e){return this._flat(e).length},getData(e,t){const{childrenKey:n}=this,r=new P([]);return r.childrenKey=n,L(t||this.stats,((t,l,a,i)=>{let o={...t.data,[n]:[]};e&&(o=e(o)),r.set(i,o)}),{childrenKey:G}),r.data}},n=t;return t.noInitialization||n.init(),n}(e,(n=be({},t),he(n,pe({statHandler(e){return this._statHandler2&&(e=this._statHandler2(e)),Oe(t.statHandler,f(e))},statsHandler:e=>Oe(t.statsHandler,f(e)),statsFlatHandler:e=>Oe(t.statsFlatHandler,f(e))}))))}function Oe(e,t){return e?e(t):t}const ke=u({components:{VirtualList:J,TreeNode:me(Se,[["render",function(e,t,n,a,i,u){return e.table?(r(),l("tr",xe,[o(e.$slots,"default",{indentStyle:e.indentStyle})],512)):(r(),l("div",{key:0,class:S(["tree-node",{"tree-node--with-tree-line":e.treeLine}]),style:c(e.indentStyle),ref:"el"},[e.treeLine?(r(),l(s,{key:0},[(r(!0),l(s,null,d(e.vLines,(e=>(r(),l("div",{class:"tree-line tree-vline",style:c(e.style)},null,4)))),256)),e.stat.level>1?(r(),l("div",{key:0,class:"tree-line tree-hline",style:c(e.hLineStyle)},null,4)):w("",!0)],64)):w("",!0),b("div",De,[o(e.$slots,"default",{indentStyle:e.indentStyle})])],6))}]])},props:{value:{required:!1,type:Array},modelValue:{required:!0,type:Array},updateBehavior:{type:String,default:"modify"},processor:{type:Object,default:()=>we([],{noInitialization:!0})},childrenKey:{type:String,default:"children"},textKey:{type:String,default:"text"},indent:{type:Number,default:20},virtualization:{type:Boolean,default:!1},virtualizationPrerenderCount:{type:Number,default:20},defaultOpen:{type:Boolean,default:!0},statHandler:{type:Function},rtl:{type:Boolean,default:!1},btt:{type:Boolean,default:!1},table:{type:Boolean,default:!1},watermark:{type:Boolean,default:!1},nodeKey:{type:[String,Function],default:"index"},treeLine:{type:Boolean,default:!1},treeLineOffset:{type:Number,default:8}},emits:["update:modelValue","click:node","open:node","close:node","check:node","beforeDragStart","before-drag-start","after-drop","change","enter","leave"],data(){return{stats:[],statsFlat:[],dragNode:null,dragOvering:!1,placeholderData:{},placeholderColspan:1,batchUpdateWaiting:!1,self:this,_ignoreValueChangeOnce:!1}},computed:{valueComputed(){return this.modelValue||[]},visibleStats(){const{statsFlat:e,isVisible:t}=this;let n=e;return this.btt&&(n=n.slice(),n.reverse()),n.filter((e=>t(e)))},rootChildren(){return this.stats}},methods:{_emitValue(e){this.$emit("update:modelValue",e)},_updateValue(e){return"disabled"!==this.updateBehavior&&(e!==this.valueComputed&&(this._ignoreValueChangeOnce=!0),this._emitValue(e),!0)},getStat:Ee(_e("getStat")),has:Ee(_e("has")),updateCheck:_e("updateCheck"),getChecked:_e("getChecked"),getUnchecked:_e("getUnchecked"),openAll:_e("openAll"),closeAll:_e("closeAll"),openNodeAndParents:_e("openNodeAndParents"),isVisible:_e("isVisible"),move:Ce("move"),add:Ee(Ce("add")),addMulti(e,t,n){this.batchUpdate((()=>{let r=n;for(const n of e)this.add(n,t,r),null!=r&&r++}))},remove:_e("remove"),removeMulti(e){this.batchUpdate((()=>{for(const t of e)this.remove(t)}))},iterateParent:_e("iterateParent"),getSiblings:_e("getSiblings"),getData:_e("getData"),getRootEl(){return this.$refs.vtlist.listElRef},batchUpdate(e){const t=this.ignoreUpdate(e);return this.batchUpdateWaiting||this._updateValue("new"===this.updateBehavior?this.getData():this.valueComputed),t},ignoreUpdate(e){const t=this.batchUpdateWaiting;this.batchUpdateWaiting=!0;const n=e();return this.batchUpdateWaiting=t,n}},watch:{processor:{immediate:!0,handler(e){if(e){const t=e=>{if(e){const{childrenKey:t}=this;return e[t]||(e[t]=[]),e[t]}return this.valueComputed};e._statHandler2=this.statHandler?e=>e.data===this.placeholderData?e:this.statHandler(e):null,e.afterSetStat=(e,n,r)=>{const{childrenKey:l,updateBehavior:a}=this;let i=this.valueComputed;if("new"===a){if(this.batchUpdateWaiting)return;i=this.getData()}else if("modify"===a){const l=t(null==n?void 0:n.data);l.includes(e.data)||l.splice(r,0,e.data)}this.batchUpdateWaiting||this._updateValue(i)},e.afterRemoveStat=e=>{var n;const{childrenKey:r,updateBehavior:l}=this;let a=this.valueComputed;if("new"===l){if(this.batchUpdateWaiting)return;a=this.getData()}else"modify"===l&&E(t(null==(n=e.parent)?void 0:n.data),e.data);this.batchUpdateWaiting||this._updateValue(a)}}e.initialized||(e.data=this.valueComputed,Object.assign(e,function(e,t){let n=new Set(t);const r={};return n.forEach((t=>{r[t]=e[t]})),r}(this,["childrenKey","defaultOpen"])),e.init(),e.updateCheck()),this.stats=e.stats,this.statsFlat=e.statsFlat,e.data!==this.valueComputed&&this._updateValue(e.data)}},valueComputed:{handler(e){if(this._ignoreValueChangeOnce)this._ignoreValueChangeOnce=!1;else{const{processor:t}=this;t.data=e,t.init(),this.stats=t.stats,this.statsFlat=t.statsFlat}}}},created(){},mounted(){!1===this.watermark&&(window._heTreeWatermarkDisabled=!0),this.watermark&&!window._heTreeWatermarkDisabled&&(window._heTreeWatermark||(window._heTreeWatermark=!0,console.log("%c[he-tree] Vue tree component:  https://hetree.phphe.com","color:#0075ff; font-size:14px;")))}});function _e(e){return function(...t){return this.processor[e](...t)}}function Ce(e){return function(...t){return this.batchUpdate((()=>this.processor[e](...t)))}}function Ee(e){return function(t,...n){return t&&(t=f(t)),e.call(this,t,...n)}}const Ne={key:0,class:"drag-placeholder he-tree-drag-placeholder"},Fe=["colspan"],Le={class:"drag-placeholder he-tree-drag-placeholder"};let Te,Ke,Pe,Be,Ae,He,Ie=null,$e=null;e("c",u({extends:me(ke,[["render",function(e,t,d,u,h,p){const f=n("TreeNode"),g=n("VirtualList");return r(),m(g,{class:S(["he-tree",{"he-tree--rtl rtl":e.rtl,"he-tree--drag-overing drag-overing":e.dragOvering}]),ref:"vtlist",items:e.visibleStats,disabled:!e.virtualization,table:e.table,itemKey:e.nodeKey},{prepend:i((()=>[o(e.$slots,"prepend",{tree:e.self})])),default:i((({item:n,index:d})=>[a(f,{"vt-index":d,class:S([n.class,{"drag-placeholder-wrapper":n.data===e.placeholderData,"dragging-node":n===e.dragNode}]),style:c(n.style),stat:n,rtl:e.rtl,btt:e.btt,indent:e.indent,table:e.table,treeLine:e.treeLine,treeLineOffset:e.treeLineOffset,processor:e.processor,onClick:t=>e.$emit("click:node",n),onOpen:t[0]||(t[0]=t=>e.$emit("open:node",t)),onClose:t[1]||(t[1]=t=>e.$emit("close:node",t)),onCheck:t[2]||(t[2]=t=>e.$emit("check:node",t))},{default:i((({indentStyle:t})=>[n.data===e.placeholderData?(r(),l(s,{key:0},[e.table?(r(),l("td",{key:1,style:c(t),colspan:e.placeholderColspan},[b("div",Le,[o(e.$slots,"placeholder",{tree:e.self})])],12,Fe)):(r(),l("div",Ne,[o(e.$slots,"placeholder",{tree:e.self})]))],64)):o(e.$slots,"default",{key:1,node:n.data,stat:n,indentStyle:t,tree:e.self},(()=>[D(x(n.data[e.textKey]),1)]))])),_:2},1032,["vt-index","class","style","stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor","onClick"])])),append:i((()=>[o(e.$slots,"append",{tree:e.self})])),_:3},8,["class","items","disabled","table","itemKey"])}]]),props:{triggerClass:{type:[String,Array]},disableDrag:Boolean,disableDrop:Boolean,eachDraggable:{type:Function},eachDroppable:{type:Function},rootDroppable:{type:[Boolean,Function],default:!0},dragOpen:{type:Boolean,default:!0},dragOpenDelay:{type:Number,default:0},beforeDragOpen:{type:Function},resolveStartMovePoint:{type:[String,Function]},keepPlaceholder:{type:Boolean},maxLevel:{type:Number},dragCopy:{type:Boolean},dragCopyDataHandler:{type:Function},onExternalDragOver:{type:Function},externalDataHandler:{type:Function}},data:()=>({treeDraggableInstance:null}),computed:{},methods:{getNodeByElement(e){const t=e.getAttribute("vt-index");return null==t?null:this.visibleStats[t]},isDraggable(e){if(this.disableDrag)return!1;if(null!=e.draggable)return e.draggable;if(this.eachDraggable){const t=this.eachDraggable(e);if(null!=t)return t}const{parent:t}=e;return!t||this.isDraggable(t)},isDroppable(e){if(this.disableDrop)return!1;if(!e)return B(this.rootDroppable,[this,Ie]);if(null!=e.droppable)return e.droppable;if(this.eachDroppable){const t=this.eachDroppable(e);if(null!=t)return t}const{parent:t}=e;return!t||this.isDroppable(t)},_eachDroppable(){var e;return B(null==(e=this._isDragCopy)?void 0:e.call(this),[this])}},mounted(){const e=(e,t)=>{let n=!0;return Ie&&Ie!==this&&(n=n&&this._isMoved),this.table&&!this._isDragCopy&&(n=n&&this._isDragCopy),n&&(e.x!==t.x||e.y!==t.y)},t=(e,t)=>{$e.ignoreUpdate((()=>{if(!$e.has($e.placeholderData)){if($e.table){let e=0;const t=$e.getRootEl().querySelector("tr");if(t)for(const{value:n}of function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.reverse)if(null!=e.length)for(let n=e.length-1;n>=0;n--){const r={value:e[n],index:n};t.exclude&&t.exclude(r)||(yield r)}else{if(!C(e))throw"Unsupported type";{const n=Object.keys(e);n.reverse();for(const r of n){const n={value:e[r],key:r};t.exclude&&t.exclude(n)||(yield n)}}}else if(null!=e.length)for(let n=0;n<e.length;n++){const r={value:e[n],index:n};t.exclude&&t.exclude(r)||(yield r)}else{if(!C(e))throw"Unsupported type";for(const n of Object.keys(e)){const r={value:e[n],key:n};t.exclude&&t.exclude(r)||(yield r)}}}(t.children))"none"!==V(n,"display")&&(e+=n.colSpan||1);e<1&&(e=1),$e.placeholderColspan=e}$e.add($e.placeholderData)}const n=$e.getStat($e.placeholderData);$e.move(n,e,t)}))},n=()=>{const e=this;if(e.has(e.placeholderData))return e.remove(e.getStat(e.placeholderData)),!0},r=e=>{le.dropEffect=e?(null==Ie?void 0:Ie.dragCopy)?"copy":"move":"none"},l=e=>{const t=this;e?r(!0):t.keepPlaceholder?t.has(t.placeholderData)||r(!1):(n(),r(!1))};let a={x:0,y:0};const i=this.getRootEl();let o=null;const s=()=>{$e.has($e.placeholderData)&&$e.ignoreUpdate((()=>{$e.remove($e.getStat($e.placeholderData)),Ie&&(Ie.dragNode.hidden=!1,Ie.dragOvering=!1)}))};var d,c;this.treeDraggableInstance=oe(i,{beforeDragStart:e=>{if(!le.triggerElement)return;let t=this.triggerClass;t&&0!==t.length||(t="tree-node");let n=_(r=t)?r:[r];var r;let l=I(le.triggerElement,(e=>!!j(e,n)||($(e,"tree-node")?"break":void 0)),{withSelf:!0,until:i});if(o=I(l,(e=>{if($(e,"tree-node"))return!0}),{withSelf:!0,until:i}),o){if(He=this.getNodeByElement(o),!He)throw"Can't find drag node";if(this.isDraggable(He))return this.$emit("before-drag-start",He),this.$emit("beforeDragStart",He),i}},onDragStart:e=>{var n,r;if(!o||!He)return;{const{x:t,y:r}=o.getBoundingClientRect(),{clientX:l,clientY:a}=e;null==(n=e.dataTransfer)||n.setDragImage(o,l-t,a-r)}const l={x:e.clientX,y:e.clientY};Ae=l,Ie=this,Ie.dragNode=He,Be=(()=>{if("mouse"===this.resolveStartMovePoint)return{x:e.clientX,y:e.clientY};if("function"==typeof this.resolveStartMovePoint)return this.resolveStartMovePoint(o);{let e,t=0;if(this.table){let n=o.getBoundingClientRect();e={x:n.x,y:n.y},this.rtl&&(e.x=n.right),t=n.height}else if(this.rtl){const n=o.children[0].getBoundingClientRect();e={x:n.right,y:n.y},t=n.height}else e=o.children[0].getBoundingClientRect().toJSON(),t=e.height;return this.btt&&(e.y+=t),e}})(),this.dragOvering=!0;const a=Ie.getSiblings(Ie.dragNode),i=a.indexOf(He);Te={tree:Ie,dragNode:He,parent:He.parent,siblings:a,indexBeforeDrop:i},$e=this,null==(r=e.dataTransfer)||r.setData("text",`he-tree drag start at ${(new Date).toISOString()}`),Ie._eachDroppable()||setTimeout((()=>{He.hidden=!0,t(He.parent,i+1)}),0)},onEnter:e=>{this.$emit("enter",e)},onLeave:e=>{Pe=null,this.dragOvering=!1,le.preventDefault=!1,n(),this.$emit("leave",e)},onDragOver:(d=n=>{if(!Ie){if(!this.onExternalDragOver||!1===this.onExternalDragOver(n))return;le.preventDefault=!0}const r={x:n.clientX,y:n.clientY},i=e(r,a);if(a=r,!i)return;this.dragOvering=!0,$e=this;const o=Be?{x:Be.x+(r.x-Ae.x),y:Be.y+(r.y-Ae.y)}:be({},r),{btt:s,rtl:d}=$e;if($e.disableDrop)return void(le.dropEffect="none");let c,u;const h=$e.getRootEl().querySelectorAll(".tree-node"),p=[];h.forEach((e=>{j(e,["drag-placeholder-wrapper","dragging-node"])||"none"===V(e,"display")||p.push(e)}));const f=M(p,(e=>H(e)[s?"bottom":"top"]-o.y),{returnNearestIfNoHit:!0});let g,v,y=null;f.hit||(f.greater?s||(y=f.index-1,p[y]||y++):s&&(y=f.index+1,p[y]||y--)),null==y&&(y=f.index),g=p[y],v=s?p[y-1]:p[y+1],c=g&&$e.getNodeByElement(g),u=v&&$e.getNodeByElement(v);const{indent:b}=$e,m=A((()=>{if($e.table){let e=H(g).toJSON();const t=b*(c.level-1);return d?(e.width-=t,e.right-=t):e.x+=t,e}return H(g.firstElementChild)})).action,S=A((()=>s?o.y>m().y+m().height/2:o.y<m().y+m().height/2)).action,D=A((()=>s?!g||y===p.length-1&&S():!g||0===y&&S())).action,x=A((()=>d?o.x-(m().x+m().width):m().x-o.x)).action,w=A((()=>d?o.x<m().x+m().width-b:o.x>m().x+b)).action;let O;if(D())O=1,c=null;else{if(!c)return;O=x()>0?c.level-Math.ceil(x()/b):w()?c.level+1:c.level}u&&O<u.level&&(O=u.level),(async()=>{let e,t,n=!1,r=null;const l=async e=>{if(e.open)return!0;if(!$e.dragOpen)return!1;if(!$e.dragOpenDelay)return e.open=!0,!0;if(r=e,Pe!==e){let t=function(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}}();Pe=e;const l=e;return setTimeout((async()=>{l!==Pe?(n=!0,t.resolve(!0)):($e.beforeDragOpen&&await $e.beforeDragOpen(e),l!==Pe?(n=!0,t.resolve(!0)):(e.open=!0,r=null,t.resolve(!0)))}),$e.dragOpenDelay),await t.promise}n=!0},a=async()=>{if(!$e.isDroppable(c)||!(await l(c)))return!1;n||(e=c,t=null)},i=(n=O)=>{let r=c,l=[];for(;r&&r.level>=n;)r=r.parent||null,l.unshift(r);let a=0;for(const i of l){if($e.isDroppable(i))return e=i,t=l[a+1]||c,!0;a++}return!1};c?O>c.level?!1===await a()&&i(c.level):!1===i()&&await a():$e.isDroppable(null)&&(e=null),Pe=r;const o=Boolean(!n&&(e||null===e));return{cancelled:n,success:o,parent:e,index:o?t?(e?e.children:$e.stats).filter((e=>e.data!==$e.placeholderData)).indexOf(t)+1:0:-1}})().then((e=>{if(!e.cancelled)if(e.success){if(Ie&&null!=$e.maxLevel&&$e.maxLevel>0){const t=Ie.dragNode;let n=0;if(L(t,(e=>{e.level>n&&(n=e.level)}),{childrenKey:G}),n-t.level+1+(e.parent?e.parent.level:0)>$e.maxLevel)return void l(!1)}l(!0),t(e.parent,e.index)}else l(!1)}))},c=()=>{},function(){let e,t;try{e=d(...arguments)}catch(n){t=n}finally{c()}if(t)throw t;return e}),onDrop:e=>{$e=this;const t=!Ie;if(!$e)return;const n=null==Ie?void 0:Ie.dragNode;let r,l=(()=>{var l;let a=!0;if($e.has($e.placeholderData)){if(t)r=null==(l=this.externalDataHandler)?void 0:l.call(this,e),a=null!=r;else if(!Ie.dragCopy){const e=$e.getStat($e.placeholderData);Ie===$e&&e.parent===n.parent&&T(n,(t=>t===e))}}else a=!1;return a})();if(l){const e=$e.getStat($e.placeholderData),t=$e.getSiblings(e);Ke={tree:$e,dragNode:n,parent:e.parent,siblings:t,indexBeforeDrop:t.indexOf(e)}}(()=>{if(s(),l){let e=Ke.indexBeforeDrop;Ie&&!Ie.dragCopy&&Ie===$e&&Te.parent==Ke.parent&&Te.indexBeforeDrop<e&&e--,Ie&&Ie!==$e&&!Ie._eachDroppable()&&Ie.batchUpdate((()=>{Ie.remove(n),Ie.updateCheck()})),$e.batchUpdate((()=>{let t,n=null==Ie?void 0:Ie.dragNode;r?t=r:Ie._eachDroppable()&&(t=K(Ie.dragNode.data,{childrenKey:Ie.childrenKey}),Ie.dragCopyDataHandler&&(t=Ie.dragCopyDataHandler(t))),t&&($e.add(t),n=$e.getStat(t)),$e.move(n,Ke.parent,e),$e.updateCheck()}))}$e.$emit("after-drop"),l&&(Ie&&(Ie.dragCopy||Ie.$emit("change")),$e!==Ie&&$e.$emit("change"))})()},onDragEnd:e=>{s(),Ie&&(Ie.dragNode&&(Ie.dragNode.hidden=!1),Ie.dragNode=null,Ie.dragOvering=!1,Ie=null),$e=null,Pe=null,He=null}})},unmounted(){var e;null==(e=this.treeDraggableInstance)||e.destroy()}}))}}}));
