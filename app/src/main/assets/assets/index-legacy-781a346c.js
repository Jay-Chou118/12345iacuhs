System.register(["./Header-legacy-b62f8f94.js","./Button-legacy-6868fe05.js","./Message-legacy-8919c457.js","./index-legacy-37c13ffb.js","./Cascader-legacy-13007779.js","./Spin-legacy-8e2c918d.js","./ev-timeplot-legacy-9fc52a29.js","./index-legacy-da60ec04.js","./index.es-legacy-43205711.js","./signal-legacy-1ac1ca13.js","./index-legacy-c518ff9d.js","./CopyPath-legacy-2799712f.js","./time-legacy-9e872c4a.js","./ButtonGroup-legacy-886291ab.js","./num-legacy-b60967d7.js"],(function(e,t){"use strict";var a,l,i,s,n,o,d,r,c,h,m,p,u,g,b,f,y,v,w,C,k,S,T,D,V,x,I,L,F,R,$,M,E,_,N,A,O,P,U,H,B,j,q,z,K,W,G,X,Y,J,Q,Z,ee,te,ae,le,ie,se,ne;return{setters:[e=>{a=e.H},e=>{l=e.B},e=>{i=e.M},e=>{s=e._,n=e.S,o=e.k,d=e.r,r=e.l,c=e.w,h=e.o,m=e.c,p=e.d,u=e.t,g=e.h,b=e.F,f=e.i,y=e.a,v=e.f,w=e.p,C=e.b,k=e.L,S=e.m,T=e.q,D=e.H,V=e.I,x=e.u,I=e.g,L=e.x,F=e.y,R=e.B,$=e.s,M=e.j,E=e.e,_=e.z,N=e.A,A=e.v,O=e.C,P=e.J,U=e.E,H=e.K,B=e.M,j=e.N,q=e.n},e=>{z=e.C},e=>{K=e.S},e=>{W=e.A,G=e.W,X=e.P},e=>{Y=e.M},e=>{J=e.c},e=>{Q=e.t},e=>{Z=e.n},e=>{ee=e.b,te=e.s,ae=e.C},e=>{le=e.s,ie=e.a},e=>{se=e.B},e=>{ne=e.b}],execute:function(){let t=0;const oe={props:["title","curViewInx","carType","sdb","tinyBatteryFlag","loading"],emits:["cancel","importFileSubmit","treeDataChange"],components:{Button:l,Cascader:z,Message:i,Spin:K},data:()=>({dbcVal:[n.DEFAULT[0].value,n.DEFAULT[0].children[0].value],channelVal:{label:"(不加载)",value:0},channelValTwo:{label:"(不加载)",value:0},blfDirectory:"",dbcDirectory:"",dbcDirectoryTwo:"",channelNo:{label:1,value:1},channelNoTwo:{label:2,value:2},message:{visible:!1,level:"",content:""},filesList:["","","","","","","","","","","","","","","",""]}),watch:{dbcVal:{handler(e){this.channelVal={label:"(不加载)",value:0},this.channelValTwo={label:"(不加载)",value:0}},immediate:!0}},mounted(){},computed:{dbcVerOpts:()=>[...n.DEFAULT,{label:"自定义模板",value:"自定义模板"}],channelOptions(){let e=[];if(""!==this.dbcVal[0]&&""!==this.dbcVal[1]){e=n.DEFAULT.find((e=>e.value===this.dbcVal[0]))?.children.find((e=>e.value===this.dbcVal[1]))?.comments||[];let t=e.map(((e,t)=>e?`${t}-${e}`:e)).filter((e=>""!==e)).map(((e,t)=>({label:e,value:Number(e.split("-")[0])})));return t.unshift({label:"(不加载)",value:0}),t}}},methods:{choosePath(){o.choosePath({directory:window.downloadPath,saveFilename:"tspa-Record.blf",dialogType:"SAVE_DIALOG",fileTypes:["BLF文件 (*.blf;*.BLF)"],allow_multiple:!1}).then((({data:e})=>{console.log("res>>>",e),e.directory&&(this.blfDirectory=e.directory)}))},chooseDbcPath(){o.choosePath({dialogType:"OPEN_DIALOG",fileTypes:["DBC文件 (*.dbc;*.DBC)"],allow_multiple:!1}).then((({data:e})=>{e.directory&&(this.dbcDirectory=e.directory)}))},chooseDbcPathTwo(){o.choosePath({dialogType:"OPEN_DIALOG",fileTypes:["DBC文件 (*.dbc;*.DBC)"],allow_multiple:!1}).then((({data:e})=>{e.directory&&(this.dbcDirectoryTwo=e.directory)}))},submit(){"自定义模板"!==this.dbcVal[0]?this.channelVal.value===this.channelValTwo.value&&0!==this.channelVal.value?this.showMessage({timeout:5e3,level:"error",content:"不可重复选择相同通道"}):""!==this.blfDirectory?this.$emit("submitToShow",this.dbcVal,[this.channelVal.label,this.channelValTwo.label],["(不加载)","(不加载)"],this.blfDirectory):this.showMessage({timeout:5e3,level:"error",content:"请选择保存目录路径"}):this.channelNo===this.channelNoTwo?this.showMessage({timeout:5e3,level:"error",content:"不可重复选择相同通道"}):""!==this.blfDirectory?(console.log("自定义传参",this.channelNo),this.$emit("submitToShow",this.dbcVal,[this.channelNo.value+"-"+this.dbcDirectory,this.channelNoTwo.value+"-"+this.dbcDirectoryTwo],[],this.blfDirectory)):this.showMessage({timeout:5e3,level:"error",content:"请选择保存目录路径"})},showMessage({level:e,content:a,timeout:l}){clearTimeout(t),null!=e&&(this.message.level=e),null!=a&&(this.message.content=a),this.message.visible=!0,l>0&&(t=setTimeout((()=>{this.message.visible=!1}),l))}}},de=e=>(w("data-v-b63c6a22"),e=e(),C(),e),re={class:"o-import-dialog"},ce={class:"o-dialog-wrap"},he={class:"o-dialog-header-wrap"},me={class:"o-dialog-title"},pe={class:"o-dialog-container-wrap"},ue={class:"o-import-configuration"},ge={class:"o-dialog-item-wrap"},be=de((()=>p("span",{class:"o-dialog-item"},"车型/DBC：",-1))),fe={class:"o-dialog-item-select"},ye={class:"o-dialog-item-wrap edit-modal-channel"},ve=de((()=>p("span",{class:"o-dialog-item"},"通道1：",-1))),we={class:"o-dialog-item-wrap edit-modal-channel-two"},Ce=de((()=>p("span",{class:"o-dialog-item"},"通道2：",-1))),ke={class:"o-dialog-item-wrap"},Se=de((()=>p("span",{style:{color:"red"}},null,-1))),Te=de((()=>p("span",{class:"o-dialog-item"},"通道1：",-1))),De={class:"o-dialog-tab"},Ve={class:"o-dialog-choose-dbc"},xe=["title"],Ie={class:"o-dialog-item-wrap"},Le=de((()=>p("span",{style:{color:"red"}},null,-1))),Fe=de((()=>p("span",{class:"o-dialog-item"},"通道2：",-1))),Re={class:"o-dialog-tab"},$e={class:"o-dialog-choose-dbc"},Me=["title"],Ee={class:"o-dialog-item-wrap"},_e=de((()=>p("span",{style:{color:"red"}},"* ",-1))),Ne=de((()=>p("span",{class:"o-dialog-item"},"保存目录：",-1))),Ae=["title"],Oe={class:"o-dialog-footer-wrap"},Pe={class:"o-dialog-footer"},Ue={key:0,class:"o-dialog-loading"},He=s(oe,[["render",function(e,t,a,l,i,s){const n=d("Cascader"),o=d("v-select"),w=d("Button"),C=d("Spin"),k=d("Message"),S=r("esc");return c((h(),m("div",re,[p("div",ce,[p("div",he,[p("div",me,u(e.$props.title),1),p("i",{class:"o-dialog-title-close",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))})]),p("div",pe,[p("div",ue,[p("div",ge,[be,p("div",fe,[g(n,{options:s.dbcVerOpts,modelValue:i.dbcVal,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dbcVal=e)},null,8,["options","modelValue"])])]),"自定义模板"!=i.dbcVal[0]?(h(),m(b,{key:0},[p("div",ye,[ve,g(o,{options:s.channelOptions,clearable:!1,label:"label",value:"value",modelValue:i.channelVal,"onUpdate:modelValue":t[2]||(t[2]=e=>i.channelVal=e),class:"chf-input-ecu"},null,8,["options","modelValue"])]),p("div",we,[Ce,g(o,{options:s.channelOptions,clearable:!1,label:"label",value:"value",modelValue:i.channelValTwo,"onUpdate:modelValue":t[3]||(t[3]=e=>i.channelValTwo=e),class:"chf-input-ecu"},null,8,["options","modelValue"])])],64)):(h(),m(b,{key:1},[p("div",ke,[Se,Te,p("div",De,[p("div",Ve,[p("div",{class:"o-table-dbc input-overflow-sty",title:i.dbcDirectory||"--"},u(i.dbcDirectory||"--"),9,xe),p("a",{class:"chose-file chose-dbc-file",onClick:t[4]||(t[4]=e=>s.chooseDbcPath())},"选择DBC文件")])])]),p("div",Ie,[Le,Fe,p("div",Re,[p("div",$e,[p("div",{class:"o-table-dbc input-overflow-sty",title:i.dbcDirectoryTwo||"--"},u(i.dbcDirectoryTwo||"--"),9,Me),p("a",{class:"chose-file chose-dbc-file",onClick:t[5]||(t[5]=e=>s.chooseDbcPathTwo())},"选择DBC文件")])])])],64)),p("div",Ee,[_e,Ne,g(w,{onClick:s.choosePath,class:"choose-path"},{default:f((()=>[y("选择路径")])),_:1},8,["onClick"]),y("    ")]),p("div",{class:"show-directory",title:i.blfDirectory},u(i.blfDirectory),9,Ae)])]),p("div",Oe,[p("div",Pe,[g(w,{style:{width:"52px"},onClick:t[6]||(t[6]=t=>e.$emit("cancel"))},{default:f((()=>[y("取消")])),_:1}),g(w,{type:"primary",style:{width:"52px",margin:"0 20px 0 10px"},onClick:s.submit},{default:f((()=>[y("连接")])),_:1},8,["onClick"])])]),e.$props.loading?(h(),m("div",Ue,[g(C)])):v("",!0)]),g(k,{message:i.message},null,8,["message"])])),[[S,()=>e.$emit("cancel")]])}],["__scopeId","data-v-b63c6a22"]]);let Be=0;const je={props:["title","curViewInx","carType","sdb","tinyBatteryFlag","loading"],emits:["cancel","importFileSubmit","treeDataChange"],components:{Button:l,Cascader:z,Message:i,Spin:K},data:()=>({dbcVal:[n.DEFAULT[0].value,n.DEFAULT[0].children[0].value],channelVal:{label:"(不加载)",value:0},channelValTwo:{label:"(不加载)",value:0},channelValThree:{label:"(不加载)",value:0},linChannelVal:{label:"(不加载)",value:0},linChannelValTwo:{label:"(不加载)",value:0},blfDirectory:"",dbcDirectory:"",dbcDirectoryTwo:"",dbcDirectoryThree:"",linDbcDirectory:"",linDbcDirectoryTwo:"",channelNo:{label:1,value:1},channelNoTwo:{label:2,value:2},channelNoThree:{label:3,value:3},linChannelNo:{label:4,value:4},linChannelNoTwo:{label:5,value:5},message:{visible:!1,level:"",content:""},filesList:["","","","","","","","","","","","","","","",""]}),watch:{dbcVal:{handler(e){this.channelVal={label:"(不加载)",value:0},this.channelValTwo={label:"(不加载)",value:0},this.channelValThree={label:"(不加载)",value:0},this.linChannelVal={label:"(不加载)",value:0},this.linChannelValTwo={label:"(不加载)",value:0}},immediate:!0}},mounted(){},computed:{dbcVerOpts:()=>[...n.DEFAULT,{label:"自定义模板",value:"自定义模板"}],channelOptions(){let e=[];if(""!==this.dbcVal[0]&&""!==this.dbcVal[1]){e=n.DEFAULT.find((e=>e.value===this.dbcVal[0]))?.children.find((e=>e.value===this.dbcVal[1]))?.comments||[];let t=e.map(((e,t)=>e?`${t}-${e}`:e)).filter((e=>""!==e)).map(((e,t)=>({label:e,value:Number(e.split("-")[0])})));return t.unshift({label:"(不加载)",value:0}),t}},linChannelOptions(){let e=[];if(""!==this.dbcVal[0]&&""!==this.dbcVal[1]){e=k.find((e=>e.value===this.dbcVal[0]))?.children.find((e=>e.value===this.dbcVal[1]))?.comments||[];let t=e.map((e=>({label:e,value:Number(e.split("-")[0])-1e3})));return t.unshift({label:"(不加载)",value:0}),t}}},methods:{choosePath(){o.choosePath({directory:window.downloadPath,saveFilename:"tspa-Record.blf",dialogType:"SAVE_DIALOG",fileTypes:["BLF文件 (*.blf;*.BLF)"],allow_multiple:!1}).then((({data:e})=>{console.log("res>>>",e),e.directory&&(this.blfDirectory=e.directory)}))},chooseDbcPath(){o.choosePath({dialogType:"OPEN_DIALOG",fileTypes:["DBC文件 (*.dbc;*.DBC)"],allow_multiple:!1}).then((({data:e})=>{e.directory&&(this.dbcDirectory=e.directory)}))},chooseDbcPathTwo(){o.choosePath({dialogType:"OPEN_DIALOG",fileTypes:["DBC文件 (*.dbc;*.DBC)"],allow_multiple:!1}).then((({data:e})=>{e.directory&&(this.dbcDirectoryTwo=e.directory)}))},chooseDbcPathThree(){o.choosePath({dialogType:"OPEN_DIALOG",fileTypes:["DBC文件 (*.dbc;*.DBC)"],allow_multiple:!1}).then((({data:e})=>{e.directory&&(this.dbcDirectoryThree=e.directory)}))},chooseLinDbcPath(){o.choosePath({dialogType:"OPEN_DIALOG",fileTypes:["LDF文件 (*.ldf;*.LDF)"],allow_multiple:!1}).then((({data:e})=>{e.directory&&(this.linDbcDirectory=e.directory)}))},chooseLinDbcPathTwo(){o.choosePath({dialogType:"OPEN_DIALOG",fileTypes:["LDF文件 (*.ldf;*.LDF)"],allow_multiple:!1}).then((({data:e})=>{e.directory&&(this.linDbcDirectoryTwo=e.directory)}))},submit(){console.log("linChannelOptions1111",this.linChannelOptions),"自定义模板"!==this.dbcVal[0]?(console.log("提交中..123"),this.channelVal.value===this.channelValTwo.value&&0!==this.channelVal.value?this.showMessage({timeout:5e3,level:"error",content:"不可重复选择相同通道"}):""!==this.blfDirectory?this.$emit("submitFiveToShow",this.dbcVal,[this.channelVal.label,this.channelValTwo.label,this.channelValThree.label],[this.linChannelVal.label,this.linChannelValTwo.label],this.blfDirectory):this.showMessage({timeout:5e3,level:"error",content:"请选择保存目录路径"})):this.channelNo===this.channelNoTwo===this.channelNoThree?this.showMessage({timeout:5e3,level:"error",content:"不可重复选择相同通道"}):""!==this.blfDirectory?(console.log("自定义传参",this.channelNo),this.$emit("submitFiveToShow",this.dbcVal,[this.channelNo.value+"-"+this.dbcDirectory,this.channelNoTwo.value+"-"+this.dbcDirectoryTwo,this.channelNoThree.value+"-"+this.dbcDirectoryThree],[this.linChannelNo.value+"-"+this.linDbcDirectory,this.linChannelNoTwo.value+"-"+this.linDbcDirectoryTwo],this.blfDirectory)):this.showMessage({timeout:5e3,level:"error",content:"请选择保存目录路径"})},showMessage({level:e,content:t,timeout:a}){clearTimeout(Be),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(Be=setTimeout((()=>{this.message.visible=!1}),a))}}},qe=e=>(w("data-v-42953281"),e=e(),C(),e),ze={class:"o-import-dialog"},Ke={class:"o-dialog-wrap"},We={class:"o-dialog-header-wrap"},Ge={class:"o-dialog-title"},Xe={class:"o-dialog-container-wrap"},Ye={class:"o-import-configuration"},Je={class:"o-dialog-item-wrap"},Qe=qe((()=>p("span",{class:"o-dialog-item"},"车型/DBC：",-1))),Ze={class:"o-dialog-item-select"},et={class:"o-dialog-item-group-wrap"},tt={class:"o-dialog-item-wrap edit-modal-channel"},at=qe((()=>p("span",{class:"o-dialog-item"},"CAN通道1：",-1))),lt={class:"o-dialog-item-wrap edit-modal-channel-two"},it=qe((()=>p("span",{class:"o-dialog-item"},"CAN通道2：",-1))),st={class:"o-dialog-item-wrap edit-modal-channel-three"},nt=qe((()=>p("span",{class:"o-dialog-item"},"CAN通道3：",-1))),ot={class:"o-dialog-item-group-wrap"},dt={class:"o-dialog-item-wrap edit-modal-channel"},rt=qe((()=>p("span",{class:"o-dialog-item"},"LIN通道1：",-1))),ct={class:"o-dialog-item-wrap edit-modal-channel-two"},ht=qe((()=>p("span",{class:"o-dialog-item"},"LIN通道2：",-1))),mt={class:"o-dialog-item-wrap"},pt=qe((()=>p("span",{style:{color:"red"}},null,-1))),ut=qe((()=>p("span",{class:"o-dialog-item"},"CAN通道1：",-1))),gt={class:"o-dialog-tab"},bt={class:"o-dialog-choose-dbc"},ft=["title"],yt={class:"o-dialog-item-wrap"},vt=qe((()=>p("span",{style:{color:"red"}},null,-1))),wt=qe((()=>p("span",{class:"o-dialog-item"},"CAN通道2：",-1))),Ct={class:"o-dialog-tab"},kt={class:"o-dialog-choose-dbc"},St=["title"],Tt={class:"o-dialog-item-wrap"},Dt=qe((()=>p("span",{style:{color:"red"}},null,-1))),Vt=qe((()=>p("span",{class:"o-dialog-item"},"CAN通道3：",-1))),xt={class:"o-dialog-tab"},It={class:"o-dialog-choose-dbc"},Lt=["title"],Ft={class:"o-dialog-item-wrap"},Rt=qe((()=>p("span",{style:{color:"red"}},null,-1))),$t=qe((()=>p("span",{class:"o-dialog-item"},"LIN通道1：",-1))),Mt={class:"o-dialog-tab"},Et={class:"o-dialog-choose-dbc"},_t=["title"],Nt={class:"o-dialog-item-wrap"},At=qe((()=>p("span",{style:{color:"red"}},null,-1))),Ot=qe((()=>p("span",{class:"o-dialog-item"},"LIN通道2：",-1))),Pt={class:"o-dialog-tab"},Ut={class:"o-dialog-choose-dbc"},Ht=["title"],Bt={class:"o-dialog-item-wrap"},jt=qe((()=>p("span",{style:{color:"red"}},"* ",-1))),qt=qe((()=>p("span",{class:"o-dialog-item"},"保存目录：",-1))),zt=["title"],Kt={class:"o-dialog-footer-wrap"},Wt={class:"o-dialog-footer"},Gt={key:0,class:"o-dialog-loading"},Xt=s(je,[["render",function(e,t,a,l,i,s){const n=d("Cascader"),o=d("v-select"),w=d("Button"),C=d("Spin"),k=d("Message"),S=r("esc");return c((h(),m("div",ze,[p("div",Ke,[p("div",We,[p("div",Ge,u(e.$props.title),1),p("i",{class:"o-dialog-title-close",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))})]),p("div",Xe,[p("div",Ye,[p("div",Je,[Qe,p("div",Ze,[g(n,{options:s.dbcVerOpts,modelValue:i.dbcVal,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dbcVal=e)},null,8,["options","modelValue"])])]),"自定义模板"!=i.dbcVal[0]?(h(),m(b,{key:0},[p("div",et,[p("div",tt,[at,g(o,{options:s.channelOptions,clearable:!1,label:"label",value:"value",modelValue:i.channelVal,"onUpdate:modelValue":t[2]||(t[2]=e=>i.channelVal=e),class:"chf-input-ecu"},null,8,["options","modelValue"])]),p("div",lt,[it,g(o,{options:s.channelOptions,clearable:!1,label:"label",value:"value",modelValue:i.channelValTwo,"onUpdate:modelValue":t[3]||(t[3]=e=>i.channelValTwo=e),class:"chf-input-ecu"},null,8,["options","modelValue"])])]),p("div",st,[nt,g(o,{options:s.channelOptions,clearable:!1,label:"label",value:"value",modelValue:i.channelValThree,"onUpdate:modelValue":t[4]||(t[4]=e=>i.channelValThree=e),class:"chf-input-ecu"},null,8,["options","modelValue"])]),p("div",ot,[p("div",dt,[rt,g(o,{options:s.linChannelOptions,clearable:!1,label:"label",value:"value",modelValue:i.linChannelVal,"onUpdate:modelValue":t[5]||(t[5]=e=>i.linChannelVal=e),class:"chf-input-ecu"},null,8,["options","modelValue"])]),p("div",ct,[ht,g(o,{options:s.linChannelOptions,clearable:!1,label:"label",value:"value",modelValue:i.linChannelValTwo,"onUpdate:modelValue":t[6]||(t[6]=e=>i.linChannelValTwo=e),class:"chf-input-ecu"},null,8,["options","modelValue"])])])],64)):(h(),m(b,{key:1},[p("div",mt,[pt,ut,p("div",gt,[p("div",bt,[p("div",{class:"o-table-dbc input-overflow-sty",title:i.dbcDirectory||"--"},u(i.dbcDirectory||"--"),9,ft),p("a",{class:"chose-file chose-dbc-file",onClick:t[7]||(t[7]=e=>s.chooseDbcPath())},"选择DBC文件")])])]),p("div",yt,[vt,wt,p("div",Ct,[p("div",kt,[p("div",{class:"o-table-dbc input-overflow-sty",title:i.dbcDirectoryTwo||"--"},u(i.dbcDirectoryTwo||"--"),9,St),p("a",{class:"chose-file chose-dbc-file",onClick:t[8]||(t[8]=e=>s.chooseDbcPathTwo())},"选择DBC文件")])])]),p("div",Tt,[Dt,Vt,p("div",xt,[p("div",It,[p("div",{class:"o-table-dbc input-overflow-sty",title:i.dbcDirectoryThree||"--"},u(i.dbcDirectoryThree||"--"),9,Lt),p("a",{class:"chose-file chose-dbc-file",onClick:t[9]||(t[9]=e=>s.chooseDbcPathThree())},"选择DBC文件")])])]),p("div",Ft,[Rt,$t,p("div",Mt,[p("div",Et,[p("div",{class:"o-table-dbc input-overflow-sty",title:i.linDbcDirectory||"--"},u(i.linDbcDirectory||"--"),9,_t),p("a",{class:"chose-file chose-dbc-file",onClick:t[10]||(t[10]=e=>s.chooseLinDbcPath())},"选择LDF文件")])])]),p("div",Nt,[At,Ot,p("div",Pt,[p("div",Ut,[p("div",{class:"o-table-dbc input-overflow-sty",title:i.linDbcDirectoryTwo||"--"},u(i.linDbcDirectoryTwo||"--"),9,Ht),p("a",{class:"chose-file chose-dbc-file",onClick:t[11]||(t[11]=e=>s.chooseLinDbcPathTwo())},"选择LDF文件")])])])],64)),p("div",Bt,[jt,qt,g(w,{onClick:s.choosePath,class:"choose-path"},{default:f((()=>[y("选择路径")])),_:1},8,["onClick"]),y("    ")]),p("div",{class:"show-directory",title:i.blfDirectory},u(i.blfDirectory),9,zt)])]),p("div",Kt,[p("div",Wt,[g(w,{style:{width:"52px"},onClick:t[12]||(t[12]=t=>e.$emit("cancel"))},{default:f((()=>[y("取消")])),_:1}),g(w,{type:"primary",style:{width:"52px",margin:"0 20px 0 10px"},onClick:s.submit},{default:f((()=>[y("连接")])),_:1},8,["onClick"])])]),e.$props.loading?(h(),m("div",Gt,[g(C)])):v("",!0)]),g(k,{message:i.message},null,8,["message"])])),[[S,()=>e.$emit("cancel")]])}],["__scopeId","data-v-42953281"]]);let Yt=0;const Jt={props:["title","curViewInx","carType","sdb","tinyBatteryFlag","loading"],emits:["cancel","importFileSubmit","treeDataChange"],components:{Button:l,Cascader:z,Message:i,Spin:K},data:()=>({dbcVal:[n.DEFAULT[0].value,n.DEFAULT[0].children[0].value],channelValList:[{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0}],blfDirectory:"",dbcDirectoryList:["","","","","","","","","","","",""],channelNo:{label:1,value:1},channelNoTwo:{label:2,value:2},channelNoThree:{label:3,value:3},linChannelNo:{label:4,value:4},linChannelNoTwo:{label:5,value:5},message:{visible:!1,level:"",content:""},filesList:["","","","","","","","","","","","","","","",""]}),watch:{dbcVal:{handler(e){console.log("dbcVal1753",e),this.channelValList=[{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0},{label:"(不加载)",value:0}]},immediate:!0}},mounted(){},computed:{dbcVerOpts:()=>[...n.DEFAULT,{label:"自定义模板",value:"自定义模板"}],channelOptions(){let e=[];if(""!==this.dbcVal[0]&&""!==this.dbcVal[1]){e=n.DEFAULT.find((e=>e.value===this.dbcVal[0]))?.children.find((e=>e.value===this.dbcVal[1]))?.comments||[];let t=e.map(((e,t)=>e?`${t}-${e}`:e)).filter((e=>""!==e)).map(((e,t)=>({label:e,value:Number(e.split("-")[0])})));return t.unshift({label:"(不加载)",value:0}),t}},linChannelOptions(){let e=[];if(""!==this.dbcVal[0]&&""!==this.dbcVal[1]){e=k.find((e=>e.value===this.dbcVal[0]))?.children.find((e=>e.value===this.dbcVal[1]))?.comments||[];let t=e.map((e=>({label:e,value:Number(e.split("-")[0])-1e3})));return t.unshift({label:"(不加载)",value:0}),t}}},methods:{choosePath(){o.choosePath({directory:window.downloadPath,saveFilename:"tspa-Record.blf",dialogType:"SAVE_DIALOG",fileTypes:["BLF文件 (*.blf;*.BLF)"],allow_multiple:!1}).then((({data:e})=>{console.log("res>>>",e),e.directory&&(this.blfDirectory=e.directory)}))},chooseDbcPath(e){console.log("inx",e),o.choosePath({dialogType:"OPEN_DIALOG",fileTypes:["DBC文件 (*.dbc;*.DBC)"],allow_multiple:!1}).then((({data:t})=>{t.directory&&(this.dbcDirectoryList[e]=t.directory)}))},submit(){console.log("linChannelOptions1111",this.linChannelOptions),"自定义模板"!==this.dbcVal[0]?(console.log("提交中..123"),""!==this.blfDirectory?this.$emit("submitTwelveToShow",this.dbcVal,this.channelValList.map((e=>e.label)),["(不加载)","(不加载)"],this.blfDirectory):this.showMessage({timeout:5e3,level:"error",content:"请选择保存目录路径"})):""!==this.blfDirectory?(console.log("自定义传参",this.channelValList,this.channelValList.map(((e,t)=>t+1+"-"+this.dbcDirectoryList[t]))),this.$emit("submitTwelveToShow",this.dbcVal,this.channelValList.map(((e,t)=>t+1+"-"+this.dbcDirectoryList[t])),[],this.blfDirectory)):this.showMessage({timeout:5e3,level:"error",content:"请选择保存目录路径"})},showMessage({level:e,content:t,timeout:a}){clearTimeout(Yt),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(Yt=setTimeout((()=>{this.message.visible=!1}),a))}}},Qt=e=>(w("data-v-5e722cd4"),e=e(),C(),e),Zt={class:"o-import-dialog"},ea={class:"o-dialog-wrap"},ta={class:"o-dialog-header-wrap"},aa={class:"o-dialog-title"},la={class:"o-dialog-container-wrap"},ia={class:"o-import-configuration"},sa={class:"o-dialog-item-wrap"},na=Qt((()=>p("span",{class:"o-dialog-item"},"车型/DBC：",-1))),oa={class:"o-dialog-item-select"},da={key:0,class:"o-dialog-item-group-wrap"},ra={class:"o-dialog-item"},ca=Qt((()=>p("span",{style:{color:"red"}},null,-1))),ha={class:"o-dialog-item"},ma={class:"o-dialog-tab"},pa={class:"o-dialog-choose-dbc"},ua=["title"],ga=["onClick"],ba={class:"o-dialog-item-wrap"},fa=Qt((()=>p("span",{style:{color:"red"}},"* ",-1))),ya=Qt((()=>p("span",{class:"o-dialog-item"},"保存目录：",-1))),va=["title"],wa={class:"o-dialog-footer-wrap"},Ca={class:"o-dialog-footer"},ka={key:0,class:"o-dialog-loading"},Sa=s(Jt,[["render",function(e,t,a,l,i,s){const n=d("Cascader"),o=d("v-select"),w=d("Button"),C=d("Spin"),k=d("Message"),T=r("esc");return c((h(),m("div",Zt,[p("div",ea,[p("div",ta,[p("div",aa,u(e.$props.title),1),p("i",{class:"o-dialog-title-close",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))})]),p("div",la,[p("div",ia,[p("div",sa,[na,p("div",oa,[g(n,{options:s.dbcVerOpts,modelValue:i.dbcVal,"onUpdate:modelValue":t[1]||(t[1]=e=>i.dbcVal=e)},null,8,["options","modelValue"])])]),"自定义模板"!=i.dbcVal[0]?(h(),m("div",da,[(h(!0),m(b,null,S(i.channelValList,((e,t)=>(h(),m("div",{class:"o-dialog-item-wrap edit-modal-channel",key:t},[p("span",ra,"CAN通道"+u(t+1)+"：",1),g(o,{options:s.channelOptions,clearable:!1,label:"label",value:"value",modelValue:i.channelValList[t],"onUpdate:modelValue":e=>i.channelValList[t]=e,class:"chf-input-ecu"},null,8,["options","modelValue","onUpdate:modelValue"])])))),128))])):(h(!0),m(b,{key:1},S(i.dbcDirectoryList,((e,t)=>(h(),m("div",{class:"o-dialog-item-wrap",key:t},[ca,p("span",ha,"CAN通道"+u(t+1)+"：",1),p("div",ma,[p("div",pa,[p("div",{class:"o-table-dbc input-overflow-sty",title:i.dbcDirectoryList[t]||"--"},u(i.dbcDirectoryList[t]||"--"),9,ua),p("a",{class:"chose-file chose-dbc-file",onClick:e=>s.chooseDbcPath(t)},"选择DBC文件",8,ga)])])])))),128)),p("div",ba,[fa,ya,g(w,{onClick:s.choosePath,class:"choose-path"},{default:f((()=>[y("选择路径")])),_:1},8,["onClick"]),y("    ")]),p("div",{class:"show-directory",title:i.blfDirectory},u(i.blfDirectory),9,va)])]),p("div",wa,[p("div",Ca,[g(w,{style:{width:"52px"},onClick:t[2]||(t[2]=t=>e.$emit("cancel"))},{default:f((()=>[y("取消")])),_:1}),g(w,{type:"primary",style:{width:"52px",margin:"0 20px 0 10px"},onClick:s.submit},{default:f((()=>[y("连接")])),_:1},8,["onClick"])])]),e.$props.loading?(h(),m("div",ka,[g(C)])):v("",!0)]),g(k,{message:i.message},null,8,["message"])])),[[T,()=>e.$emit("cancel")]])}],["__scopeId","data-v-5e722cd4"]]),Ta={props:{modelValue:{type:Boolean,required:!0},id:{type:String,required:!0}},computed:{checkValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{handleChange(e){this.checkValue=e.target.checked}}},Da={class:"switch-wrap"},Va={class:"switch"},xa=["checked"],Ia=(e=>(w("data-v-c48658f3"),e=e(),C(),e))((()=>p("span",null,null,-1))),La=s(Ta,[["render",function(e,t,a,l,i,s){return h(),m("div",Da,[p("label",Va,[p("input",{type:"checkbox",checked:s.checkValue,onChange:t[0]||(t[0]=(...e)=>s.handleChange&&s.handleChange(...e))},null,40,xa),Ia])])}],["__scopeId","data-v-c48658f3"]]);let Fa=[],Ra=0;const $a={props:["signals","carType","sdb","dbcVal","fileType","defaultOptions","filledOptions","loading","dbcChn","ldfChn"],emits:["signalsChange","cancel"],components:{Button:l,RecycleScroller:T,Spin:K,Message:i},data(){const e=this.$ls.get("blfread_sdbData")||[];if(console.log("sdbCustom123",this.$props.dbcVal,this.sdb,this.dbcChn,this.ldfChn),"custom"===this.carType){let t=e.find((e=>e.sdb===this.sdb))?.comments;t&&(Fa=["",...t])}else if(console.log("6777",this.ldfChn,this.dbcChn),this.ldfChn.every((e=>0==e))&&this.dbcChn.some((e=>e>0))&&(Fa=D.find((e=>e.value===this.$props.carType))?.children.find((e=>e.value===this.$props.sdb))?.comments||[]),this.ldfChn.some((e=>e>0))&&this.dbcChn.every((e=>e<0))&&(Fa=V.find((e=>e.value===this.$props.carType))?.children.find((e=>e.value===this.$props.sdb))?.comments||[]),this.ldfChn.some((e=>e>0))&&this.dbcChn.some((e=>e>0))){console.log("5566");let e=D.find((e=>e.value===this.$props.carType))?.children.find((e=>e.value===this.$props.sdb))?.comments||[],t=V.find((e=>e.value===this.$props.carType))?.children.find((e=>e.value===this.$props.sdb))?.comments||[];Fa=e.concat(t)}return console.log("C2C123",Fa),Fa=Fa.map(((e,t)=>`${"⓪①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳㉑㉒㉓㉔㉕㉖㉗㉘㉙㉚㉛㉜㉝㉞㉟㊱㊲"[t]}${e}`)),{inputStr:"",treeData:[],checkedList:[],isFilled:!1,message:{visible:!1,level:"",content:""},showSignalsList:[]}},computed:{list(){let e=[];for(let t=0;t<this.treeData.length;t++){let a=this.treeData[t];-1!=a.id&&e.push({_id:a.id,id:a.id,node_type:a.node_type,text:a.text});for(let t=0;t<a.children.length;t++){let l=a.children[t];"-"!=l.id[0]&&e.push({_id:a.id+"-"+l.id,id:l.id,node_type:l.node_type,text:l.text});for(let t=0;t<l.children.length;t++){let i=l.children[t];e.push({...i,_id:a.id+"-"+l.id+"-"+i.id})}}}return console.log(e,11111111),e}},watch:{isFilled(e,t){this.dataInit()}},async created(){this.dataInit()},mounted(){console.log(this.$props.signals),this.$refs.chsInputRef.focus(),this.checkedList=this.$props.signals,this.updateChecked(),setTimeout((()=>{document.body.addEventListener("mousedown",this.clickHandler)}),300)},beforeUnmount(){},unmounted(){document.body.removeEventListener("mousedown",this.clickHandler)},methods:{onFilledChange(e){this.inputStr="",this.isFilled=!this.isFilled},title4node:e=>Q(e),clickHandler(e){0==this.$refs.root?.contains(e.target)&&this.$emit("cancel")},dataInit(){let e=[];console.log(this.$props.filledOptions.data,33333333333);let t=this.$props.filledOptions.data;for(let a in t){let l={id:+a,text:Fa[a],node_type:"channel",children:[]};for(let e in t[a]){let i={id:a+"_"+e,text:"-1"==e?"":e,node_type:"msg",channel:l.id,children:t[a][e].map((t=>({id:t[0],msg:"-1"==e?"-1":+e.match(/\(([^)]+)\)/)?.[1].toUpperCase().replace(/X/g,"x")||e,channel:l.id,text:t[0],node_type:"signal",comment:t[1],remark:t[2],maxRaw:t[5],minRaw:t[6],enums:t[9],unit:t[10]})))};l.children.push(i)}e.push(l)}this.treeData=Object.freeze(e),console.log(this.treeData)},selectNode(e){console.log(this.checkedList);let t=this.checkedList.map((e=>({...e})));t.some((t=>t._id===e._id))?(console.log("s1"),this.checkedList=t.filter((t=>t._id!==e._id))):(console.log("s2"),t.length<30?this.checkedList=[...t.filter((t=>t._id!==e._id)),e]:this.showMessage({level:"error",content:`选择不能超过${t.length}项`,timeout:2e3}))},showMessage({level:e,content:t,timeout:a}){clearTimeout(Ra),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(Ra=setTimeout((()=>{this.message.visible=!1}),a))},submit(){this.$emit("signalsChange",this.checkedList)},updateChecked(){},highlightWord(e){if(!e)return e;const t=this.inputStr;if(!t)return e;const a=t.split(/\s+/g);var l,i,s=a.length;for(l=0;l<s;l++)try{(i=new RegExp(a[l],"gi")).test(e)&&(e=e.replace(i,"<strong>$&</strong>"))}catch(n){i=a[l],e=e.replace(i,"<strong>$&</strong>")}return e},onChange:x((function(){let e,t=!1,a=this.inputStr.toLowerCase();a.startsWith("0x")&&(t=!0);try{e=new RegExp(a,"i")}catch(s){e={test:e=>~e.toLowerCase().indexOf(e.toLowerCase())}}let l=[],i=this.$props.filledOptions.data;for(let n in i){let s={id:+n,text:Fa[n],node_type:"channel",children:[]};for(let l in i[n]){let o=t&&l.includes(a),d={id:n+"_"+l,text:"-1"==l?"":l,node_type:"msg",channel:s.id,children:i[n][l].filter((t=>o||e.test(t[0])||e.test(t[1]))).map((e=>({id:e[0],msg:"-1"==l?"-1":+l.match(/\(([^)]+)\)/)?.[1].toUpperCase().replace(/X/g,"x"),channel:s.id,text:e[0],node_type:"signal",comment:e[1],remark:e[2],maxRaw:e[5],minRaw:e[6],enums:e[9],unit:e[10]})))};d.children.length>0&&s.children.push(d)}(s.children.length>0||e.test(s.text)||e.test(s.comment))&&l.push(s)}this.treeData=l,console.log(this.treeData),this.updateChecked()}),500,{leading:!1})}},Ma={class:"chs-er",ref:"root"},Ea={class:"chs-list-er"},_a={key:0,class:"chs-node"},Na=["innerHTML"],Aa=["onMousedown","for"],Oa=["id","checked"],Pa=["innerHTML"],Ua=["innerHTML"],Ha={key:0,class:"spin-loding-style"},Ba=(e=>(w("data-v-a3e0c615"),e=e(),C(),e))((()=>p("div",null,null,-1))),ja=s($a,[["render",function(e,t,a,l,i,s){const n=d("RecycleScroller"),o=d("Spin"),b=d("Message"),w=r("tooltip"),C=r("esc");return c((h(),m("div",Ma,[c(p("input",{class:"chs-input-er",ref:"chsInputRef",placeholder:"搜索信号名称/信号描述","onUpdate:modelValue":t[0]||(t[0]=e=>i.inputStr=e),onInput:t[1]||(t[1]=(...e)=>s.onChange&&s.onChange(...e)),draggable:!1},null,544),[[I,i.inputStr]]),p("div",Ea,[g(n,{class:"chs-list",items:s.list,"item-size":28,"key-field":"_id"},{default:f((({item:e})=>["channel"==e.node_type?(h(),m("div",_a,u(e.text),1)):"msg"==e.node_type?(h(),m("div",{key:1,class:"chs-node",style:{"text-indent":"1em"},innerHTML:s.highlightWord(e.text)},null,8,Na)):"signal"==e.node_type?c((h(),m("div",{key:2,onMousedown:L((t=>s.selectNode(e)),["prevent","stop"]),for:e._id,style:{"text-indent":"2em"},class:"chs-node chs-node-item"},[p("input",{id:e._id,type:"checkbox",class:"chs-node-checkbox",checked:i.checkedList.some((t=>t._id===e._id))},null,8,Oa),p("span",{class:"chs-node-signal",innerHTML:s.highlightWord(e.text)},null,8,Pa),y(" "),p("span",{class:"chs-node-comment",innerHTML:s.highlightWord(e.comment)},null,8,Ua)],40,Aa)),[[w,{content:s.title4node(e),html:!0},void 0,{right:!0}]]):v("",!0)])),_:1},8,["items"]),p("div",{class:F(30==i.checkedList.length?"chs-ft-label-len":"chs-ft-label")},"（"+u(i.checkedList.length)+"/30）",3),p("div",{class:"chs-btn confirm","data-cy":"chooseSignalSubmit",onClick:t[2]||(t[2]=(...e)=>s.submit&&s.submit(...e))},"确定"),p("div",{class:"chs-btn cancel",onClick:t[3]||(t[3]=t=>e.$emit("cancel"))},"取消"),e.$props.loading?(h(),m("div",Ha,[Ba,g(o)])):v("",!0),g(b,{message:i.message},null,8,["message"])])])),[[C,()=>e.$emit("cancel")]])}],["__scopeId","data-v-a3e0c615"]]),qa={props:["chartTableData","showSignalsList"],computed:{mergedArray(){return this.$props.chartTableData.map((e=>{const t=this.$props.showSignalsList.find((t=>t.name===e.name));return t?{...e,...t}:e}))}},watch:{mergedArray:{deep:!0,handler(e,t){this.mergedArray.forEach(((e,t)=>{let a=Math.trunc((e.raw_values[e.raw_values.length-1]-Math.abs(e.minRaw))/(e.maxRaw-Math.abs(e.minRaw))*100)>100?100:Math.trunc((e.raw_values[e.raw_values.length-1]-Math.abs(e.minRaw))/(e.maxRaw-Math.abs(e.minRaw))*100);this.mergedArray[t].proportion=a,console.log(this.mergedArray[t].proportion,e.raw_values[e.raw_values.length-1]-Math.abs(e.minRaw),Math.abs(e.minRaw),(e.raw_values[e.raw_values.length-1]-Math.abs(e.minRaw))/(e.maxRaw-Math.abs(e.minRaw))*100,"11111111")}))}}},data:()=>({})},za=e=>(w("data-v-bef7743b"),e=e(),C(),e),Ka={style:{"overflow-y":"auto",height:"calc(100vh - 215px)",border:"1px solid #f0f0f0",width:"calc(100% - 20px)",position:"relative"}},Wa={class:"o-table"},Ga=za((()=>p("thead",{class:"o-table-thead",style:{"background-color":"#FAFAFA"}},[p("tr",null,[p("th",{class:"o-table-cell"},[p("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[p("div",null,"Name"),p("div",{class:"time-line"})])]),p("th",{class:"o-table-cell"},[p("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[y(" Value "),p("div",{class:"time-line"})])]),p("th",{class:"o-table-cell"},[p("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[y(" Unit "),p("div",{class:"time-line"})])]),p("th",{class:"o-table-cell"},[p("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[y(" Raw Value "),p("div",{class:"time-line"})])]),p("th",{class:"o-table-cell"},[p("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[y(" Bar "),p("div",{class:"time-line"})])]),p("th",{class:"o-table-cell"},"Commont")])],-1))),Xa={class:"o-table-tbody"},Ya={key:0,class:"o-pul-button-wrap-icon"},Ja=[za((()=>p("img",{class:"text-muted-ing-data",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACICAMAAABX7hBEAAAAM1BMVEUAAAD////Nzc0MDAyXl5cAAAAAAAC9vb3t7e0BAQF1dXUAAAApKSkAAABBQUFXV1cAAACKKc10AAAAEXRSTlMATExMTAk1TExBTCFLF0tMKkK5GFYAAAL4SURBVHja7JntauswDIZty7Is+fP+r/Y0dUOz0BZzMKkGe35sMFh5Kr2Sndb88cd/gR2NahBAuWJolZNmxd6iz1z0KiJEGwVCMVoBsvauqLWIQaxVrZhqtHeoscqBRiY7iJRVDjSL3dkGWt+09GqtasUCWSg+FSUrm5ZQJUNuPu6STtdAF/DOkVSAKm5XbIpOaG7uDvmWAZqPyhQLkCM3oFFI726SkZRcIoKQ5NrEE9HTUShuA63ghC5ADUC27kJum+febPFRwSUCueXsx32BvNThKeLvhczef3ugE0AlqmIHMUbnpQ3P2mD7Bd9URIZKzkmN9shNc5TzwfcuER2g3aiwC548yUvLQ9FcDqIxKQyA7FuirwAczLVgCpyOu+aNHEkGDpfvQ+zMHfF8aT33V2re5C7PHyY+bzfM7ly5BkPuepC5mDPsj3J1tPU7lJc7I4gKuRuJy8s/55WZW+9nkBXI3Sic3pknDZ9+4M1PNV3To8YLEEopGjr5jgDAzOoee3ewj8egpNQQGcIjiWwUgtz3EUaNJcQQnl5B4bIJwSCjGfRutFEYN0G9FeRkNkG1GUTAg1didbu6h/vPIVYUHsgjdBg4lRQU+u3NxcSs8oN81Be6Xyeobq/sfGkzY5ilvDjbSljF+74kaDJDYxxOxxBy80uon5IdMrkZHi+CgMcnYLuEnD7Gvk0ZUu6nECKLXQJ9Xg2Fxc3gYRwiz3+ENQWMNU18PzSBAP6cr1UFBDSf6UBzhj9akfIVBRyEOhfDGtAsT6Df3/aiQdlJdVEBnyO8alAG7C8p4E6ajSHg4gRCMlP0PNfk9tjXqwu4OoYpX5bAHZyP4dICmhMr9nUxfXkBlw4K/2vfXlIABKEAikbaR7P9b7d5kxREDM5dwVGcPNS71wbm1PhmI1ZVQjn6FK7GoXx0rRNOipULj2eX4r60AteqQqcjCAgICAgICAgICAgICAgICAgICAgICAgICAgI+BdgHn3buX1/XJmr9AZus7VIkiRJD2y6ViB4C1+1AAAAAElFTkSuQmCC",alt:""},null,-1))),za((()=>p("td",{class:"text-center text-muted-data"},"请先选择信号并确认",-1)))],Qa={class:"o-table-cell"},Za={class:"o-table-cell"},el={class:"o-table-cell"},tl={class:"o-table-cell"},al={class:"o-table-cell",style:{width:"230px"}},ll={class:"o-table-cell"},il={style:{width:"360px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},sl=s(qa,[["render",function(e,t,a,l,i,s){const n=r("tooltip");return h(),m("div",Ka,[p("table",Wa,[Ga,p("tbody",Xa,[0==s.mergedArray.length?(h(),m("div",Ya,Ja)):v("",!0),(h(!0),m(b,null,S(s.mergedArray,((e,t)=>(h(),m("tr",{key:t},[p("td",Qa,u(e.name),1),p("td",Za,u(0===Object.keys(e.enums).length?e.values[e.values.length-1]:e.enums[e.values[e.values.length-1]]),1),p("td",el,u(e.unit),1),p("td",tl,u(e.raw_values[e.raw_values.length-1]),1),p("td",al,[p("div",{style:R({width:e.proportion+"%"}),class:"proportion"},null,4)]),c((h(),m("td",ll,[p("div",il,u(e.comment),1)])),[[n,e.comment]])])))),128))])])])}],["__scopeId","data-v-bef7743b"]]);let nl=0;const ol={props:["store","closeFlag","getDbcData","dbcVal","sdb","dbcChn","ldfChn","chartTableData"],emits:["connect","showMessage","getCarCode"],components:{Button:l,TableChart:sl,Header:a,ManageViewsGroup:Y,Draggable:J,ChooseSignal:ja,AddOrSelector:W,TimePlotMulti:G,ProgressBar:X,Message:i,ButtonGroup:se,Switch:La},data(){let e=this.$ls.get("blfread_treeData")?.map((e=>({...e,carType:e.carType||"MS11",sdb:e.sdb||"E4U1",children:e.children.map((t=>({...t,warning:!1,pid:e.id,color:t.color||"blue"})))})));return e&&0!==e?.length||(e=[]),e=e.filter((e=>!("MS11"===e.carType&&"E4U1"===e.sdb&&"默认视图"===e.text&&0===e.children.length))),e.some((e=>"MS11"===e.carType&&"E4U1"===e.sdb)),this.$ls.set("blfread_treeData",e),{system:$,modeOptions:[{label:"分散",value:"single"},{label:"对齐",value:"same"},{label:"聚合",value:"shifted"}],chartMode:"single",timeFilterOptions:[{label:"绝对时间",value:"absolute"},{label:"相对时间",value:"relative"}],timeFilterMode:{label:"绝对时间",value:"absolute"},startTime:0,showDotsFrame:!1,fileType:"blf",blfcpp:"cpp",isBigFile:!1,chooseSignalAble:!1,message:{visible:!1,level:"",content:""},modal:{title:"导入文件",visible:!1},manageModal:{title:"管理视图",manageVisible:!1},treeData:e.map((e=>(e.children.forEach((e=>{e.warning=!1})),e))),curView:{label:e[0]?.text,value:0,tag:e[0]?.sdb},C2C:[],colorList:["blue","cerulean","cyan","green","lime","purple","pink","red","orange","yellow"],directory:"",carType:"MS11",directorySize:{label:"",value:0,durationMaybe:0,durationMaybeLabel:"0秒"},backBlock:!1,chartDataLoaded:!0,waitChart:{},fileChoosed:!1,traceList:new Map,timeData:Object.freeze([]),tableList:[],channelVersion:[{label:"全部",value:""}],channelVal:"全部",ECUVersion:[{label:"全部",value:""}],ECUVal:"全部",canIdsVersion:[{label:"全部",value:""}],canIdsVal:"全部",filterTableList:[],columnDefs:[{headerName:"Time",field:"timeTabData"},{headerName:"Chn",field:"chnTabData",width:80},{headerName:"ID",field:"idTabData",width:80},{headerName:"Name",field:"nameTabData",width:300},{headerName:"Event Type",field:"eventTabData"},{headerName:"Dir",field:"dirTabData",width:80},{headerName:"DLC",field:"dlcTabData",width:80},{headerName:"文本ECU",field:"dataTabData"}],debug:window._debug,signalLoading:!1,defaultOptions:{},filledOptions:{},showSignalsList:[],objSing:{},mlistChart:[{key:"timeChart",name:" 切换为折线图",icon:"box"},{key:"tableChart",name:"切换为表格",icon:"setting"}],curChart:"timeChart",tablechartShow:!0,timechartShow:!1,timeLimit:10,minTime:0,turnTimeLimit:!1}},computed:{sdbVal(){return[this.carType,this.sdb]},quitConfirm(){return!!this.directory.trim()},treeDataDbc(){return this.treeData.map(((e,t)=>({...e,label:e.text,value:t,tag:e.sdb}))).filter((e=>e.carType===this.carType&&e.sdb===this.sdb))},carTypeLabel(){return this.carType&&"custom"!==this.carType?this.carType+" / ":""},view(){return this.treeData[this.curView?.value]},directoryLabel(){let e=this.directory.split("/").pop();return e.length>25?e.slice(0,10)+"..."+e.slice(-15):e},fileType_CarType(){return[this.fileType,this.carType]}},mounted(){this.debug=!!window._debug,this.fillEmptyTreeData(),this.curView=this.treeDataDbc[0],console.log("this.curView111",this.treeData),M.report("trackPage",{page:"查看报文",tip:"1174.10.0.1.27765"}),window._timeData=this.timeData},beforeUnmount(){this.timeData=[]},unmounted(){E.blf.freeSpace(),E.ascReader.freeSpace(),E.logReader.freeSpace(),window._timeData.forEach((e=>{e.t.length=0}))},watch:{fileType_CarType(){"mdf"===this.fileType?this.blfcpp="cpp":this.debug||("custom"===this.carType?this.blfcpp="python":this.blfcpp="cpp")},blfcpp:{handler(e){window._blfcpp=e},immediate:!0},sdbVal:{handler(e){let t=[];const a=this.$ls.get("blfread_sdbData")||[];if("custom"===this.carType){let e=a.find((e=>e.sdb===this.sdb))?.comments;e&&(t=["",...e])}else t=SDB.DEFAULT.find((e=>e.value===this.carType))?.children.find((e=>e.value===this.sdb))?.comments||[];this.C2C=t.map(((e,t)=>`${"⓪①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳㉑㉒㉓㉔㉕㉖㉗㉘㉙㉚㉛㉜㉝㉞㉟㊱㊲"[t]}${e}`))},immediate:!0},chartDataLoaded(e,t){e?(this.backBlock=!1,document.querySelector(".o-body").style.cursor=""):(this.backBlock=!0,document.querySelector(".o-body").style.cursor="wait")},treeData:{handler(e,t){JSON.stringify(this.$ls.get("blfread_treeData"))!==JSON.stringify(e)&&this.$ls.set("blfread_treeData",e)},deep:!0},chooseSignalAble:{handler(){this.filledOptions=this.$props.getDbcData}},directory:{async handler(e){const t=await o.getFileSize(e),a=Math.round(.166*(1678e-19*t*t+1.768e-7*t+.5581));this.directorySize={label:ee(t),value:t,durationMaybe:1e3*a,durationMaybeLabel:le(a)}}},curView:{handler(e){this.updateSignal(this.view.children)},deep:!0},dbcVal:{handler(e){this.carType="自定义模板"===e?"custom":e.split("/")[0]},deep:!0}},beforeUpdate(){},methods:{choose(e){this.curChart=e,"timeChart"==e?(this.timechartShow=!1,this.tablechartShow=!0):"tableChart"==e&&(this.timechartShow=!0,this.tablechartShow=!1)},upTimeData(e){if(!(e?.length>0))return;let t=Date.now()/1e3-(this.turnTimeLimit?this.timeLimit:1200);console.log("minTime",t);let a=this.timeData.slice();e.forEach((e=>{let l=a.find((t=>t.channel===e.busId&&t.msg===e.canId&&t.name===e.name));for(;l?.t?.[0]<t;)l.t.shift(),l.v.shift();l&&(l.t.push(...e.times.map((e=>+e.toFixed(3)))),l.v.push(...e.values))})),this.timeData=Object.freeze(a),this.loadChart(this.view)},onUpdateDefaultOptions(e){this.defaultOptions=Object.freeze(e)},title4node:e=>Q(e),showMessage({level:e,content:t,timeout:a}){clearTimeout(nl),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(nl=setTimeout((()=>{this.message.visible=!1}),a))},hideMessage(){this.message.visible=!1},onTreeDataChange(){this.treeData=this.$ls.get("blfread_treeData")},fillEmptyTreeData(){SDB.DEFAULT.forEach((e=>{e.children.forEach((t=>{this.treeData.some((a=>a.carType===e.value&&a.sdb===t.value))||this.treeData.push({id:+Math.random().toString().replace(".",""),text:"默认视图",type:"view",editable:!1,carType:e.value,sdb:t.value,deleteConfirm:!1,children:[]})}))}))},deleteView(e){let t=this.treeData.filter((t=>t.id!==e.id));this.curView.value=t.findIndex((e=>e.id===this.view.id)),this.treeData=t},updateView(e){this.treeData=this.treeData.map((t=>t.id===e.id?e:t))},onImportView(e){this.addView(e)},resetTimeData(){this.directory="",this.backBlock=!1,this.chartDataLoaded=!0,this.waitChart={},this.fileChoosed=!1,this.traceList=new Map},choosePath(){"blf"===this.fileType?(this.chartDataLoaded=!1,this.clearTimeData(),E.blf.getBLFdata({blfFile:this.directory,mode:this.isBigFile?"bigFile":void 0}).then((async e=>{this.startTime=e.data.startTime,this.fileChoosed=!0,this.treeData.forEach((e=>{this.waitChart[e.id]=!0}));let t=this.treeData.slice();t.splice(this.curView.value,1),t.unshift(this.treeData[this.curView.value]),t=t.filter((e=>e.carType===this.carType&&e.sdb===this.sdb)),E.blf.haveDataSignal({}).then((e=>{this.filledOptions=Object.freeze(e.data),this.signalLoading=!1}));for(let a=0;a<t.length;a++)await this.play(t[a]),0===a&&(this.chartDataLoaded=!0)})).catch((()=>{})).finally((()=>{this.chartDataLoaded=!0,this.signalLoading=!1}))):"mdf"===this.fileType?(async()=>{this.signalLoading=!1,this.chartDataLoaded=!1,this.clearTimeData(),this.fileChoosed=!0,this.treeData.forEach((e=>{this.waitChart[e.id]=!0}));let e=this.treeData.slice();e.splice(this.curView.value,1),e.unshift(this.treeData[this.curView.value]),e=e.filter((e=>e.carType===this.carType&&e.sdb===this.sdb)),await this.play(this.treeData[this.curView.value]);for(let t=0;t<e.length;t++)await this.play(e[t]),0===t&&(this.chartDataLoaded=!0)})():"asc"===this.fileType?(this.chartDataLoaded=!1,this.clearTimeData(),E.ascReader.getAscdata({ascFile:this.directory}).then((async e=>{this.startTime=e.data?.data?.startTime||0,this.fileChoosed=!0,this.treeData.forEach((e=>{this.waitChart[e.id]=!0}));let t=this.treeData.slice();t.splice(this.curView.value,1),t.unshift(this.treeData[this.curView.value]),t=t.filter((e=>e.carType===this.carType&&e.sdb===this.sdb)),E.ascReader.haveDataSignal({ascFile:this.directory}).then((e=>{this.filledOptions=Object.freeze(e.data),this.signalLoading=!1}));for(let a=0;a<t.length;a++)await this.play(t[a]),0===a&&(this.chartDataLoaded=!0)})).catch((()=>{})).finally((()=>{this.chartDataLoaded=!0,this.signalLoading=!1}))):"log"===this.fileType&&(this.chartDataLoaded=!1,this.clearTimeData(),E.logReader.getLogData({logFile:this.directory}).then((async e=>{this.startTime=e.data?.data?.startTime||0,this.fileChoosed=!0,this.treeData.forEach((e=>{this.waitChart[e.id]=!0}));let t=this.treeData.slice();t.splice(this.curView.value,1),t.unshift(this.treeData[this.curView.value]),t=t.filter((e=>e.carType===this.carType&&e.sdb===this.sdb)),E.logReader.haveDataSignal({ascFile:this.directory}).then((e=>{this.filledOptions=Object.freeze(e.data),this.signalLoading=!1}));for(let a=0;a<t.length;a++)await this.play(t[a]),0===a&&(this.chartDataLoaded=!0)})).catch((()=>{})).finally((()=>{this.chartDataLoaded=!0,this.signalLoading=!1})))},clearTimeData(){this.timeData=Object.freeze([]),this.treeData.forEach((e=>{e.children.forEach((e=>{e.warning=void 0}))}))},hideSignal(e,t){e.hidden=!e.hidden,this.play(t,!0)},deleteSignal(e){this.treeData=this.treeData.map((t=>{if(t.id==e.pid){let a={...t,children:t.children.filter((t=>!(t.id==e.id&&t.msg==e.msg&&t.channel==e.channel)))};return this.$nextTick((()=>this.play(a,!0))),a}return{...t}}))},async play(e,t){console.log("this.$props.getDbcData1041",this.$props.getDbcData),this.loadChart(e)},loadChart(e){console.log("node1727",e,this.timeData);const t={blue:"#2266ff",cerulean:"#00c7f2",cyan:"#00e0b8",green:"#3fd926",lime:"#add900",purple:"#8125ff",pink:"#ff4475",red:"#ff3838",orange:"#ffad4d",yellow:"#f1d900"},a=e.children.filter((e=>!e.hidden)).map(((e,a)=>{const l=this.timeData.find((t=>e.channel===t.channel&&e.msg===t.msg&&e.text===t.name));return l?{...l,color:t[e.color]}:{name:e.text,enums:e.enums,channel:e.channel,msg:e.msg,color:t[this.colorList[a%9]],t:[],v:[]}}));this.timeData=Object.freeze(a)},tranLinCanId(e){const t=e.match(/\(([^)]+)\)/);if(t){const e=t[1],a=parseInt(e,16);return console.log(a),a}},async updateSignal(e,t){console.log("signals8899",e,this.curView?.value,this.treeData),0==e.length&&(this.timeData=Object.freeze([])),this.showSignalsList=[],e.forEach((e=>{let t={};t.busId=e.channel,t.canId=e.msg,t.name=e.text,t.color=e.color,t.maxRaw=+e.maxRaw,t.minRaw=+e.minRaw,t.comment=e.comment,t.unit=e.unit,t.enums=e.enums,this.showSignalsList.push(t)}));let a=this.showSignalsList.filter(((e,t)=>this.showSignalsList.findIndex((t=>t.name===e.name))===t)),l=await E.blfLogging.selectShowSignals(a);1!==l.data.code&&this.showMessage({timeout:2e3,level:"error",content:l.data.msg});const i=this.view;this.treeData=this.treeData.map((a=>{if(a.id==i.id){let l=e.map(((e,l)=>{let i=a.children.find((t=>e.id==t.id&&e.msg==t.msg&&e.channel==t.channel));return i?{...i,pid:a.id,color:"1"==t||0==e?.colorEditable?e.color:this.colorList[l%9]}:{_id:e._id,pid:a.id,id:e.id,text:e.text,comment:e.comment,remark:e.remark,msg:e.msg,channel:e.channel,type:"signal",color:"1"==t||0==e?.colorEditable?e.color:this.colorList[l%9],colorEditable:!1,maxRaw:+e.maxRaw,minRaw:+e.minRaw,comment:e.comment,unit:e.unit,enums:e.enums}}));return{...a,children:l}}return a})),this.upTimeData(),this.chooseSignalAble=!1},goBackHome(){this.$router.push({path:"/"})},importFile(){this.modal.visible=!0},addView(e){let t=e.label||"新建视图"+(this.treeData.length+1);if(this.treeData=[...this.treeData,{id:e.id||Date.now(),text:t,type:"view",editable:!1,deleteConfirm:!1,children:e?.children||[],carType:e?.carType||this.carType,sdb:e?.sdb||this.sdb}],"AddOrSelector"===e?.from){let e=this.treeData.length-1;this.curView={label:this.treeData[e].text,value:e}}},onSwitchView({fromNode:e,toNode:t}){this.view.id===e.id?this.curView.value=this.treeData.findIndex((e=>e.id===t.id)):this.view.id===t.id&&(this.curView.value=this.treeData.findIndex((t=>t.id===e.id))),this.treeData=this.treeData.map((a=>a.id===e.id?t:a.id===t.id?e:a))},manageShow(){this.manageModal.manageVisible=!0},onCancelImportFile(){this.modal.visible=!1},async onCancelSelect(e){this.manageModal.manageVisible=!1;const t=this.treeData.findIndex((t=>t.id===e)),a=this.treeData[t];if(console.log("view334",a),this.curView={label:this.treeData[t].text,value:t,tag:a.sdb},this.carType!==a.carType||this.sdb!==a.sdb){let e=[],t=[];if("custom"===a.carType){const l=(this.$ls.get("blfread_sdbData")||[]).find((e=>e.sdb===a.sdb));e=l.files,t=l.comments}this.onCheckView({curId:a.id,carType:a.carType,sdb:a.sdb,directory:this.directory,files:e,comments:t})}else this.$nextTick((()=>{const e=a,t=e.id;void 0===this.waitChart[t]&&this.directory&&this.play(e)})),"mdf"==this.fileType&&this.play(this.treeData[this.curView.value])},onCheckView(e){this.signalLoading=!0,this.resetTimeData(),this.$nextTick((()=>{this.modal.visible=!1;let t=this.treeData.filter((t=>t.id===e.curId)).map((t=>({label:t.text,value:this.treeData.findIndex((t=>t.id===e.curId))})));this.curView=t[0],this.carType=e.carType,this.sdb=e.sdb,this.directory=Z(e.directory),this.files=e.files.length?e.files:void 0,this.comments=e.comments.length?e.comments:void 0,this.fileType=e.fileType,void 0!==e.isBigFile&&(this.isBigFile=e.isBigFile),"mdf"===e.fileType?E.mdf.getSignals({mdfPath:e.directory}).then((e=>{this.defaultOptions=Object.freeze(e.data.data)})).then((()=>{this.choosePath()})):this.$nextTick((async()=>{console.log("this.carType7788",this.carType),"custom"===this.carType?"blf"===this.fileType?await E.blf.getDBC({carType:this.carType,sdb:this.sdb,files:this.files,comments:this.comments}).then((e=>{this.defaultOptions=Object.freeze(e.data)})):"log"===this.fileType?await E.logReader.getDBC({carType:this.carType,sdb:this.sdb,files:this.files,comments:this.comments}).then((e=>{this.defaultOptions=Object.freeze(e.data)})):await E.ascReader.getDBC({carType:this.carType,sdb:this.sdb,files:this.files,comments:this.comments}).then((e=>{this.defaultOptions=Object.freeze(e.data)})):"blf"===this.fileType?await E.blf.reAdjust(e.sendReAdjust):"log"===this.fileType?("noAdapted"==e.adaptedType&&await E.logReader.getDBC({carType:this.carType,sdb:this.sdb,files:this.files,comments:this.comments}).then((e=>{this.defaultOptions=Object.freeze(e.data)})),await E.logReader.reAdjust(e.sendReAdjust)):("noAdapted"==e.adaptedType&&await E.ascReader.getDBC({carType:this.carType,sdb:this.sdb,files:this.files,comments:this.comments}).then((e=>{this.defaultOptions=Object.freeze(e.data)})),await E.ascReader.reAdjust(e.sendReAdjust)),console.log("this.defaultOptions",this.defaultOptions),this.choosePath()}))})),M.report("track","click",{element_name:"查看报文",asset_name:this.directory+";",tip:"1174.10.0.1.27766"})},onExportDotsData(e){const t=e.map((e=>e.join("\t"))).join("\n");te(t,"tspa-打点-"+_()+".txt")},changeState(){this.turnTimeLimit=!this.turnTimeLimit,console.log("this.turnTimeLimit ? this.timeLimit : 1200",this.turnTimeLimit?this.timeLimit:1200)}}},dl=e=>(w("data-v-10f33d12"),e=e(),C(),e),rl={class:"o-pul-er"},cl={key:0,class:"o-column"},hl={class:"o-column-left"},ml=dl((()=>p("div",{class:"o-resize-bar"},null,-1))),pl=dl((()=>p("div",{class:"o-resize-line"},null,-1))),ul={class:"o-resize-save"},gl={class:"o-pul-board"},bl={class:"o-pul-select-wrap"},fl={class:"o-pul-button-wrap"},yl=[dl((()=>p("i",{class:"t-icon chooseSignal"},null,-1))),dl((()=>p("span",null,"选择信号",-1)))],vl=dl((()=>p("span",{style:{color:"#D9D9D9","font-size":"18px",transform:"scaleX(0.5)"}},"|",-1))),wl=[dl((()=>p("i",{class:"t-icon manageView"},null,-1))),dl((()=>p("span",null,"管理视图",-1)))],Cl=["data-empty"],kl=["data-hidden"],Sl=["data-open","onClick"],Tl=["data-color","onClick"],Dl=["onMouseleave"],Vl=["title","data-color","onClick"],xl={class:"t-node-text"},Il={key:0,class:"t-node-warning"},Ll={key:1,class:"t-node-error"},Fl=["onClick"],Rl=["onClick"],$l=dl((()=>p("div",{class:"drag-icon"},null,-1))),Ml={class:"o-column-right"},El={class:"o-menu-chart"},_l=["data-active"],Nl=dl((()=>p("i",{class:"o-menu-chart-it-icon"},null,-1))),Al=["data-active"],Ol=dl((()=>p("i",{class:"o-menu-chart-it-icon"},null,-1))),Pl={class:"rec-body",style:{position:"relative"}},Ul={class:"timechart-er"},Hl={class:"tch-tool-er"},Bl={class:"tch-tool-hotkey-er"},jl={class:"timechart-hotkey"},ql={class:"hotkey-more"},zl=dl((()=>p("div",{class:"hotkey-icon-book"},null,-1))),Kl={class:"hotkey-more-body"},Wl=O('<li data-v-10f33d12><div class="timechart-hotkey-it" data-v-10f33d12>缩放横轴 <span class="hotkey-btn" data-v-10f33d12>ctrl+滚轮</span></div></li><li data-v-10f33d12><div class="timechart-hotkey-it" data-v-10f33d12>平移横轴 <span class="hotkey-btn" data-v-10f33d12>shift+滚轮</span></div></li><li data-v-10f33d12><div class="timechart-hotkey-it" data-v-10f33d12>缩放纵轴 <span class="hotkey-btn" data-v-10f33d12>alt+ctrl+滚轮</span></div></li><li data-v-10f33d12><div class="timechart-hotkey-it" data-v-10f33d12>平移纵轴 <span class="hotkey-btn" data-v-10f33d12>alt+shift+滚轮</span></div></li><li data-v-10f33d12><div class="timechart-hotkey-it" data-v-10f33d12>框选放大 <span class="hotkey-btn" data-v-10f33d12>左键拖拽</span></div></li><li data-v-10f33d12><div class="timechart-hotkey-it" data-v-10f33d12>复位轴 <span class="hotkey-btn" data-v-10f33d12>左键双击</span></div></li><li data-v-10f33d12><div class="timechart-hotkey-it" data-v-10f33d12>选择帧 <span class="hotkey-btn" data-v-10f33d12>左键单击</span></div></li>',7),Gl={class:"timechart-hotkey-it"},Xl={class:"hotkey-btn"},Yl=dl((()=>p("li",null,[p("div",{class:"timechart-hotkey-it"},[y("框选时段 "),p("span",{class:"hotkey-btn"},"shift+左键")])],-1))),Jl={class:"tch-tool-blank-er"},Ql=dl((()=>p("div",{class:"tch-tool-span"},null,-1))),Zl=dl((()=>p("div",{class:"tch-tool-span"},null,-1))),ei=["id"],ti={class:"filter-time"},ai={class:"filter-time-wrap"},li=dl((()=>p("span",null,"筛选时间： 近 ",-1))),ii=["disabled"],si={class:"rec-body-table"},ni={class:"table-data"},oi={key:1,class:"board-spin-er"},di={class:"board-spin-progress"},ri={class:"board-spin-text"},ci=s(ol,[["render",function(e,t,a,l,i,s){const n=d("AddOrSelector"),o=d("ChooseSignal"),w=d("Draggable"),C=d("Button"),k=d("v-select"),T=d("ButtonGroup"),D=d("TimePlotMulti"),V=d("Switch"),x=d("TableChart"),F=d("ProgressBar"),$=d("ManageViewsGroup"),M=d("Message"),E=r("tooltip");return h(),m(b,null,[p("div",rl,[s.view?(h(),m("div",cl,[p("div",hl,[ml,pl,p("div",ul,[p("div",gl,[p("div",bl,[g(n,{options:s.treeDataDbc,placeholder:"输入视图名称",modelValue:i.curView,"onUpdate:modelValue":t[0]||(t[0]=e=>i.curView=e),onAdd:s.addView},null,8,["options","modelValue","onAdd"])]),p("div",fl,[p("div",{class:"head-btn",onClick:t[1]||(t[1]=L((()=>i.chooseSignalAble=!i.chooseSignalAble),["prevent","stop"]))},yl),vl,p("div",{class:"head-btn",id:"delete_module",onClick:t[2]||(t[2]=e=>s.manageShow())},wl),i.chooseSignalAble?(h(),N(o,{key:0,filledOptions:i.filledOptions,signals:s.view.children,onSignalsChange:s.updateSignal,loading:i.signalLoading,carType:i.carType,fileType:i.fileType,sdb:a.sdb,dbcVal:a.dbcVal,dbcChn:a.dbcChn,ldfChn:a.ldfChn,onCancel:t[3]||(t[3]=()=>i.chooseSignalAble=!1)},null,8,["filledOptions","signals","onSignalsChange","loading","carType","fileType","sdb","dbcVal","dbcChn","ldfChn"])):v("",!0)]),p("div",{class:"o-pul-tree-er","data-empty":0===s.view.children.length},[s.view?(h(),N(w,{key:0,onDrag:t[4]||(t[4]=L((()=>{}),["stop"])),onDragstart:t[5]||(t[5]=L((()=>{}),["stop"])),maxLevel:1,class:"t-list",modelValue:s.view.children,"onUpdate:modelValue":t[6]||(t[6]=e=>s.view.children=e),onAfterDrop:t[7]||(t[7]=e=>s.updateSignal(s.view.children,"1"))},{default:f((({node:e,stat:t})=>[p("div",{class:"t-node","data-type":"signal","data-hidden":e.hidden},[p("i",{class:"t-node-exp","data-open":t.open,onClick:e=>t.open=!t.open},null,8,Sl),y(),c((h(),m("i",{class:"t-node-icon","data-color":e.color,onClick:L((t=>e.colorEditable=!0),["stop","prevent"])},[c(p("div",{class:"color-picker",onMouseleave:t=>e.colorEditable=!1},[(h(!0),m(b,null,S(i.colorList,(t=>(h(),m("div",{class:"color-item",title:t,"data-color":t,key:t,onClick:a=>{e.color=t,s.updateSignal(s.view.children,"1")}},null,8,Vl)))),128))],40,Dl),[[A,e.colorEditable]])],8,Tl)),[[E,"更改颜色"]]),c((h(),m("span",xl,[p("span",null,u("mdf"!==i.fileType?e.channel>1e3?"":i.C2C[e.channel]+"-":"")+u(e.text),1),!0===e.warning?c((h(),m("div",Il,null,512)),[[E,"信号无数据"]]):v("",!0),e.hidden||null!==e.warning?v("",!0):c((h(),m("div",Ll,null,512)),[[E,"文件内无此信号"]])])),[[E,{content:s.title4node(e),html:!0},void 0,{right:!0}]]),c(p("div",{class:"t-node-delete",onClick:t=>s.deleteSignal(e)},null,8,Fl),[[E,"删除"]]),c(p("div",{class:"t-node-watch",onClick:t=>{s.hideSignal(e,s.view)}},null,8,Rl),[[E,"显示|隐藏"]])],8,kl)])),_:1},8,["modelValue"])):v("",!0)],8,Cl)])]),$l]),p("div",Ml,[p("div",El,["timeChart"!==i.curChart?(h(),m("div",{key:0,class:"o-menu-chart-it-button","data-active":i.curChart==i.mlistChart[0].key||i.mlistChart[0].active,onClick:t[8]||(t[8]=e=>s.choose(i.mlistChart[0].key))},[Nl,y(" "+u(i.mlistChart[0].name),1)],8,_l)):(h(),m("div",{key:1,class:"o-menu-chart-it-button","data-active":i.curChart==i.mlistChart[1].key||i.mlistChart[1].active,onClick:t[9]||(t[9]=e=>s.choose(i.mlistChart[1].key))},[Ol,y(" "+u(i.mlistChart[1].name),1)],8,Al))]),c(p("div",Pl,[p("div",Ul,[p("div",Hl,[p("div",Bl,[p("div",jl,[p("div",ql,[zl,y("快捷键 "),p("div",Kl,[p("ul",null,[Wl,p("li",null,[p("div",Gl,[y("打点 "),p("span",Xl,u("mac"===i.system?"option":"alt")+"+左键",1)])]),Yl])])])])]),p("div",Jl,[c((h(),N(C,{class:"tch-tool-btn",onClick:t[10]||(t[10]=e=>i.showDotsFrame=!i.showDotsFrame)},{default:f((()=>[y("打点")])),_:1})),[[E,"alt+左键"]]),Ql,c(g(k,{options:i.timeFilterOptions,clearable:!1,searchable:!1,label:"label",value:"value",modelValue:i.timeFilterMode,"onUpdate:modelValue":t[11]||(t[11]=e=>i.timeFilterMode=e),class:"tch-tool-select"},null,8,["options","modelValue"]),[[E,"时间显示"]]),Zl,g(T,{options:i.modeOptions,modelValue:i.chartMode,"onUpdate:modelValue":t[12]||(t[12]=e=>i.chartMode=e)},null,8,["options","modelValue"])])]),(h(),m("div",{id:"timechart_"+s.view.id,style:R(`width: 100%; height: calc(100% - 137px);min-height: ${"single"===i.chartMode?40*(i.timeData?.length||0)+1:1}px;`),key:s.view.id},[i.timeData.length>0&&i.timeData.some((e=>e.t))?(h(),N(D,{key:0,"data-cy":"timePlotMulti",fileType:i.fileType,timeData:i.timeData,showEnum:!0,mode:i.chartMode,startTime:i.startTime,timeFilter:i.timeFilterMode.value,showExport:!1,showDotsFrame:i.showDotsFrame,"onUpdate:showDotsFrame":t[13]||(t[13]=e=>i.showDotsFrame=e),monitor:!0},null,8,["fileType","timeData","mode","startTime","timeFilter","showDotsFrame"])):v("",!0)],12,ei)),p("div",ti,[g(V,{modelValue:i.turnTimeLimit,"onUpdate:modelValue":t[14]||(t[14]=e=>s.changeState()),id:i.turnTimeLimit},null,8,["modelValue","id"]),p("div",ai,[li,c(p("input",{class:"input",type:"number",placeholder:"输入数字",disabled:!i.turnTimeLimit,min:"0",max:"1200","onUpdate:modelValue":t[15]||(t[15]=e=>i.timeLimit=e),onInput:t[16]||(t[16]=(...t)=>e.onChange&&e.onChange(...t))},null,40,ii),[[I,i.timeLimit,void 0,{lazy:!0}]]),y(" 秒 ")])])])],512),[[A,!i.timechartShow]]),c(p("div",si,[p("div",ni,[g(x,{chartTableData:this.$props.chartTableData,showSignalsList:i.showSignalsList},null,8,["chartTableData","showSignalsList"])])],512),[[A,!i.tablechartShow]])])])):v("",!0),i.chartDataLoaded?v("",!0):(h(),m("div",oi,[p("div",di,[i.directorySize.durationMaybe?(h(),N(F,{key:0,second:i.directorySize.durationMaybe},null,8,["second"])):v("",!0)]),p("div",ri,"正在解析文件 "+u(s.directoryLabel)+"（"+u(i.directorySize.label)+"），约"+u(i.directorySize.durationMaybeLabel)+"…",1)]))]),i.manageModal.manageVisible?(h(),N($,{key:0,fileType:i.fileType,propTreeData:i.treeData,curViewInx:i.curView.value,title:i.manageModal.title,onCancel:s.onCancelSelect,onDelete:s.deleteView,onUpdate:s.updateView,onImport:s.onImportView,onAdd:s.addView,onSwitch:s.onSwitchView},null,8,["fileType","propTreeData","curViewInx","title","onCancel","onDelete","onUpdate","onImport","onAdd","onSwitch"])):v("",!0),g(M,{message:i.message},null,8,["message"])],64)}],["__scopeId","data-v-10f33d12"]]);let hi;const mi=["data-disable"],pi=["data-active"],ui={class:"block-title"},gi={class:"line-title"},bi=["data-active"],fi=s({name:"ScrollBar",props:["modelValue","start","end","disable","timeFilter","startTime"],emits:["update:modelValue","change"],data:()=>({lineTop:0,scrollTop:0,lineTitle:"",scrollTitle:"",lineVisible:!1,dragging:!1,dragHover:!1}),methods:{enterHandler(){this.dragging||(this.lineVisible=!0)},leaveHandler(){this.lineVisible=!1},moveHandler(e){this.lineVisible&&(e.offsetY<0||e.offsetY>=this.$refs.root.clientHeight-28||(this.lineTop=e.offsetY,this.lineTitle=this.tooltipFormatter(this.$props.start+(this.$props.end-this.$props.start)*e.offsetY/(this.$refs.root.clientHeight-28))))},clickHandler(e){this.scrollTop=e.offsetY;const t=this.$props.start+(this.$props.end-this.$props.start)*this.scrollTop/(this.$refs.root.clientHeight-28);this.$emit("update:modelValue",t),this.$emit("change",t)},tooltipFormatter:e=>parseInt(e)/1e3,timeStrFilter(e){return"absolute"===this.$props.timeFilter?new Date(1e3*e+(this.$props.startTime||0)).toLocaleString("zh-Hans-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,hourCycle:"h23",timeZone:"Asia/Shanghai"}):e},blockDownHandler(){this.dragging=!0,hi=void 0},blockUphandler(){if(this.dragging){this.dragging=!1;const e=this.$props.start+(this.$props.end-this.$props.start)*this.scrollTop/(this.$refs.root.clientHeight-28);this.$emit("update:modelValue",e),this.$emit("change",e)}},blockLeaveHandler(){this.enterHandler(),this.dragHover=!1},blockEnterHandler(){this.leaveHandler(),this.dragHover=!0},blockMoveHandler(e){if(this.dragging){let t=0;null!=hi&&(t=e.pageY-hi),hi=e.pageY,console.log("move",e.pageY);let a=this.scrollTop+t;const l=this.$refs.root.clientHeight;if(a<0){if(0===this.scrollTop)return;a=0}else if(a>l-28){if(this.scrollTop===l-28)return;a=l-28}this.scrollTop=a,this.scrollTitle=this.tooltipFormatter(this.$props.start+(this.$props.end-this.$props.start)*this.scrollTop/(this.$refs.root.clientHeight-28))}}},watch:{modelValue(e){if(this.dragging)return;let t=(e-this.$props.start)/(this.$props.end-this.$props.start);this.scrollTop=parseInt(t*(this.$refs.root.clientHeight-28)),this.scrollTitle=this.tooltipFormatter(e),this.dragging=!1,this.dragHover=!1},end(e){if(this.dragging)return;let t=(this.$props.modelValue-this.$props.start)/(this.$props.end-this.$props.start);this.scrollTop=parseInt(t*(this.$refs.root.clientHeight-28))}},mounted(){window.addEventListener("mouseup",this.blockUphandler),window.addEventListener("mousemove",this.blockMoveHandler)},unmounted(){window.removeEventListener("mouseup",this.blockUphandler),window.removeEventListener("mousemove",this.blockMoveHandler)}},[["render",function(e,t,a,l,i,s){return h(),m("div",{class:"bar-er","data-disable":e.$props.disable,ref:"root",onClick:t[5]||(t[5]=L(((...e)=>s.clickHandler&&s.clickHandler(...e)),["prevent","stop"])),onMousemove:t[6]||(t[6]=(...e)=>s.moveHandler&&s.moveHandler(...e)),onMouseenter:t[7]||(t[7]=(...e)=>s.enterHandler&&s.enterHandler(...e)),onMouseleave:t[8]||(t[8]=(...e)=>s.leaveHandler&&s.leaveHandler(...e))},[p("div",{class:"bar-block","data-active":i.dragging,onClick:t[0]||(t[0]=L((()=>{}),["prevent","stop"])),onMousedown:t[1]||(t[1]=(...e)=>s.blockDownHandler&&s.blockDownHandler(...e)),onMouseup:t[2]||(t[2]=(...e)=>s.blockUphandler&&s.blockUphandler(...e)),onMouseleave:t[3]||(t[3]=(...e)=>s.blockLeaveHandler&&s.blockLeaveHandler(...e)),onMouseenter:t[4]||(t[4]=(...e)=>s.blockEnterHandler&&s.blockEnterHandler(...e)),style:R({transform:"translateY("+i.scrollTop+"px)"})},[p("div",ui,u(s.timeStrFilter(i.scrollTitle)),1)],44,pi),c(p("div",{class:"bar-line",style:R({transform:"translateY("+i.lineTop+"px)"})},[p("div",gi,u(s.timeStrFilter(i.lineTitle)),1)],4),[[A,i.lineVisible]]),p("div",{class:"scroll-title","data-active":i.dragging},u(s.timeStrFilter(i.scrollTitle)),9,bi)],40,mi)}],["__scopeId","data-v-10031967"]]),yi={props:["col","asyncData"],emits:["change"],data:()=>({options:[],loading:!1,current:[]}),methods:{async onMouseEnter(){this.loading=!0,this.options=[];try{this.options=await this.$props.asyncData(this.$props.col)}catch(e){}this.loading=!1},onModelValueChange(e){this.current=e,this.$emit("change",e)}},watch:{col:{handler(e){this.current=e.value},deep:!0}}},vi=["data-active"],wi=(e=>(w("data-v-c658e29a"),e=e(),C(),e))((()=>p("div",null,null,-1)));let Ci=0,ki=0;const Si={props:["rowData","columnsDef","columnsFilter","from","filters"],emits:["toggleExpand","scrollRow","scrollAction","filterItem","colFilterChange","updatePadding","timeModeChange"],components:{RecycleScroller:T,FilterItem:s(yi,[["render",function(e,t,a,l,i,s){const n=d("v-select");return h(),m("div",{class:"select-icon","data-active":i.current?.length>0,onMouseenter:t[0]||(t[0]=(...e)=>s.onMouseEnter&&s.onMouseEnter(...e))},[p("div",{class:"flt-er",style:R({width:e.$props.col.width+40+"px"})},[g(n,{loading:i.loading,options:i.options,dropdownShouldOpen:()=>!0,searchable:!0,modelValue:i.current,"onUpdate:modelValue":s.onModelValueChange,multiple:""},{"no-options":f((()=>[wi])),_:1},8,["loading","options","modelValue","onUpdate:modelValue"])],4)],40,vi)}],["__scopeId","data-v-c658e29a"]])},created(){this.$_scrollTimer=0},data:()=>({isChildTit:!1,searchVal:"",isOpenSearch:!1,selectFilterList:[],showSelect:!1,curId:-1,filterChnItem:"",filterValItem:"",formData:{},filterList:{channel:"",canId:"",name:"",canType:"",dir:"",dlc:""},left:0,timeFilterOptions:[{label:"Time 绝对时间",value:"absolute"},{label:"Time 相对时间",value:"relative"},{label:"ΔTime 时间差",value:"diff"}],timeFilterMode:{label:"Time 绝对时间",value:"absolute"},selectionActive:!1}),computed:{fullWidth(){return"calc("+this.$props.columnsDef.map((e=>"number"==typeof e.width?e.width+"px":e.width)).join(" + ")+")"}},watch:{rowData:{handler(){if(this.selectionActive){this.selectionActive=!1;let e=window.getSelection();e.removeAllRanges(),e=null}setTimeout((()=>{console.log("updateVisibleItems"),this.$refs.scroller.updateVisibleItems(!0)}),0)},deep:!0},timeFilterMode(e){this.onTimeModelChange(e.value)}},methods:{onScrollX(e){this.left=-e.target.scrollLeft+"px"},onTableClick(e){if(e.target?.className?.includes?.("table-td")){this.selectionActive=!0;let t=window.getSelection();t.removeAllRanges();let a=document.createRange();a.selectNodeContents(e.target),t.addRange(a),t=a=null}},filterHex:e=>void 0===e?"":(e>=0?ne(e):e).toString().replace(/^(00)+/g,"")||"00",update(e,t,a,l){Ci=a,ki=this.$props.rowData.length-l,this.$emit("updatePadding",{visibleStartIndex:a,visibleEndIndex:l})},searchInfo(){this.isOpenSearch=!1},onOpenSearch(){this.isOpenSearch=!0},scrollToBottom(){this.$refs.scroller?.scrollToItem(this.$props.rowData.length-1)},scrollToItem(e){this.$refs.scroller?.scrollToItem(e)},nativeScroll(){const e=this.$refs.scroller.$el;e.addEventListener("scroll",(e=>{if(clearTimeout(this.$_scrollTimer),this.selectionActive){this.selectionActive=!1;let e=window.getSelection();e.removeAllRanges(),e=null}this.$_scrollTimer=setTimeout((()=>{console.log("updateVisibleItems"),this.$refs.scroller.updateVisibleItems(!0)}),100)})),e.addEventListener("wheel",(e=>{this.$emit("scrollAction",{topPadding:Ci,bottomPadding:ki}),e.deltaY>0||e.deltaX>0?ki<=40&&this.$emit("scrollRow","down"):(e.deltaY<0||e.deltaX<0)&&Ci<=40&&this.$emit("scrollRow","up")}))},filterItem(e,t){this.filterChnItem=e,this.curId=t,this.$emit("filterItem"),this.selectFilterList=[],E.blfLogging.getFiltItems({selectItem:e,channel:"",canId:"",name:"",canType:"",dir:"",dlc:""}).then((e=>{let t=e.data.data;t.length>0&&t.forEach((e=>{e&&this.selectFilterList.push({value:e,label:e,selected:!1})}))}))},onChooseFilterItem(e,t){e.selected=!0,this.$emit("reDrawTable",e,t,this.selectFilterList)},onTimeModelChange(e){this.$emit("timeModeChange",e)}},mounted(){this.nativeScroll()}},Ti=e=>(w("data-v-14b568fa"),e=e(),C(),e),Di={style:{position:"absolute",left:"0",top:"0",right:"0",bottom:"0",display:"inherit","flex-direction":"inherit","align-items":"inherit"}},Vi={key:1,class:"o-pul-time-option-warp"},xi=Ti((()=>p("div",{class:"table-header",style:{height:"32px","line-height":"32px"}},null,-1))),Ii=["data-even"],Li=["onMousedown"],Fi=["onMousedown"],Ri=[Ti((()=>p("span",{class:"container-tit",style:{width:"205px"}},"信号名",-1))),Ti((()=>p("span",{class:"container-tit",style:{width:"200px"}},"信号物理值",-1))),Ti((()=>p("span",{class:"container-tit",style:{width:"80px"}},"HEX",-1))),Ti((()=>p("span",{class:"container-tit",style:{width:"calc(100vw - 487px)"}},"信号描述",-1)))],$i={class:"table-parent-tr o-table-expand-child"},Mi={class:"table-td",style:{width:"205px"}},Ei={class:"table-td",style:{width:"200px"}},_i={class:"table-td",style:{width:"80px"}},Ni={class:"table-td",style:{width:"calc(100vw - 487px)"}},Ai=s(Si,[["render",function(e,t,a,l,i,s){const n=d("FilterItem"),o=d("v-select"),r=d("RecycleScroller");return h(),m("div",{class:"table",onClick:t[2]||(t[2]=(...e)=>s.onTableClick&&s.onTableClick(...e))},[p("div",{class:"table-header",style:R({height:"32px",lineHeight:"32px",transform:"translateX("+i.left+")",width:s.fullWidth,position:"absolute",zIndex:1})},[p("div",Di,[(h(!0),m(b,null,S(e.$props.columnsDef,((a,l)=>(h(),m("div",{class:"header-tit",key:l,style:R({width:a.width>0?a.width+"px":a.width})},[p("span",null,u(a.titName),1),a.filterShow?(h(),N(n,{key:0,onChange:t=>e.$emit("colFilterChange",{keyName:a.keyName,value:t}),col:a,asyncData:e.$props.columnsFilter},null,8,["onChange","col","asyncData"])):v("",!0),"timestamp"==a.keyName||"diff"==a.keyName||"deltaTime"==a.keyName?(h(),m("div",Vi,[g(o,{options:i.timeFilterOptions,clearable:!1,searchable:!1,label:"label",value:"value",modelValue:i.timeFilterMode,"onUpdate:modelValue":t[0]||(t[0]=e=>i.timeFilterMode=e),class:"canoe-frame-vselect"},null,8,["options","modelValue"])])):v("",!0)],4)))),128))])],4),xi,g(r,{items:e.$props.rowData,"item-size":24,"key-field":"id",emitUpdate:!0,onUpdate:s.update,ref:"scroller",class:"frame-class"},{default:f((({item:t,index:a})=>[t.isParent?(h(),m("div",{key:0,class:F("0"!=t.canId?"table-parent-tr":"table-parent-tr-error"),"data-even":a%2==0,style:R({transform:"translateX("+i.left+")",width:s.fullWidth})},[(h(!0),m(b,null,S(e.$props.columnsDef,(l=>(h(),m("div",{class:"table-td",style:R({width:"number"==typeof l.width?l.width+"px":l.width}),key:l.keyName},[l.custom?(h(),m(b,{key:0},[t.isExpand&&t.isParent&&t.name?(h(),m("i",{key:0,class:"collapse-icon",onMousedown:L((t=>e.$emit("toggleExpand",a)),["stop","prevent"])},null,40,Li)):v("",!0),!1===t.isExpand&&t.isParent&&t.name?(h(),m("i",{key:1,class:"expand-icon",onMousedown:L((t=>e.$emit("toggleExpand",a)),["stop","prevent"])},null,40,Fi)):v("",!0)],64)):(h(),m(b,{key:1},[y(u(l.displayMap?l.displayMap(t[l.keyName]):t[l.keyName]),1)],64))],4)))),128))],14,Ii)):(h(),m(b,{key:1},[t.isChildTit?(h(),m("div",{key:0,class:"table-header o-table-expand-child",style:R({transform:"translateX("+i.left+")",width:s.fullWidth})},Ri,4)):(h(),m("div",{key:1,class:"table-parent",style:R({transform:"translateX("+i.left+")",width:s.fullWidth})},[p("div",$i,[p("span",Mi,u(t.name),1),p("span",Ei,u(t.value),1),p("span",_i,u(s.filterHex(t.hex)),1),p("span",Ni,u(t.comment),1)])],4))],64))])),_:1},8,["items","onUpdate"]),p("div",{class:"table-scroll-x",onScroll:t[1]||(t[1]=(...e)=>s.onScrollX&&s.onScrollX(...e))},[p("div",{class:"table-scroll-x-bar",style:R({width:s.fullWidth})},null,4)],32)])}],["__scopeId","data-v-14b568fa"]]),Oi=s({beforeMount(){console.log("this.params",this.params)},methods:{onExpand(){console.log("this.params.data",this.params.data),!1===this.params.data.isExpand?(this.params.node.setDataValue("isExpand",!0),this.params.api.applyTransactionAsync({add:[JSON.parse(this.params.data.parsedData)],addIndex:this.params.rowIndex+1})):(this.params.node.setDataValue("isExpand",!1),this.params.api.applyTransactionAsync({remove:this.params.api.getRowNode(this.params.rowIndex+1)})),this.params.api.redrawRows()}}},[["render",function(e,t,a,l,i,s){return h(),m("div",null,[e.params.data.isExpand?(h(),m("i",{key:0,class:"expand-icon",onClick:t[0]||(t[0]=(...e)=>s.onExpand&&s.onExpand(...e))})):(h(),m("i",{key:1,class:"collapse-icon",onClick:t[1]||(t[1]=(...e)=>s.onExpand&&s.onExpand(...e))})),p("span",null,u(e.params.value),1)])}]]),Pi={methods:{onClick(){}}},Ui=[O('<table><thead class="o-table-thead"><tr><th class="o-table-cell">信号</th><th class="o-table-cell o-cell-ar">信号物理值</th><th class="o-table-cell o-cell-ar">信号描述</th></tr></thead><tbody class="o-table-tbody"></tbody></table>',1)];let Hi,Bi=0,ji=0,qi=0,zi=0;const Ki={props:["store","closeFlag","recentTest","connectStatus","colFilterShow","channelOne","channelTwo","channelThree","linChannelVal","linChannelValTwo","filePath","dbcVal","startTime","sn","dbcChn","ldfChn","channelValList","linChannelValList"],emits:["updateBock","updateTimeData","recordTimeChange","startTimeChange","chartTableFun"],components:{Button:l,Message:i,ScrollBar:fi,ExpandInfo:Oi,FullWidthCellRenderer:s(Pi,[["render",function(e,t,a,l,i,s){return h(),m("div",{onClick:t[0]||(t[0]=(...e)=>s.onClick&&s.onClick(...e))},Ui)}]]),TableRecycleScroller:Ai,CopyPath:ae,ButtonGroup:se},data(){return{expandKeys:new Set,visibleStartIndex:0,visibleEndIndex:0,bottomPadding:0,recordLoading:!1,mode:"all",sliderValue:-1,comments:["","","","","","","","","","","","","","","",""],message:{visible:!1,level:"",content:""},seconds:0,timeFilterModeVal:"absolute",rowData:[],isRecording:!1,startSqlId:0,endSqlId:0,isLock:!1,isScrollEnd:!0,isAddData:!0,secondConfirm:!1,topLock:!1,bottomLock:!1,openFlag:!1,mlist:[{key:"lookRecord",name:"帧查看",icon:"box"},{key:"supeRecord",name:"图像查看",icon:"setting"}],cur:"lookRecord",recordShow:!0,colorList:["blue","cerulean","cyan","green","lime","purple","pink","red","orange","yellow"],columnsDef:[{titName:"",width:30,keyName:"id",type:"number",value:[],filterShow:!1,custom:!0},{titName:"",width:164,keyName:"diff"===this.timeFilterModeVal?"single"===this.mode?"deltaTime":"diff":"timestamp",type:"number",value:[],filterShow:!1,displayMap:e=>{let t=parseFloat(e);switch(this.timeFilterModeVal){case"diff":return t.toFixed(6);case"absolute":return new Date(1e3*t).toLocaleString("zh-Hans-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,hourCycle:"h23",timeZone:"Asia/Shanghai"});case"relative":return(e-this.startTime).toFixed(6);default:return e}}},{titName:"Chn",width:60,keyName:"channel",type:"number",value:[],filterShow:!0},{titName:"ID",width:60,keyName:"canId",type:"number",value:[],filterShow:!0,displayMap:e=>"0x"+e.toString(16)},{titName:"NAME",width:200,keyName:"name",type:"string",value:[],filterShow:!0},{titName:"Event",width:80,keyName:"canType",type:"string",value:[],filterShow:!0},{titName:"Dir",width:60,keyName:"dir",type:"string",value:[],filterShow:!0},{titName:"Dlc",width:60,keyName:"dlc",type:"number",value:[],filterShow:!0},{titName:"DATA",width:1380,keyName:"data",type:"string",value:[],filterShow:!1,displayMap:e=>e.map((e=>e.toString(16).padStart(2,"0"))).join(" ")}]}},watch:{mode(e,t){this.topPadding=0,this.$refs.table.scrollToItem(0),this.expandKeys.clear(),this.rowData=[],this.isRecording&&this.resumeScroll()},filePath(){this.$emit("updateBock",{filePath:this.filePath,dbcVal:this.dbcVal,recordLoading:this.recordLoading,isRecording:this.isRecording})},dbcVal(){this.$emit("updateBock",{filePath:this.filePath,dbcVal:this.dbcVal,recordLoading:this.recordLoading,isRecording:this.isRecording})},recordLoading(){this.$emit("updateBock",{filePath:this.filePath,dbcVal:this.dbcVal,recordLoading:this.recordLoading,isRecording:this.isRecording})},isRecording(){this.$emit("updateBock",{filePath:this.filePath,dbcVal:this.dbcVal,recordLoading:this.recordLoading,isRecording:this.isRecording})},colComputed(){this.columnsDef[1]={titName:"",width:164,keyName:"diff"===this.timeFilterModeVal?"single"===this.mode?"deltaTime":"diff":"timestamp",type:"number",value:[],filterShow:!1,displayMap:e=>{let t=parseFloat(e);switch(this.timeFilterModeVal){case"diff":return t.toFixed(6);case"absolute":return new Date(1e3*t).toLocaleString("zh-Hans-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23",timeZone:"Asia/Shanghai"})+"."+t.toFixed(6).split(".")[1];case"relative":return(e-this.startTime).toFixed(6);default:return e}}}}},computed:{colComputed(){return this.timeFilterModeVal+this.startTime+this.mode},recordTime(){return console.log("recordTime223",ie(parseInt((1e3*this.seconds).toString().split(".")[0]))),ie(parseInt((1e3*this.seconds).toString().split(".")[0]))},showData(){let e={mode:"all"};return this.columnsDef.forEach((t=>{t.filterShow&&(e[t.keyName]=(t.value||[]).map((e=>e.value)))})),e},diffRowData(){return this.rowData.map(((e,t,a)=>({...e,diff:0===t?0:a[t].timestamp-a[t-1].timestamp})))}},methods:{choose(e){this.cur=e,this.recordShow="supeRecord"!=e},async colFilter(e){const t="name"===e.keyName?null:"";let a,l={selectItem:e.keyName,...this.showData,[e.keyName]:t};try{a=await await E.blfLogging.getFiltItems(l)}catch(i){}return(a?.data?.data||[]).map((t=>({value:t,label:"canId"===e.keyName?"0x"+t.toString(16):""===t?" 空":t}))).sort(((t,a)=>("number"===e.type?+t.value>+a.value:t.value>a.value)?1:-1))},startRecord(e){clearInterval(zi),this.checkHardware(e),this.isLock=!1,this.columnsDef=this.columnsDef.map((e=>({...e,value:[]})))},async endRecord(){this.recordLoading=!0,clearTimeout(qi),clearInterval(zi),E.blfLogging.stopLogging(),await P(2e3),this.isRecording=!1,this.recordLoading=!1},async checkHardware(e){this.recordLoading=!1,this.secondConfirm=!1,console.log("调检查并连接硬件设备接口"),clearInterval(zi),this.isRecording=!0,this.startLogging(e),this.resumeScroll()},async startLogging(e){console.log("55666",e),this.seconds=0,this.rowData=[],this.$emit("startTimeChange",Date.now()/1e3),zi=setInterval((()=>{this.seconds=Date.now()/1e3-this.startTime}),1e3),this.$emit("recordTimeChange",this.recordTime);let t=["","","","","","","","","","","","","","","",""];this.channelValList.forEach(((e,a)=>{t[a]=e.split("-").pop()})),console.log("this.dbcChn07101822",this.dbcChn,t);let a=this.filePath.replace(".blf","-"+_()+".blf"),l=await E.blfLogging.startLogging({path:a,type:"blf",typelin:"asc",channel:3,sdb:"自定义模板"===this.dbcVal?"":this.dbcVal.split("/")[1],carType:"自定义模板"===this.dbcVal?"custom":this.dbcVal.split("/")[0],dbcChn:this.dbcChn,ldfChn:this.ldfChn,files:"自定义模板"===this.dbcVal?t:["","","","","","","","","","","","","","","",""],comments:this.comments,mode:e});console.log("startLoggin",l)},showMessage({level:e,content:t,timeout:a}){clearTimeout(Bi),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(Bi=setTimeout((()=>{this.message.visible=!1}),a))},showLoggingMessage(){clearTimeout(qi),Hi=async()=>{let e;this.showData.mode=this.mode;try{e=await E.blfLogging.showLoggingMessage({...this.showData}),console.log("showLogginMsg",e)}catch(a){}if(this.$emit("chartTableFun",e.data.signal_data),console.log(e.data.signal_data,e.data,0x1ed6eb565788e400),!e)return;let t=e?.data?.frame_data||[];if(!this.isLock&&t?.length>0)if("all"===this.mode){let e=t[0].sqlId,a=t[t.length-1].sqlId;t.forEach((e=>{e.isExpand=!1,e.isParent=!0,e.id=""+e.sqlId,e.canId=e.arbitrationId,delete e.arbitrationId})),this.startSqlId=e,this.endSqlId=a,ji=t[t.length-1].timestamp,this.rowData=t,this.$refs.table.scrollToBottom(),this.isAddData&&(this.sliderValue=e/a*(ji-this.startTime)*1e3)}else"single"===this.mode&&(t.forEach((e=>{e.isExpand=!1,e.isParent=!0,e.id=""+e.sqlId,e.canId=e.arbitrationId,delete e.arbitrationId})),t=t.sort(((e,t)=>e.channel===t.channel?e.canId-t.canId:e.channel-t.channel)),await this.drawExpandRows(t));this.$emit("updateTimeData",e.data.signal_data),this.isRecording?qi=setTimeout((()=>{requestAnimationFrame(Hi)}),500):clearTimeout(qi),this.$emit("recordTimeChange",this.recordTime)},Hi()},async drawExpandRows(e){const t="-",a={};this.rowData.slice().sort(((e,a)=>{const l=e.id,i=a.id;return!~l.indexOf(t)&&~i.indexOf(t)?-1:~l.indexOf(t)&&!~i.indexOf(t)?1:~l.indexOf(t)||~i.indexOf(t)?l>i?1:l<i?-1:0:e.channel<a.channel?-1:e.channel>a.channel?1:e.canId-a.canId})),e.forEach((e=>{const l=e.channel+"-"+e.canId;if(~e.id.indexOf(t))a[l].children.push(e);else{const t=a[l]?.children||[];a[l]=e,a[l].children=this.expandKeys.has(l)?t:[]}}));let l=this.rowData.slice();for(let s=this.visibleEndIndex;s>=this.visibleStartIndex;s--){if(!l?.[s])continue;let e=null,t=0;if(l[s].isParent)e=l[s],t=s;else if(s===this.visibleStartIndex)for(let a=s;a>=0;a--)if(l[a].isParent){e=l[a],t=a;break}if(e){const i=e.channel+"-"+e.canId;if(this.expandKeys.has(i)){const e=await this.onToggleExpand(t,l,!0);e?.length&&(a[i].children=e)}}}const i=[];for(let s in a){const e=a[s],t=e.children;delete e.children,t.length&&(e.isExpand=!0),i.push(e),t.forEach((e=>{i.push(e)}))}this.rowData=i},getSelectData(e){let t="",a="",l="";switch(e){case"up":l=this.startSqlId;break;case"down":a=this.endSqlId;break;case"pick":clearTimeout(qi),t=this.sliderValue/1e3+this.startTime}E.blfLogging.selectData({moreThanTimeStamp:t,lessThanTimeStamp:"",moreThanSqlID:a,lessThanSqlID:l,...this.showData,sqlId:"",numbers:100}).then((t=>{if(t?.data?.data?.length>0){let a=t.data.data;switch(a.forEach((e=>{e.isExpand=!1,e.isParent=!0,e.id=e.sqlId,e.canId=e.arbitrationId,delete e.arbitrationId})),e){case"up":this.rowData=a.concat(...this.rowData),this.$refs.table.scrollToItem(t.data.data.length-1),this.sliderValue=1e3*(t.data.data[0].timestamp-this.startTime),t.data.startSqlId&&(this.startSqlId=t.data.startSqlId);break;case"down":this.rowData=this.rowData.concat(...a),t.data.endSqlId&&(this.endSqlId=t.data.endSqlId);break;case"pick":this.startSqlId=t.data.startSqlId,this.endSqlId=t.data.endSqlId,this.rowData=a,this.sliderValue=1e3*(t.data.data[0].timestamp-this.startTime)}}})).finally((()=>{this.topLock=!1,this.bottomLock=!1}))},onUpdatePadding(e){this.visibleStartIndex=e.visibleStartIndex,this.visibleEndIndex=e.visibleEndIndex},onTimeModeChange(e){this.timeFilterModeVal=e},onScrollAction(e){this.isLock||("all"===this.mode?this.isLock=!0:this.isLock=!1,this.isScrollEnd=!1)},onBodyScrollEnd(e){"single"!==this.mode&&("up"===e&&!1===this.topLock&&(this.topLock=!0,this.getSelectData(e)),"down"===e&&!1===this.bottomLock&&(this.bottomLock=!0,this.getSelectData(e)))},onClicked(){this.isLock=!1,this.isScrollEnd=!1},resumeScroll(){this.isScrollEnd=!0,this.isAddData=!0,this.isLock=!1,this.showLoggingMessage()},async onToggleExpand(e,t,a){const l=t.map((e=>({...e}))),i=l[e],s=i.channel+"-"+i.canId;if(a||!i.isExpand){this.expandKeys.add(s);const t=await E.blfLogging.parsedSignal({channel:i.channel,canId:""+i.canId,canData:(i.data||[]).map((e=>e.toString(16)))});let n=t?.data.sort(((e,t)=>e.name<t.name?-1:1))||[],o=i.sqlId;if(n.forEach(((e,t)=>{e.channel=i.channel,e.canId=""+i.canId,e.isParent=!1,e.isExpand=!0,e.isChildTit=!1,e.id=o+"-"+e.name})),n.unshift({channel:i.channel,canId:""+i.canId,isParent:!1,isExpand:!0,isChildTit:!0,id:o+"-"}),l.splice(e+1,0,...n),i.isExpand=n.length,a)return n;this.rowData=l}else this.expandKeys.delete(s),l.splice(e+1,l[e].isExpand),l[e].isExpand=!1,this.rowData=l},onSliderChange(e){this.isScrollEnd=!1,this.isAddData=!1,"all"===this.mode?this.isLock=!0:this.isLock=!1,this.getSelectData("pick")},onFilterItem(){this.openFlag=!this.openFlag},onColFilterChange(e){let t=this.columnsDef.find((t=>e.keyName===t.keyName));t&&(t.value=e.value),this.resumeScroll()}},mounted(){},unmounted(){Hi=null,clearTimeout(qi),clearInterval(zi)}},Wi=e=>(w("data-v-12cfb7dd"),e=e(),C(),e),Gi={class:"o-pul-er"},Xi={key:0},Yi=Wi((()=>p("div",{class:"o-pul-title"},"报文录制配置",-1))),Ji={class:"o-pul-p-wrap"},Qi={class:"o-pul-p"},Zi={class:"record-header-message"},es=Wi((()=>p("b",null,"车型/DBC：",-1))),ts=["v-tooltip"],as=[Wi((()=>p("b",null,"保存目录：",-1)))],ls={class:"o-pul-path"},is={class:"o-pul-p-wrap",style:{"flex-wrap":"wrap"}},ss={class:"record-header-message",style:{width:"20vw"}},ns={class:"o-pul-btn-wrap"},os=Wi((()=>p("div",{class:"tool-btn-wrap"},[p("i",{class:"warn-icon"}),p("div",{class:"tool-picker-contianer-wrap"},"录制将覆盖文件,确认要开始录制吗?")],-1))),ds=Wi((()=>p("div",{class:"tool-picker-arrow"},null,-1))),rs={class:"tool-picker-footer-wrap"},cs={class:"o-dialog-footer"},hs=Wi((()=>p("div",{class:"o-pul-hr"},null,-1))),ms={class:"o-table-wrap"},ps=s(Ki,[["render",function(e,t,a,l,i,s){const n=d("CopyPath"),o=d("Button"),w=d("ButtonGroup"),C=d("ScrollBar"),k=d("TableRecycleScroller"),T=d("Message"),D=r("tooltip"),V=r("esc");return h(),m(b,null,[p("div",Gi,[i.recordShow?(h(),m("div",Xi,[Yi,p("div",Ji,[p("div",Qi,[p("span",Zi,[es,y(u(a.dbcVal),1)]),p("span",{class:"record-header-message",style:{width:"71px"},"v-tooltip":a.filePath},as,8,ts),p("span",ls,[g(n,{path:a.filePath,length:60,full:!0},null,8,["path"])])])]),p("div",is,[(h(!0),m(b,null,S(a.channelValList,((e,t)=>(h(),m("div",{class:"o-pul-p",key:t},[c((h(),m("span",ss,[p("b",null,"CAN通道"+u(t+1)+"：",1),y(u(e),1)])),[[D,e]])])))),128))]),p("div",ns,[i.secondConfirm?c((h(),m("div",{key:0,class:"tool-picker-wrap",onClick:t[1]||(t[1]=L((()=>{}),["stop"]))},[os,ds,p("div",rs,[p("div",cs,[g(o,{class:"small-btn",style:{width:"30px"},onClick:t[0]||(t[0]=L((e=>i.secondConfirm=!1),["stop"]))},{default:f((()=>[y("取消")])),_:1}),g(o,{class:"small-btn",type:"primary",style:{width:"30px",margin:"0 0 0 10px"},onClick:L(s.checkHardware,["stop"])},{default:f((()=>[y("确定")])),_:1},8,["onClick"])])])])),[[V,()=>e.$emit("cancel")]]):v("",!0),y("   "),g(w,{options:[{label:"普通",value:"all"},{label:"单帧",value:"single"}],class:"theme-btn-group",modelValue:i.mode,"onUpdate:modelValue":t[2]||(t[2]=e=>i.mode=e)},null,8,["modelValue"])]),hs,p("div",ms,[g(C,{modelValue:i.sliderValue,"onUpdate:modelValue":t[3]||(t[3]=e=>i.sliderValue=e),disable:"all"!==i.mode,startTime:1e3*a.startTime,start:0,end:1e3*i.seconds,onChange:s.onSliderChange,timeFilter:"relative"!=i.timeFilterModeVal?"absolute":"relative"},null,8,["modelValue","disable","startTime","end","onChange","timeFilter"]),g(k,{rowData:s.diffRowData,filters:s.showData,columnsDef:i.columnsDef,onToggleExpand:t[4]||(t[4]=e=>s.onToggleExpand(e,i.rowData)),onScrollRow:s.onBodyScrollEnd,onScrollAction:s.onScrollAction,onFilterItem:s.onFilterItem,onClick:s.onClicked,columnsFilter:s.colFilter,openFlag:i.openFlag,onColFilterChange:s.onColFilterChange,ref:"table",onUpdatePadding:s.onUpdatePadding,onTimeModeChange:s.onTimeModeChange,style:{height:"100%"}},null,8,["rowData","filters","columnsDef","onScrollRow","onScrollAction","onFilterItem","onClick","columnsFilter","openFlag","onColFilterChange","onUpdatePadding","onTimeModeChange"]),c(p("div",{class:"scrollToBottomBtn",onClick:t[5]||(t[5]=L((e=>s.resumeScroll()),["stop"]))},null,512),[[A,i.isLock&&"all"===i.mode],[D,"恢复向下滚动",void 0,{left:!0}]])])])):v("",!0)]),g(T,{message:i.message},null,8,["message"])],64)}],["__scopeId","data-v-12cfb7dd"]]);let us;const gs=["data-disable"],bs=["data-active"],fs={class:"block-title"},ys={class:"line-title"},vs=["data-active"],ws=s({name:"ScrollBar",props:["modelValue","start","end","disable","timeFilter","startTime"],emits:["update:modelValue","change"],data:()=>({lineTop:0,scrollTop:0,lineTitle:"",scrollTitle:"",lineVisible:!1,dragging:!1,dragHover:!1}),methods:{enterHandler(){this.dragging||(this.lineVisible=!0)},leaveHandler(){this.lineVisible=!1},moveHandler(e){this.lineVisible&&(e.offsetY<0||e.offsetY>=this.$refs.root.clientHeight-28||(this.lineTop=e.offsetY,this.lineTitle=this.tooltipFormatter(this.$props.start+(this.$props.end-this.$props.start)*e.offsetY/(this.$refs.root.clientHeight-28))))},clickHandler(e){this.scrollTop=e.offsetY;const t=this.$props.start+(this.$props.end-this.$props.start)*this.scrollTop/(this.$refs.root.clientHeight-28);this.$emit("update:modelValue",t),this.$emit("change",t)},tooltipFormatter:e=>parseInt(e)/1e3,timeStrFilter(e){return"absolute"===this.$props.timeFilter?new Date(1e3*e+(this.$props.startTime||0)).toLocaleString("zh-Hans-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,hourCycle:"h23",timeZone:"Asia/Shanghai"}):e},blockDownHandler(){this.dragging=!0,us=void 0},blockUphandler(){if(this.dragging){this.dragging=!1;const e=this.$props.start+(this.$props.end-this.$props.start)*this.scrollTop/(this.$refs.root.clientHeight-28);this.$emit("update:modelValue",e),this.$emit("change",e)}},blockLeaveHandler(){this.enterHandler(),this.dragHover=!1},blockEnterHandler(){this.leaveHandler(),this.dragHover=!0},blockMoveHandler(e){if(this.dragging){let t=0;null!=us&&(t=e.pageY-us),us=e.pageY,console.log("move",e.pageY);let a=this.scrollTop+t;const l=this.$refs.root.clientHeight;if(a<0){if(0===this.scrollTop)return;a=0}else if(a>l-28){if(this.scrollTop===l-28)return;a=l-28}this.scrollTop=a,this.scrollTitle=this.tooltipFormatter(this.$props.start+(this.$props.end-this.$props.start)*this.scrollTop/(this.$refs.root.clientHeight-28))}}},watch:{modelValue(e){if(this.dragging)return;let t=(e-this.$props.start)/(this.$props.end-this.$props.start);this.scrollTop=parseInt(t*(this.$refs.root.clientHeight-28)),this.scrollTitle=this.tooltipFormatter(e),this.dragging=!1,this.dragHover=!1},end(e){if(this.dragging)return;let t=(this.$props.modelValue-this.$props.start)/(this.$props.end-this.$props.start);this.scrollTop=parseInt(t*(this.$refs.root.clientHeight-28))}},mounted(){window.addEventListener("mouseup",this.blockUphandler),window.addEventListener("mousemove",this.blockMoveHandler)},unmounted(){window.removeEventListener("mouseup",this.blockUphandler),window.removeEventListener("mousemove",this.blockMoveHandler)}},[["render",function(e,t,a,l,i,s){return h(),m("div",{class:"bar-er","data-disable":e.$props.disable,ref:"root",onClick:t[5]||(t[5]=L(((...e)=>s.clickHandler&&s.clickHandler(...e)),["prevent","stop"])),onMousemove:t[6]||(t[6]=(...e)=>s.moveHandler&&s.moveHandler(...e)),onMouseenter:t[7]||(t[7]=(...e)=>s.enterHandler&&s.enterHandler(...e)),onMouseleave:t[8]||(t[8]=(...e)=>s.leaveHandler&&s.leaveHandler(...e))},[p("div",{class:"bar-block","data-active":i.dragging,onClick:t[0]||(t[0]=L((()=>{}),["prevent","stop"])),onMousedown:t[1]||(t[1]=(...e)=>s.blockDownHandler&&s.blockDownHandler(...e)),onMouseup:t[2]||(t[2]=(...e)=>s.blockUphandler&&s.blockUphandler(...e)),onMouseleave:t[3]||(t[3]=(...e)=>s.blockLeaveHandler&&s.blockLeaveHandler(...e)),onMouseenter:t[4]||(t[4]=(...e)=>s.blockEnterHandler&&s.blockEnterHandler(...e)),style:R({transform:"translateY("+i.scrollTop+"px)"})},[p("div",fs,u(s.timeStrFilter(i.scrollTitle)),1)],44,bs),c(p("div",{class:"bar-line",style:R({transform:"translateY("+i.lineTop+"px)"})},[p("div",ys,u(s.timeStrFilter(i.lineTitle)),1)],4),[[A,i.lineVisible]]),p("div",{class:"scroll-title","data-active":i.dragging},u(s.timeStrFilter(i.scrollTitle)),9,vs)],40,gs)}],["__scopeId","data-v-fd6b53fa"]]),Cs={props:["col","asyncData"],emits:["change"],data:()=>({options:[],loading:!1,current:[]}),methods:{async onMouseEnter(){this.loading=!0,this.options=[];try{this.options=await this.$props.asyncData(this.$props.col)}catch(e){}this.loading=!1},onModelValueChange(e){this.current=e,this.$emit("change",e)}},watch:{col:{handler(e){this.current=e.value},deep:!0}}},ks=["data-active"],Ss=(e=>(w("data-v-38fe99af"),e=e(),C(),e))((()=>p("div",null,null,-1)));let Ts=0,Ds=0;const Vs={props:["rowData","columnsDef","columnsFilter","from","filters"],emits:["toggleExpand","scrollRow","scrollAction","filterItem","colFilterChange","updatePadding","timeModeChange"],components:{RecycleScroller:T,FilterItem:s(Cs,[["render",function(e,t,a,l,i,s){const n=d("v-select");return h(),m("div",{class:"select-icon","data-active":i.current?.length>0,onMouseenter:t[0]||(t[0]=(...e)=>s.onMouseEnter&&s.onMouseEnter(...e))},[p("div",{class:"flt-er",style:R({width:e.$props.col.width+40+"px"})},[g(n,{loading:i.loading,options:i.options,dropdownShouldOpen:()=>!0,searchable:!0,modelValue:i.current,"onUpdate:modelValue":s.onModelValueChange,multiple:""},{"no-options":f((()=>[Ss])),_:1},8,["loading","options","modelValue","onUpdate:modelValue"])],4)],40,ks)}],["__scopeId","data-v-38fe99af"]])},created(){this.$_scrollTimer=0},data:()=>({isChildTit:!1,searchVal:"",isOpenSearch:!1,selectFilterList:[],showSelect:!1,curId:-1,filterChnItem:"",filterValItem:"",formData:{},filterList:{channel:"",canId:"",name:"",canType:"",dir:"",dlc:""},left:0,timeFilterOptions:[{label:"Time 绝对时间",value:"absolute"},{label:"Time 相对时间",value:"relative"},{label:"ΔTime 时间差",value:"diff"}],timeFilterMode:{label:"Time 绝对时间",value:"absolute"},selectionActive:!1}),computed:{fullWidth(){return"calc("+this.$props.columnsDef.map((e=>"number"==typeof e.width?e.width+"px":e.width)).join(" + ")+")"}},watch:{rowData:{handler(){if(this.selectionActive){this.selectionActive=!1;let e=window.getSelection();e.removeAllRanges(),e=null}setTimeout((()=>{console.log("updateVisibleItems"),this.$refs.scroller.updateVisibleItems(!0)}),0)},deep:!0},timeFilterMode(e){this.onTimeModelChange(e.value)}},methods:{onScrollX(e){this.left=-e.target.scrollLeft+"px"},onTableClick(e){if(e.target?.className?.includes?.("table-td")){this.selectionActive=!0;let t=window.getSelection();t.removeAllRanges();let a=document.createRange();a.selectNodeContents(e.target),t.addRange(a),t=a=null}},filterHex:e=>void 0===e?"":(e>=0?ne(e):e).toString().replace(/^(00)+/g,"")||"00",update(e,t,a,l){Ts=a,Ds=this.$props.rowData.length-l,this.$emit("updatePadding",{visibleStartIndex:a,visibleEndIndex:l})},searchInfo(){this.isOpenSearch=!1},onOpenSearch(){this.isOpenSearch=!0},scrollToBottom(){this.$refs.scroller?.scrollToItem(this.$props.rowData.length-1)},scrollToItem(e){this.$refs.scroller?.scrollToItem(e)},nativeScroll(){const e=this.$refs.scroller.$el;e.addEventListener("scroll",(e=>{if(clearTimeout(this.$_scrollTimer),this.selectionActive){this.selectionActive=!1;let e=window.getSelection();e.removeAllRanges(),e=null}this.$_scrollTimer=setTimeout((()=>{console.log("updateVisibleItems"),this.$refs.scroller.updateVisibleItems(!0)}),100)})),e.addEventListener("wheel",(e=>{this.$emit("scrollAction",{topPadding:Ts,bottomPadding:Ds}),e.deltaY>0||e.deltaX>0?Ds<=40&&this.$emit("scrollRow","down"):(e.deltaY<0||e.deltaX<0)&&Ts<=40&&this.$emit("scrollRow","up")}))},filterItem(e,t){this.filterChnItem=e,this.curId=t,this.$emit("filterItem"),this.selectFilterList=[],E.blfLogging.getFiltItems({selectItem:e,channel:"",canId:"",name:"",canType:"",dir:"",dlc:""}).then((e=>{let t=e.data.data;t.length>0&&t.forEach((e=>{e&&this.selectFilterList.push({value:e,label:e,selected:!1})}))}))},onChooseFilterItem(e,t){e.selected=!0,this.$emit("reDrawTable",e,t,this.selectFilterList)},onTimeModelChange(e){this.$emit("timeModeChange",e)}},mounted(){this.nativeScroll()}},xs=e=>(w("data-v-c5c2dfce"),e=e(),C(),e),Is={style:{position:"absolute",left:"0",top:"0",right:"0",bottom:"0",display:"inherit","flex-direction":"inherit","align-items":"inherit"}},Ls={key:1,class:"o-pul-time-option-warp"},Fs=xs((()=>p("div",{class:"table-header",style:{height:"32px","line-height":"32px"}},null,-1))),Rs=["data-even"],$s=["onMousedown"],Ms=["onMousedown"],Es=[xs((()=>p("span",{class:"container-tit",style:{width:"205px"}},"信号名",-1))),xs((()=>p("span",{class:"container-tit",style:{width:"200px"}},"信号物理值",-1))),xs((()=>p("span",{class:"container-tit",style:{width:"80px"}},"HEX",-1))),xs((()=>p("span",{class:"container-tit",style:{width:"calc(100vw - 487px)"}},"信号描述",-1)))],_s={class:"table-parent-tr o-table-expand-child"},Ns={class:"table-td",style:{width:"205px"}},As={class:"table-td",style:{width:"200px"}},Os={class:"table-td",style:{width:"80px"}},Ps={class:"table-td",style:{width:"calc(100vw - 487px)"}},Us=s(Vs,[["render",function(e,t,a,l,i,s){const n=d("FilterItem"),o=d("v-select"),r=d("RecycleScroller");return h(),m("div",{class:"table",onClick:t[2]||(t[2]=(...e)=>s.onTableClick&&s.onTableClick(...e))},[p("div",{class:"table-header",style:R({height:"32px",lineHeight:"32px",transform:"translateX("+i.left+")",width:s.fullWidth,position:"absolute",zIndex:1})},[p("div",Is,[(h(!0),m(b,null,S(e.$props.columnsDef,((a,l)=>(h(),m("div",{class:"header-tit",key:l,style:R({width:a.width>0?a.width+"px":a.width})},[p("span",null,u(a.titName),1),a.filterShow?(h(),N(n,{key:0,onChange:t=>e.$emit("colFilterChange",{keyName:a.keyName,value:t}),col:a,asyncData:e.$props.columnsFilter},null,8,["onChange","col","asyncData"])):v("",!0),"timestamp"==a.keyName||"diff"==a.keyName||"deltaTime"==a.keyName?(h(),m("div",Ls,[g(o,{options:i.timeFilterOptions,clearable:!1,searchable:!1,label:"label",value:"value",modelValue:i.timeFilterMode,"onUpdate:modelValue":t[0]||(t[0]=e=>i.timeFilterMode=e),class:"canoe-frame-vselect"},null,8,["options","modelValue"])])):v("",!0)],4)))),128))])],4),Fs,g(r,{items:e.$props.rowData,"item-size":24,"key-field":"id",emitUpdate:!0,onUpdate:s.update,ref:"scroller",class:"frame-class"},{default:f((({item:t,index:a})=>[t.isParent?(h(),m("div",{key:0,class:"table-parent-tr","data-even":a%2==0,style:R({transform:"translateX("+i.left+")",width:s.fullWidth})},[(h(!0),m(b,null,S(e.$props.columnsDef,(l=>(h(),m("div",{class:"table-td",style:R({width:"number"==typeof l.width?l.width+"px":l.width}),key:l.keyName},[l.custom?(h(),m(b,{key:0},[t.isExpand&&t.isParent&&t.name?(h(),m("i",{key:0,class:"collapse-icon",onMousedown:L((t=>e.$emit("toggleExpand",a)),["stop","prevent"])},null,40,$s)):v("",!0),!1===t.isExpand&&t.isParent&&t.name?(h(),m("i",{key:1,class:"expand-icon",onMousedown:L((t=>e.$emit("toggleExpand",a)),["stop","prevent"])},null,40,Ms)):v("",!0)],64)):(h(),m(b,{key:1},[y(u(l.displayMap?l.displayMap(t[l.keyName]):t[l.keyName]),1)],64))],4)))),128))],12,Rs)):(h(),m(b,{key:1},[t.isChildTit?(h(),m("div",{key:0,class:"table-header o-table-expand-child",style:R({transform:"translateX("+i.left+")",width:s.fullWidth})},Es,4)):(h(),m("div",{key:1,class:"table-parent",style:R({transform:"translateX("+i.left+")",width:s.fullWidth})},[p("div",_s,[p("span",Ns,u(t.name),1),p("span",As,u(t.value),1),p("span",Os,u(s.filterHex(t.hex)),1),p("span",Ps,u(t.comment),1)])],4))],64))])),_:1},8,["items","onUpdate"]),p("div",{class:"table-scroll-x",onScroll:t[1]||(t[1]=(...e)=>s.onScrollX&&s.onScrollX(...e))},[p("div",{class:"table-scroll-x-bar",style:R({width:s.fullWidth})},null,4)],32)])}],["__scopeId","data-v-c5c2dfce"]]),Hs=s({beforeMount(){console.log("this.params",this.params)},methods:{onExpand(){console.log("this.params.data",this.params.data),!1===this.params.data.isExpand?(this.params.node.setDataValue("isExpand",!0),this.params.api.applyTransactionAsync({add:[JSON.parse(this.params.data.parsedData)],addIndex:this.params.rowIndex+1})):(this.params.node.setDataValue("isExpand",!1),this.params.api.applyTransactionAsync({remove:this.params.api.getRowNode(this.params.rowIndex+1)})),this.params.api.redrawRows()}}},[["render",function(e,t,a,l,i,s){return h(),m("div",null,[e.params.data.isExpand?(h(),m("i",{key:0,class:"expand-icon",onClick:t[0]||(t[0]=(...e)=>s.onExpand&&s.onExpand(...e))})):(h(),m("i",{key:1,class:"collapse-icon",onClick:t[1]||(t[1]=(...e)=>s.onExpand&&s.onExpand(...e))})),p("span",null,u(e.params.value),1)])}]]),Bs={methods:{onClick(){}}},js=[O('<table><thead class="o-table-thead"><tr><th class="o-table-cell">信号</th><th class="o-table-cell o-cell-ar">信号物理值</th><th class="o-table-cell o-cell-ar">信号描述</th></tr></thead><tbody class="o-table-tbody"></tbody></table>',1)];let qs,zs=0,Ks=0,Ws=0,Gs=0;const Xs={props:["store","closeFlag","recentTest","connectStatus","colFilterShow","channelOne","channelTwo","channelThree","linChannelVal","linChannelValTwo","filePath","dbcVal","startTime"],emits:["updateBock","updateTimeData","recordTimeChange","startTimeChange"],components:{Button:l,Message:i,ScrollBar:ws,ExpandInfo:Hs,FullWidthCellRenderer:s(Bs,[["render",function(e,t,a,l,i,s){return h(),m("div",{onClick:t[0]||(t[0]=(...e)=>s.onClick&&s.onClick(...e))},js)}]]),TableRecycleScroller:Us,CopyPath:ae,ButtonGroup:se},data(){return{expandKeys:new Set,visibleStartIndex:0,visibleEndIndex:0,bottomPadding:0,recordLoading:!1,mode:"all",sliderValue:-1,comments:["","","","","","","","","","","","","","","",""],message:{visible:!1,level:"",content:""},seconds:0,timeFilterModeVal:"absolute",rowData:[],isRecording:!1,startSqlId:0,endSqlId:0,isLock:!1,isScrollEnd:!0,isAddData:!0,secondConfirm:!1,topLock:!1,bottomLock:!1,openFlag:!1,mlist:[{key:"lookRecord",name:"帧查看",icon:"box"},{key:"supeRecord",name:"图像查看",icon:"setting"}],cur:"lookRecord",recordShow:!0,colorList:["blue","cerulean","cyan","green","lime","purple","pink","red","orange","yellow"],columnsDef:[{titName:"",width:30,keyName:"id",type:"number",value:[],filterShow:!1,custom:!0},{titName:"",width:164,keyName:"diff"===this.timeFilterModeVal?"single"===this.mode?"deltaTime":"diff":"timestamp",type:"number",value:[],filterShow:!1,displayMap:e=>{let t=parseFloat(e);switch(this.timeFilterModeVal){case"diff":return t.toFixed(6);case"absolute":return new Date(1e3*t).toLocaleString("zh-Hans-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,hourCycle:"h23",timeZone:"Asia/Shanghai"});case"relative":return(e-this.startTime).toFixed(6);default:return e}}},{titName:"Chn",width:60,keyName:"channel",type:"number",value:[],filterShow:!0},{titName:"ID",width:60,keyName:"linId",type:"number",value:[],filterShow:!0,displayMap:e=>"0x"+e.toString(16)},{titName:"NAME",width:200,keyName:"name",type:"string",value:[],filterShow:!0},{titName:"checksum",width:80,keyName:"checksum",type:"string",value:[],filterShow:!1,displayMap:e=>"0x"+e.toString(16)},{titName:"Dir",width:60,keyName:"dir",type:"string",value:[],filterShow:!0},{titName:"Dlc",width:60,keyName:"dlc",type:"number",value:[],filterShow:!0},{titName:"DATA",width:1380,keyName:"data",type:"string",value:[],filterShow:!1,displayMap:e=>e.map((e=>e.toString(16).padStart(2,"0"))).join(" ")}]}},watch:{mode(e,t){this.topPadding=0,this.$refs.table.scrollToItem(0),this.expandKeys.clear(),this.rowData=[],this.isRecording&&this.resumeScroll()},filePath(){this.$emit("updateBock",{filePath:this.filePath,dbcVal:this.dbcVal,recordLoading:this.recordLoading,isRecording:this.isRecording})},dbcVal(){this.$emit("updateBock",{filePath:this.filePath,dbcVal:this.dbcVal,recordLoading:this.recordLoading,isRecording:this.isRecording})},recordLoading(){this.$emit("updateBock",{filePath:this.filePath,dbcVal:this.dbcVal,recordLoading:this.recordLoading,isRecording:this.isRecording})},isRecording(){this.$emit("updateBock",{filePath:this.filePath,dbcVal:this.dbcVal,recordLoading:this.recordLoading,isRecording:this.isRecording})},colComputed(){this.columnsDef[1]={titName:"",width:164,keyName:"diff"===this.timeFilterModeVal?"single"===this.mode?"deltaTime":"diff":"timestamp",type:"number",value:[],filterShow:!1,displayMap:e=>{let t=parseFloat(e);switch(this.timeFilterModeVal){case"diff":return t.toFixed(6);case"absolute":return new Date(1e3*t).toLocaleString("zh-Hans-CN",{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23",timeZone:"Asia/Shanghai"})+"."+t.toFixed(6).split(".")[1];case"relative":return(e-this.startTime).toFixed(6);default:return e}}}}},computed:{colComputed(){return this.timeFilterModeVal+this.startTime+this.mode},recordTime(){return new Date(0,0,0,0,0,this.seconds).toLocaleTimeString()},showData(){let e={mode:"all"};return this.columnsDef.forEach((t=>{t.filterShow&&(e[t.keyName]=(t.value||[]).map((e=>e.value)))})),e},diffRowData(){return this.rowData.map(((e,t,a)=>({...e,diff:0===t?0:a[t].timestamp-a[t-1].timestamp})))}},methods:{choose(e){this.cur=e,this.recordShow="supeRecord"!=e},async colFilter(e){console.log("col111",e);const t="name"===e.keyName?null:"";let a,l={selectItem:e.keyName,...this.showData,[e.keyName]:t};console.log("params222",l);try{a=await await E.blfLogging.getFiltItemsLin(l)}catch(i){}return(a?.data?.data||[]).map((t=>({value:t,label:"linId"===e.keyName?"0x"+t.toString(16):""===t?" 空":t}))).sort(((t,a)=>("number"===e.type?+t.value>+a.value:t.value>a.value)?1:-1))},startRecord(){clearInterval(Gs),this.checkHardware(),this.isLock=!1,this.columnsDef=this.columnsDef.map((e=>({...e,value:[]})))},async checkHardware(){this.recordLoading=!1,this.secondConfirm=!1,clearInterval(Gs),this.isRecording=!0,this.resumeScroll()},async startLogging(){this.seconds=0,this.rowData=[],this.$emit("startTimeChange",Date.now()/1e3),Gs=setInterval((()=>{this.seconds=Date.now()/1e3-this.startTime}),1e3),this.$emit("recordTimeChange",this.recordTime),parseInt(this.channelOne),parseInt(this.channelTwo),parseInt(this.channelThree),parseInt(this.linChannelVal),parseInt(this.linChannelValTwo),this.channelOne.split("-").pop(),this.channelTwo.split("-").pop(),this.channelThree.split("-").pop();let e=this.filePath.replace(".blf","-"+_()+".blf");console.log(e)},showMessage({level:e,content:t,timeout:a}){clearTimeout(zs),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(zs=setTimeout((()=>{this.message.visible=!1}),a))},showLoggingMessage(){console.log("23333"),clearTimeout(Ws),qs=async()=>{let e;this.showData.mode=this.mode;try{e=await E.blfLogging.showLoggingMessageLin({...this.showData})}catch(a){}if(!e)return;let t=e?.data?.frame_data||[];if(console.log("eventData",t),!this.isLock&&t?.length>0)if("all"===this.mode){let e=t[0].sqlId,a=t[t.length-1].sqlId;t.forEach((e=>{e.isExpand=!1,e.isParent=!0,e.id=""+e.sqlId,e.canId=e.arbitrationId,delete e.arbitrationId})),this.startSqlId=e,this.endSqlId=a,Ks=t[t.length-1].timestamp,this.rowData=t,this.$refs.table.scrollToBottom(),this.isAddData&&(this.sliderValue=e/a*(Ks-this.startTime)*1e3)}else"single"===this.mode&&(t.forEach((e=>{console.log("ele111",e),e.isExpand=!1,e.isParent=!0,e.id=""+e.sqlId,e.canId=e.arbitrationId,delete e.arbitrationId})),t=t.sort(((e,t)=>e.channel===t.channel?e.linId-t.linId:e.channel-t.channel)),console.log("finevent",t),await this.drawExpandRows(t),this.rowData=t);this.$emit("updateTimeData",e.data.signal_data),this.isRecording?Ws=setTimeout((()=>{requestAnimationFrame(qs)}),400):clearTimeout(Ws),this.$emit("recordTimeChange",this.recordTime)},qs()},async drawExpandRows(e){const t="-",a={};console.log("1233event"),this.rowData.slice().sort(((e,a)=>{const l=e.id,i=a.id;return!~l.indexOf(t)&&~i.indexOf(t)?-1:~l.indexOf(t)&&!~i.indexOf(t)?1:~l.indexOf(t)||~i.indexOf(t)?l>i?1:l<i?-1:0:e.channel<a.channel?-1:e.channel>a.channel?1:e.canId-a.canId})),e.forEach((e=>{const l=e.channel+"-"+e.canId;if(~e.id.indexOf(t))a[l].children.push(e);else{const t=a[l]?.children||[];a[l]=e,a[l].children=this.expandKeys.has(l)?t:[]}}));let l=this.rowData.slice();for(let s=this.visibleEndIndex;s>=this.visibleStartIndex;s--){if(!l?.[s])continue;let e=null,t=0;if(l[s].isParent)e=l[s],t=s;else if(s===this.visibleStartIndex)for(let a=s;a>=0;a--)if(l[a].isParent){e=l[a],t=a;break}if(e){const i=e.channel+"-"+e.canId;if(this.expandKeys.has(i)){const e=await this.onToggleExpand(t,l,!0);e?.length&&(a[i].children=e)}}}const i=[];for(let s in a){const e=a[s],t=e.children;delete e.children,t.length&&(e.isExpand=!0),i.push(e),t.forEach((e=>{i.push(e)}))}this.rowData=i},getSelectData(e){let t="",a="",l="";switch(console.log("向下"),e){case"up":l=this.startSqlId;break;case"down":a=this.endSqlId;break;case"pick":clearTimeout(Ws),t=this.sliderValue/1e3+this.startTime}E.blfLogging.selectDataLin({moreThanTimeStamp:t,lessThanTimeStamp:"",moreThanSqlID:a,lessThanSqlID:l,...this.showData,sqlId:"",numbers:100}).then((t=>{if(t?.data?.data?.length>0){let a=t.data.data;switch(a.forEach((e=>{e.isExpand=!1,e.isParent=!0,e.id=e.sqlId,e.canId=e.arbitrationId,delete e.arbitrationId})),e){case"up":this.rowData=a.concat(...this.rowData),this.$refs.table.scrollToItem(t.data.data.length-1),this.sliderValue=1e3*(t.data.data[0].timestamp-this.startTime),t.data.startSqlId&&(this.startSqlId=t.data.startSqlId);break;case"down":this.rowData=this.rowData.concat(...a),t.data.endSqlId&&(this.endSqlId=t.data.endSqlId);break;case"pick":this.startSqlId=t.data.startSqlId,this.endSqlId=t.data.endSqlId,this.rowData=a,this.sliderValue=1e3*(t.data.data[0].timestamp-this.startTime)}}})).finally((()=>{this.topLock=!1,this.bottomLock=!1}))},onUpdatePadding(e){this.visibleStartIndex=e.visibleStartIndex,this.visibleEndIndex=e.visibleEndIndex},onTimeModeChange(e){this.timeFilterModeVal=e},onScrollAction(e){this.isLock||("all"===this.mode?this.isLock=!0:this.isLock=!1,this.isScrollEnd=!1)},onBodyScrollEnd(e){"single"!==this.mode&&("up"===e&&!1===this.topLock&&(this.topLock=!0,this.getSelectData(e)),"down"===e&&!1===this.bottomLock&&(this.bottomLock=!0,this.getSelectData(e)))},onClicked(){this.isLock=!1,this.isScrollEnd=!1},resumeScroll(){this.isScrollEnd=!0,this.isAddData=!0,this.isLock=!1,this.showLoggingMessage()},async onToggleExpand(e,t,a){const l=t.map((e=>({...e}))),i=l[e],s=i.channel+"-"+i.canId;let n=parseInt(this.linChannelVal)||0,o=parseInt(this.linChannelValTwo)||0;if(a||!i.isExpand){this.expandKeys.add(s);const t=await E.blfLogging.parsedSignalLin({channel:i.channel,linId:""+i.linId,ldfChn:[n,o],linData:(i.data||[]).map((e=>e.toString(16)))});let d=t?.data.sort(((e,t)=>e.name<t.name?-1:1))||[],r=i.sqlId;if(d.forEach(((e,t)=>{e.channel=i.channel,e.canId=""+i.canId,e.isParent=!1,e.isExpand=!0,e.isChildTit=!1,e.id=r+"-"+e.name})),d.unshift({channel:i.channel,canId:""+i.canId,isParent:!1,isExpand:!0,isChildTit:!0,id:r+"-"}),l.splice(e+1,0,...d),i.isExpand=d.length,a)return d;this.rowData=l}else this.expandKeys.delete(s),l.splice(e+1,l[e].isExpand),l[e].isExpand=!1,this.rowData=l},onSliderChange(e){this.isScrollEnd=!1,this.isAddData=!1,this.isLock=!0,this.getSelectData("pick")},onFilterItem(){this.openFlag=!this.openFlag},onColFilterChange(e){let t=this.columnsDef.find((t=>e.keyName===t.keyName));t&&(t.value=e.value),this.resumeScroll()}},mounted(){},unmounted(){qs=null,clearTimeout(Ws),clearInterval(Gs)}},Ys=e=>(w("data-v-3aaf4f1e"),e=e(),C(),e),Js={class:"o-pul-er"},Qs={key:0},Zs=Ys((()=>p("div",{class:"o-pul-title"},"报文录制配置",-1))),en={class:"o-pul-p-wrap"},tn={class:"o-pul-p"},an={class:"record-header-message"},ln=Ys((()=>p("b",null,"车型/DBC：",-1))),sn=["v-tooltip"],nn=[Ys((()=>p("b",null,"保存目录：",-1)))],on={class:"o-pul-path"},dn={class:"o-pul-p-wrap"},rn={class:"o-pul-p"},cn={class:"record-header-message"},hn=Ys((()=>p("b",null,"Lin通道1：",-1))),mn={class:"record-header-message"},pn=Ys((()=>p("b",null,"Lin通道2：",-1))),un={class:"o-pul-btn-wrap"},gn=Ys((()=>p("div",{class:"tool-btn-wrap"},[p("i",{class:"warn-icon"}),p("div",{class:"tool-picker-contianer-wrap"},"录制将覆盖文件,确认要开始录制吗?")],-1))),bn=Ys((()=>p("div",{class:"tool-picker-arrow"},null,-1))),fn={class:"tool-picker-footer-wrap"},yn={class:"o-dialog-footer"},vn=Ys((()=>p("div",{class:"o-pul-hr"},null,-1))),wn={class:"o-table-wrap"},Cn=s(Xs,[["render",function(e,t,a,l,i,s){const n=d("CopyPath"),o=d("Button"),w=d("ButtonGroup"),C=d("ScrollBar"),k=d("TableRecycleScroller"),S=d("Message"),T=r("tooltip"),D=r("esc");return h(),m(b,null,[p("div",Js,[i.recordShow?(h(),m("div",Qs,[Zs,p("div",en,[p("div",tn,[p("span",an,[ln,y(u(a.dbcVal),1)]),p("span",{class:"record-header-message",style:{width:"71px"},"v-tooltip":a.filePath},nn,8,sn),p("span",on,[g(n,{path:a.filePath,length:60,full:!0},null,8,["path"])])])]),p("div",dn,[p("div",rn,[c((h(),m("span",cn,[hn,y(u(a.linChannelVal),1)])),[[T,a.linChannelVal]]),c((h(),m("span",mn,[pn,y(u(a.linChannelValTwo),1)])),[[T,a.linChannelValTwo]])])]),p("div",un,[i.secondConfirm?c((h(),m("div",{key:0,class:"tool-picker-wrap",onClick:t[1]||(t[1]=L((()=>{}),["stop"]))},[gn,bn,p("div",fn,[p("div",yn,[g(o,{class:"small-btn",style:{width:"30px"},onClick:t[0]||(t[0]=L((e=>i.secondConfirm=!1),["stop"]))},{default:f((()=>[y("取消")])),_:1}),g(o,{class:"small-btn",type:"primary",style:{width:"30px",margin:"0 0 0 10px"},onClick:L(s.checkHardware,["stop"])},{default:f((()=>[y("确定")])),_:1},8,["onClick"])])])])),[[D,()=>e.$emit("cancel")]]):v("",!0),y("   "),g(w,{options:[{label:"普通",value:"all"},{label:"单帧",value:"single"}],class:"theme-btn-group",modelValue:i.mode,"onUpdate:modelValue":t[2]||(t[2]=e=>i.mode=e)},null,8,["modelValue"])]),vn,p("div",wn,[g(C,{modelValue:i.sliderValue,"onUpdate:modelValue":t[3]||(t[3]=e=>i.sliderValue=e),disable:"all"!==i.mode,startTime:1e3*a.startTime,start:0,end:1e3*i.seconds,onChange:s.onSliderChange,timeFilter:"relative"!=i.timeFilterModeVal?"absolute":"relative"},null,8,["modelValue","disable","startTime","end","onChange","timeFilter"]),g(k,{rowData:s.diffRowData,filters:s.showData,columnsDef:i.columnsDef,onToggleExpand:t[4]||(t[4]=e=>s.onToggleExpand(e,i.rowData)),onScrollRow:s.onBodyScrollEnd,onScrollAction:s.onScrollAction,onFilterItem:s.onFilterItem,onClick:s.onClicked,columnsFilter:s.colFilter,openFlag:i.openFlag,onColFilterChange:s.onColFilterChange,ref:"table",onUpdatePadding:s.onUpdatePadding,onTimeModeChange:s.onTimeModeChange,style:{height:"100%"}},null,8,["rowData","filters","columnsDef","onScrollRow","onScrollAction","onFilterItem","onClick","columnsFilter","openFlag","onColFilterChange","onUpdatePadding","onTimeModeChange"]),c(p("div",{class:"scrollToBottomBtn",onClick:t[5]||(t[5]=L((e=>s.resumeScroll()),["stop"]))},null,512),[[A,i.isLock&&"all"===i.mode],[T,"恢复向下滚动",void 0,{left:!0}]])])])):v("",!0)]),g(S,{message:i.message},null,8,["message"])],64)}],["__scopeId","data-v-3aaf4f1e"]]);let kn=[],Sn=0;const Tn={class:"chs-er",ref:"root"},Dn={class:"chs-list-er","data-loading":!1},Vn=["onClick"],xn=["id","onUpdate:modelValue","data-indeterminate"],In=["innerHTML"],Ln=["for"],Fn=["id","onUpdate:modelValue","data-indeterminate"],Rn=["innerHTML"],$n={class:"footer"},Mn=s({props:["filledOptions","checkedOptions"],emits:["connect","showMessage","getCarCode","cancel","signalsChange"],components:{Button:l,RecycleScroller:T,Spin:K,Message:i},data(){const e=this.$ls.get("blfread_sdbData")||[];if("custom"===this.carType){let t=e.find((e=>e.sdb===this.sdb))?.comments;t&&(kn=["",...t])}else kn=n.DEFAULT.find((e=>e.value===this.$props.carType))?.children.find((e=>e.value===this.$props.sdb))?.comments||[];return kn=kn.map(((e,t)=>`${"⓪①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳㉑㉒㉓㉔㉕㉖㉗㉘㉙㉚㉛㉜㉝㉞㉟㊱㊲"[t]}${e}`)),{inputStr:"",checkedList:[],selectNodeList:[],counter:0,sdbCustom:e,lodingSpin:!1,isFlag:1,message:{visible:!1,level:"",content:""},listOpen:[],expandKeys:new Set([])}},computed:{list(){this.checkedList=this.$props.checkedOptions;let e=[],t=this,a=this.$props.filledOptions.data;for(let s in a){let l;l={_id:+s,id:+s,text:kn[s],node_type:"channel",children:[],set checked(e){l.children.forEach((t=>{t.checked=e}))},get checked(){return!l.children.some((e=>0==e.checked))},get indeterminate(){return l.children.some((e=>e.checked))&&l.children.some((e=>!e.checked))}};for(let e in a[s]){let i;i={_id:s+"_"+e,id:s+"_"+e,text:"-1"==e?"":e,node_type:"msg",channel:l.id,set checked(e){e?t.checkedList.push(i):t.checkedList=t.checkedList.filter((e=>!(e._id===i._id)))},get checked(){return t.checkedList.some((e=>e._id===i._id))},children:a[s][e].map((t=>{let a;return a={_id:s+"_"+e+"_"+t[0],id:t[0],msg:"-1"==e?"-1":+e.match(/0x\w+/)?.[0]||e,channel:l.id,text:t[0],node_type:"signal",comment:t[1],remark:t[2],canId:t[3],rawValue:t[4],maxRaw:t[5],minRaw:t[6],maxPhys:t[7],minPhys:t[8],selectPhys:t[9],unit:t[10],startBit:t[11],length:t[12],physStep:t[13],dlc:t[14],canType:t[15],periodic:t[16],eteDisable:t[17]},a}))},l.children.push(i)}e.push(l)}let l=[];for(let s=0;s<e.length;s++){let t=e[s];if(-1!=t.id&&l.push(t),this.inputStr||this.expandKeys.has(t.id))for(let e=0;e<t.children.length;e++){let a=t.children[e];"-"!=a.id[0]&&l.push(a)}}if(this.inputStr.length>0){const e=this.inputStr.toLowerCase();let t;try{t=new RegExp(e,"i")}catch(i){t={test:e=>~e.toLowerCase().indexOf(e.toLowerCase())}}l=l.filter((e=>t.test(e.text)||e.comment&&t.test(e.comment)||e.remark&&t.test(e.remark)))}return l}},watch:{checkedListIndex:{handler(e){this.checkedList=[]},deep:!0}},mounted(){this.$refs.chsInputRef.focus(),setTimeout((()=>{document.body.addEventListener("mousedown",this.clickHandler)}),300)},beforeUnmount(){},unmounted(){document.body.removeEventListener("mousedown",this.clickHandler)},methods:{clickHandler(e){0==this.$refs.root?.contains(e.target)&&this.$emit("cancel")},showFirstChild(e){this.expandKeys.has(e.id)?this.expandKeys.delete(e.id):this.expandKeys.add(e.id)},clearTable(){this.checkedList=[]},title4node:e=>Q(e),showMessage({level:e,content:t,timeout:a}){clearTimeout(Sn),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(Sn=setTimeout((()=>{this.message.visible=!1}),a))},submit(){this.checkedList.length>80?this.showMessage({level:"error",content:"信号选择不能超过80项",timeout:3e3}):this.$emit("signalsChange",this.checkedList)},highlightWord(e){if(!e)return e;const t=this.inputStr;if(!t)return e;const a=t.split(/\s+/g);var l,i,s=a.length;for(l=0;l<s;l++)try{(i=new RegExp(a[l],"gi")).test(e)&&(e=e.replace(i,"<strong>$&</strong>"))}catch(n){i=a[l],e=e.replace(i,"<strong>$&</strong>")}return e}}},[["render",function(e,t,a,l,i,s){const n=d("RecycleScroller"),o=d("Message"),u=r("tooltip"),b=r("esc");return c((h(),m("div",Tn,[c(p("input",{class:"chs-input-er",placeholder:"搜索信号名称/信号描述",ref:"chsInputRef","onUpdate:modelValue":t[0]||(t[0]=e=>i.inputStr=e),onInput:t[1]||(t[1]=(...t)=>e.onChange&&e.onChange(...t)),draggable:!1},null,544),[[I,i.inputStr]]),p("div",Dn,[g(n,{class:"chs-list",items:s.list,"item-size":28,"key-field":"_id"},{default:f((({item:e})=>[p("label",null,["channel"==e.node_type&&e.id<=36?(h(),m("div",{key:0,style:{"margin-left":"1px"},class:F(!i.inputStr&&i.expandKeys.has(e.id)?"switch-open":"switch-close"),onClick:L((t=>s.showFirstChild(e)),["stop","prevent"])},null,10,Vn)):v("",!0),"channel"==e.node_type&&e.id<=36?c((h(),m("input",{key:1,style:{"margin-left":"3px"},id:e._id,type:"checkbox","onUpdate:modelValue":t=>e.checked=t,"data-indeterminate":e.indeterminate,"click.stop":""},null,8,xn)),[[U,e.checked]]):v("",!0),"channel"==e.node_type&&e.id<=36?(h(),m("span",{key:2,class:"chs-node",innerHTML:s.highlightWord(e._id)},null,8,In)):"msg"==e.node_type?c((h(),m("div",{key:3,for:e.children,style:{"text-indent":"2em","margin-left":"-15px"},class:"chs-node chs-node-item"},[c(p("input",{id:e._id,type:"checkbox","onUpdate:modelValue":t=>e.checked=t,"data-indeterminate":e.indeterminate,"click.stop":""},null,8,Fn),[[U,e.checked]]),p("span",{class:"",innerHTML:s.highlightWord(e.text)},null,8,Rn)],8,Ln)),[[u,{content:s.title4node(e),html:!0},void 0,{right:!0}]]):v("",!0)])])),_:1},8,["items"])]),p("div",$n,[p("div",{class:"chs-btn confirm",onClick:t[2]||(t[2]=(...e)=>s.submit&&s.submit(...e))},"确认"),p("div",{class:"chs-btn cancel",onClick:t[3]||(t[3]=(...e)=>s.clearTable&&s.clearTable(...e))},"重置")]),g(o,{message:i.message},null,8,["message"])])),[[b,()=>e.$emit("cancel")]])}],["__scopeId","data-v-f8a77322"]]),En=["data-forbidden","data-disabled"],_n=s({props:["disabled"],data:()=>({editable:!1}),methods:{clickBody(e){if(this.$props.disabled)return;this.editable=!0,e.target.children?.[0]?.focus(),console.log("e.target111",e.target);let t=e=>{e.target&&(e.target==this.$refs.root||this.$refs.root?.contains(e.target))?this.editable=!0:e.target&&(this.editable=!1,document.body.removeEventListener("mousedown",t))};document.body.addEventListener("mousedown",t)}},mounted(){}},[["render",function(e,t,a,l,i,s){return h(),m("div",{ref:"root",class:"ewer","data-forbidden":e.$props.disabled,"data-disabled":!i.editable,onClick:t[0]||(t[0]=(...e)=>s.clickBody&&s.clickBody(...e))},[H(e.$slots,"default")],8,En)}]]),Nn=["data-hi"],An=s({props:["modelValue","min","max","watch"],emits:["update:modelValue","change","error"],data:()=>({str:"",type:16,highlight:!1}),watch:{modelValue:{handler(e,t){null!=t&&parseFloat(e)!==parseFloat(t)&&this.$props.watch&&(this.highlight=!0,setTimeout((()=>{this.highlight=!1}),500));let a="0x0";try{a="0x"+(parseInt(e)||0).toString(16)}catch(l){}this.str=a,this.type=16},immediate:!0}},methods:{onChange(e){let t=e.target.value;if(!this.valid(t.toString()))return this.str="0x"+(parseInt(this.$props.modelValue)||0).toString(16),void this.$emit("error",t);let a=10===this.type?parseInt(t):parseInt("0x"+t.replace("0x",""),16);a<this.min?a=+this.min:a>this.max&&(a=+this.max),this.str="0x"+a.toString(16),this.$emit("update:modelValue",a),this.$emit("change",a)},valid(e){return 16==this.type?/^(0x)?[0-9a-fA-F]+$/.test(e):/\d+/.test(e)}}},[["render",function(e,t,a,l,i,s){return c((h(),m("input",{class:"input","data-hi":i.highlight,type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.str=e),onChange:t[1]||(t[1]=L(((...e)=>s.onChange&&s.onChange(...e)),["prevent"])),onKeydown:t[2]||(t[2]=B(L(((...e)=>s.onChange&&s.onChange(...e)),["stop","prevent"]),["enter"]))},null,40,Nn)),[[I,i.str,void 0,{lazy:!0}]])}],["__scopeId","data-v-c34f5797"]]),On=["data-hi","min","max","step"],Pn={key:0,class:"ic-down"},Un=["data-hi","value"],Hn=["value"],Bn=s({props:["min","max","step","modelValue","enum","watch","class"],emits:["update:modelValue","change"],data:()=>({str:"",highlight:!1}),computed:{enumOpts(){return Object.entries(this.$props.enum)}},watch:{modelValue:{handler(e,t){null!=t&&parseFloat(e)!==parseFloat(t)&&this.$props.watch&&(this.highlight=!0,setTimeout((()=>{this.highlight=!1}),500)),this.str=e?.[0]>="A"?this.enumOpts.find((t=>+t[1]==+e))?.[0]||"":parseFloat(e)},immediate:!0}},methods:{onChange(e){let t=parseFloat(e.target.value),a=parseFloat(this.min),l=parseFloat(this.max);console.log(t,this.min,this.max),t<a?t=a:t>l&&(t=l),this.str=t.toString(),this.$emit("update:modelValue",t),this.$emit("change",t)}}},[["render",function(e,t,a,l,i,s){return h(),m(b,null,[c(p("input",{class:F(["input",e.$props.class]),type:"number","data-hi":i.highlight,min:a.min,max:a.max,step:a.step,"onUpdate:modelValue":t[0]||(t[0]=e=>i.str=e),onChange:t[1]||(t[1]=(...e)=>s.onChange&&s.onChange(...e)),style:R({width:s.enumOpts.length?"40%":""})},null,46,On),[[I,i.str,void 0,{lazy:!0}]]),s.enumOpts.length?(h(),m("i",Pn)):v("",!0),s.enumOpts.length?(h(),m("select",{key:1,"data-hi":i.highlight,class:"select",value:i.str,onChange:t[2]||(t[2]=(...e)=>s.onChange&&s.onChange(...e))},[(h(!0),m(b,null,S(s.enumOpts,(e=>(h(),m("option",{value:e[0]},u(e[1]),9,Hn)))),256))],40,Un)):v("",!0)],64)}],["__scopeId","data-v-c91a7f13"]]);let jn=0;const qn={props:["store","setStore"],components:{Button:l,Message:i,ChooseSignal:Mn,EditWrapper:_n,InputHex:An,InputOrSelect:Bn},data:()=>({hexMultiValue:0,isHexMulti:!1,hexs:[],frames:[],listTable:{cols:[{label:"",width:"2.8em",icon:"add"},{label:"Frame Name",width:"auto"},{label:"E2E",width:"6em",type:"checkbox",checked:!1},{label:"Period (ms)",width:"9em",tooltip:{content:"1-1000ms:周期发送<br/>0:单点发送",html:!0}},{label:"ID",width:"4.5em",tooltip:"DBC导入禁止修改ID"},{label:"Channel",width:"6em"},{label:"Type",width:"6em"},{label:"DLC",width:"4em"},{label:"",width:"5em"}]},sigTable:{cols:[{label:"Signal Name",width:"auto"},{label:"Raw",width:"90px"},{label:"Phys",width:"200px"},{label:"Unit",width:"4em"}]},cur:-1,chooseSignalShow:!1,filledOptions:[],isSyncFrames:!1,addRecordShow:!1,message:{visible:!1,level:"",content:""},curChannel:0}),computed:{checkedOptions(){return this.frames.filter((e=>"dbc"==e.from))},checkIndeterminate(){return this.frames.some((e=>e.e2e))&&this.frames.some((e=>!e.e2e))},allChecked(){return this.frames.some((e=>e.e2e))&&this.frames.some((e=>e.children[0].eteDisable))}},watch:{"$props.store.sendRecord.isRecording":{handler(e){e&&this.updateMultiFrame(this.frames.map(((e,t)=>({...e,row:t+1}))),"add")}},"$props.store.sendRecord.dbc.dbcChn":{handler(e,t){}},"$props.store.sendRecord":{handler(e,t){}},frames:{async handler(e,t){if(this.isSyncFrames)return;this.isSyncFrames=!0,this.isHexMulti=!1;for(let i=0;i<e.length;i++){let t=e[i],a=t.channel;console.log("sendframe.dbcChannel07041553",a);let l=t.canId;console.log("sendframe.dirty07041441",t.dirty),"raw"===t.dirty?(await E.blfLogging.getRawValueToPhysValue({dbcChannel:a,canId:l,signalsData:t.children}).then((e=>{this.frames[i]={...t,rawData:e.data.data.rawData,children:t.children.map((t=>({...t,physValue:e.data.data.signalsData.find((e=>e.name===t.id))?.physValue??t.physValue}))),dirty:!1,raw:i+1},this.updateMultiFrame([{row:i+1,...this.frames[i]}],"modify")})).catch(console.log),await P(100)):"data"===t.dirty?(console.log("sendframes[i]07051410",t),"dbc"===t.from?await E.blfLogging.getDataToValues({dbcChannel:a,canId:l,rawData:t.rawData}).then((e=>{this.frames[i]={...t,children:t.children.map((t=>({...t,physValue:e.data.data.signalsPhysData.find((e=>e.name===t.id))?.physValue??t.physValue,rawValue:e.data.data.signalsRawData.find((e=>e.name===t.id))?.rawValue??t.rawValue}))),dirty:!1,raw:i+1},this.updateMultiFrame([{row:i+1,...this.frames[i]}],"modify")})).catch(console.log):(this.frames[i]={...t,dirty:!1,raw:i+1},this.updateMultiFrame([{row:i+1,...this.frames[i]}],"modify"))):"phys"===t.dirty?await E.blfLogging.getPhysValueToRawValue({dbcChannel:a,canId:l,signalsData:t.children}).then((e=>{this.frames[i]={...t,rawData:e.data.data.rawData,children:t.children.map((t=>({...t,rawValue:e.data.data.signalsData.find((e=>e.name===t.id))?.rawValue??t.rawValue}))),dirty:!1,raw:i+1},this.updateMultiFrame([{row:i+1,...this.frames[i]}],"modify")})).catch(console.log):"dlc"===t.dirty?(this.frames[i]={...t,rawData:Array.from({length:t.dlc},((e,a)=>t.rawData[a]||0)),dirty:!1,raw:i+1},this.updateMultiFrame([{row:i+1,...t}],"modify")):"periodic"===t.dirty?(this.frames[i]={...t,isSending:0!=t.periodic&&t.isSending,dirty:!1,raw:i+1},this.updateMultiFrame([{row:i+1,...t}],"modify")):t.dirty&&(this.frames[i].dirty=!1,this.updateMultiFrame([{row:i+1,...t}],"modify"))}this.isSyncFrames=!1;let a=e.filter((e=>!0===e.children[0]?.eteDisable)),l=[];a.forEach((e=>{l.push({raw:e.raw,canId:e.canId,dbcChannel:e.channel,useE2E:e.e2e?1:0})})),E.blfLogging.setE2EConfig({e2eSlotList:l})},deep:!0},cur(e){console.log("sendCur07041058",e,this.frames[e]),this.isHexMulti=!1,this.hexs=[]}},methods:{showMessage({level:e,content:t,timeout:a}){clearTimeout(jn),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(jn=setTimeout((()=>{this.message.visible=!1}),a))},onHexErr(){this.showMessage({timeout:2e3,level:"error",content:"请输入正确格式的16进制"})},updateFrame(e){let t=this.frames.slice(),a=[],l=[];for(let i=t.length-1;i>=0;i--){let a=t[i];if("dbc"===a.from){let s=e.findIndex((e=>e.id===a.id));if(~s)e.splice(s,1);else{i===this.cur&&(this.cur=-1);let e=t.splice(i,1);l.unshift({...e,row:i+1})}}}this.updateMultiFrame(l,"delete"),a=e.map(((e,t)=>{let a=e.children[0]||{};return{...e,name:e.text,from:"dbc",e2e:!1,periodic:a.periodic||0,canType:a.canType||"CAN",dlc:a.dlc||64,canId:a.msg||0,dirty:"raw",isSending:!1,children:e.children.map((e=>({...e,name:e.id})))}})),t.push(...a),this.frames=t,this.chooseSignalShow=!1,this.addRecordShow=!1},delFrame(e){e===this.cur&&(this.cur=-1);let t=this.frames.splice(e,1);this.frames.forEach(((e,t)=>{this.frames[t].raw=t+1})),this.updateMultiFrame([{...t,row:e+1}],"delete")},addFrame(e){this.addRecordShow=!1;let t=[{name:"",e2e:!1,periodic:1e3,canId:"CAN"===e?111:222,channel:this.$props.store.sendRecord.dbc.dbcChn["CAN"===e?0:1],canType:e,dlc:8,isSending:!1,from:e,rawData:[0,0,0,0,0,0,0,0],children:[{eteDisable:!1}]}],a=this.frames.length-1;this.frames.push(...t),console.log("addthis.frames",this.frames),this.updateMultiFrame(t.map(((e,t)=>({...e,row:a+t}))),"add")},updateMultiFrame(e,t){if(!this.$props.store.sendRecord.isRecording)return;let a=e.map((e=>({...e,channel:1+this.$props.store.sendRecord.dbc.dbcChn.indexOf(e.channel)})));a.length>0&&E.blfLogging.getPeriodicSend({data:a,behavor:t})},togglePlay(e,t){e.periodic>0?(e.isSending=!e.isSending,this.updateMultiFrame([{row:t+1,...e}],"modify")):E.blfLogging.getManualSend({row:t+1,...e,channel:1+this.$props.store.sendRecord.dbc.dbcChn.indexOf(e.channel)}).catch(console.log)},onHexMultiChange(){this.frames[this.cur].rawData=this.frames[this.cur].rawData.map(((e,t)=>this.hexs.includes(t)?this.hexMultiValue:e)),this.frames[this.cur].dirty="data"},clickHandler(e){0==this.$refs.root?.contains(e.target)&&(this.addRecordShow=!1)},onChecked(e){this.allChecked=!e,this.allChecked?this.frames.forEach((e=>{e.children[0]?.eteDisable&&(e.e2e=!0)})):this.frames.forEach((e=>{e.e2e=!1}))}},mounted(){setTimeout((()=>{document.body.addEventListener("mousedown",this.clickHandler)}),300)},unmounted(){document.body.removeEventListener("mousedown",this.clickHandler)}},zn=e=>(w("data-v-eda81dc0"),e=e(),C(),e),Kn={class:"body"},Wn={class:"list-er"},Gn={class:"list-table"},Xn={key:1,class:"ic-help"},Yn=["data-indeterminate"],Jn=["onClick","data-active"],Qn=["title"],Zn=["data-from","data-cantype","data-valid"],eo=["disabled","onUpdate:modelValue"],to=["onUpdate:modelValue","onChange"],ao=["disabled","onUpdate:modelValue","onChange"],lo=["value"],io=["disabled","onUpdate:modelValue","onChange"],so=[zn((()=>p("option",{value:"CAN"},"CAN",-1))),zn((()=>p("option",{value:"CANFD"},"CANFD",-1)))],no=["disabled","onUpdate:modelValue","onChange"],oo=["value"],ro=["data-disable","data-recording","data-active","onClick"],co=["onClick"],ho={key:0,class:"table-empty"},mo={class:"empty-meark"},po={class:"sig-er"},uo={class:"hex-er"},go=zn((()=>p("th",{style:{width:"4em"}}," ",-1))),bo={style:{width:"11.8%"}},fo={key:0},yo=["value"],vo={class:"hex-footer"},wo={class:"hex-multi-input"},Co={class:"btn-import-er"},ko={class:"add-record",ref:"root"},So=["data-disabled"],To=["data-disabled"],Do=["data-disabled"],Vo=s(qn,[["render",function(e,t,a,l,i,s){const n=d("EditWrapper"),o=d("InputHex"),w=d("InputOrSelect"),C=d("Button"),k=d("ChooseSignal"),T=d("Message"),D=r("tooltip");return h(),m(b,null,[p("div",Kn,[p("div",Wn,[p("table",Gn,[p("tr",null,[(h(!0),m(b,null,S(i.listTable.cols,(e=>(h(),m("th",{style:R({width:e.width})},[y(u(e.label)+" ",1),e.icon?(h(),m("i",{key:0,onClick:t[0]||(t[0]=e=>i.addRecordShow=!i.addRecordShow),class:"ic-add"})):v("",!0),e.tooltip?c((h(),m("i",Xn,null,512)),[[D,e.tooltip]]):v("",!0),e.type?c((h(),m("input",{key:2,type:"checkbox",onChange:t[1]||(t[1]=e=>s.onChecked(s.allChecked)),"data-indeterminate":s.checkIndeterminate,"onUpdate:modelValue":t[2]||(t[2]=e=>s.allChecked=e)},null,40,Yn)),[[U,s.allChecked]]):v("",!0)],4)))),256))]),(h(!0),m(b,null,S(i.frames,((t,a)=>(h(),m("tr",{onClick:e=>i.cur=a,"data-active":i.cur===a},[p("td",null,u(a+1),1),p("td",{title:t.name},[p("i",{class:"ic-can","data-from":t.from,"data-cantype":t.canType,"data-valid":Object.values(e.$props.store.sendRecord.dbc.dbcChn).includes(t.channel)},null,8,Zn),y(" "+u(t.name),1)],8,Qn),p("td",null,[g(n,{style:{"justify-content":"center"}},{default:f((()=>[c(p("input",{type:"checkbox",disabled:!t.children[0]?.eteDisable,"onUpdate:modelValue":e=>t.e2e=e},null,8,eo),[[U,t.e2e,void 0,{lazy:!0}]])])),_:2},1024)]),p("td",null,[g(n,null,{default:f((()=>[c(p("input",{class:"td-input",type:"number",min:"0",max:"1000","onUpdate:modelValue":e=>t.periodic=e,onChange:e=>t.dirty="periodic"},null,40,to),[[I,t.periodic,void 0,{lazy:!0}]])])),_:2},1024)]),p("td",null,[g(n,{disabled:"dbc"===t.from},{default:f((()=>[g(o,{onError:s.onHexErr,min:0,max:2047,disabled:"dbc"===t.from,class:"td-input",modelValue:t.canId,"onUpdate:modelValue":e=>t.canId=e,onChange:e=>t.dirty="canId"},null,8,["onError","disabled","modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["disabled"])]),p("td",null,[g(n,{disabled:"dbc"===t.from},{default:f((()=>[c(p("select",{disabled:"dbc"===t.from,class:"td-input","onUpdate:modelValue":e=>t.channel=e,onChange:e=>t.dirty="channel"},[(h(!0),m(b,null,S(e.$props.store.sendRecord.dbc.dbcChn,((e,t)=>(h(),m("option",{value:e},"CAN"+u(t+1),9,lo)))),256))],40,ao),[[j,t.channel,void 0,{lazy:!0}]])])),_:2},1032,["disabled"])]),p("td",null,[g(n,{disabled:"dbc"===t.from},{default:f((()=>[c(p("select",{disabled:"dbc"===t.from,class:"td-input","onUpdate:modelValue":e=>t.canType=e,onChange:e=>t.dirty="canType"},so,40,io),[[j,t.canType]])])),_:2},1032,["disabled"])]),p("td",null,[g(n,{disabled:"CAN"===t.canType||"dbc"===t.from},{default:f((()=>[c(p("select",{disabled:"CAN"===t.canType||"dbc"===t.from,class:"td-input","onUpdate:modelValue":e=>t.dlc=e,onChange:e=>t.dirty="dlc"},[(h(),m(b,null,S([8,12,16,20,24,32,48,64],(e=>p("option",{value:e},u(e),9,oo))),64))],40,no),[[j,t.dlc]])])),_:2},1032,["disabled"])]),p("td",null,[p("i",{class:"ic-play","data-disable":Object.values(e.$props.store.sendRecord.dbc.dbcChn).includes(t.channel),"data-recording":e.$props.store.sendRecord.isRecording,"data-active":t.isSending,onClick:e=>s.togglePlay(t,a)},null,8,ro),y("  "),p("i",{class:"ic-del",onClick:L((e=>s.delFrame(a)),["stop"])},null,8,co)])],8,Jn)))),256))]),0==i.frames.length?(h(),m("div",ho,[p("div",mo,[y("暂无内容，请先"),p("span",{class:"empty-btn",onClick:t[3]||(t[3]=e=>i.addRecordShow=!i.addRecordShow)},"导入帧")])])):v("",!0)]),p("div",po,[(h(),m("table",{class:"sig-table",key:"sig"+i.cur},[p("tr",null,[(h(!0),m(b,null,S(i.sigTable.cols,(e=>(h(),m("th",{style:R({width:e.width})},u(e.label),5)))),256))]),""!==i.frames[i.cur]?.name?(h(!0),m(b,{key:0},S(i.frames[i.cur]?.children,(e=>(h(),m("tr",null,[c((h(),m("td",null,[y(u(e.text)+" ",1)])),[[D,{content:`${e.text}<hr/>phys:${e.minPhys} ~ ${e.maxPhys}<br/>raw:${e.minRaw?"0x"+e.minRaw.toString(16):""} ~ ${e.maxRaw?"0x"+e.maxRaw.toString(16):""}<br/>Start Bit:${e.startBit}<br>Length:${e.length}<br>Phys Step:${e.physStep}`,html:!0},void 0,{"top-start":!0}]]),p("td",null,[g(n,null,{default:f((()=>[g(o,{watch:!0,onError:s.onHexErr,min:e.minRaw,max:e.maxRaw,class:"td-input",modelValue:e.rawValue,"onUpdate:modelValue":t=>e.rawValue=t,modelModifiers:{lazy:!0},onChange:t[4]||(t[4]=e=>i.frames[i.cur].dirty="raw")},null,8,["onError","min","max","modelValue","onUpdate:modelValue"])])),_:2},1024)]),p("td",null,[g(n,null,{default:f((()=>[g(w,{watch:!0,min:e.minPhys,max:e.maxPhys,class:"td-input",step:e.physStep,modelValue:e.physValue,"onUpdate:modelValue":t=>e.physValue=t,enum:e.selectPhys?e.selectPhys:"",onChange:t[5]||(t[5]=e=>i.frames[i.cur].dirty="phys")},null,8,["min","max","step","modelValue","onUpdate:modelValue","enum"])])),_:2},1024)]),p("td",null,u(e.unit),1)])))),256)):v("",!0)]))]),p("div",uo,[(h(),m("table",{class:"hex-table",key:"hex"+i.cur},[p("tr",null,[go,(h(),m(b,null,S([0,1,2,3,4,5,6,7],(e=>p("th",bo,u(e),1))),64))]),i.frames[i.cur]?.rawData?(h(),m(b,{key:0},S([0,8,16,24,32,40,48,56,64],((e,a)=>(h(),m(b,null,[i.frames[i.cur].rawData.length>e?(h(),m("tr",fo,[p("td",null,[p("b",null,u(e),1)]),(h(),m(b,null,S(8,(a=>p("td",null,[i.isHexMulti&&e+a-1<i.frames[i.cur].rawData.length?c((h(),m("input",{key:0,type:"checkbox",class:"radio","onUpdate:modelValue":t[6]||(t[6]=e=>i.hexs=e),value:e+a-1},null,8,yo)),[[U,i.hexs]]):v("",!0),e+a-1<i.frames[i.cur].rawData.length?(h(),N(n,{key:1},{default:f((()=>[g(o,{watch:!0,onError:s.onHexErr,min:0,max:255,class:"td-input",style:{width:"calc(100%)","text-indent":"20px"},modelValue:i.frames[i.cur].rawData[e+a-1],"onUpdate:modelValue":t=>i.frames[i.cur].rawData[e+a-1]=t,modelModifiers:{lazy:!0},onChange:t[7]||(t[7]=e=>i.frames[i.cur].dirty="data")},null,8,["onError","modelValue","onUpdate:modelValue"])])),_:2},1024)):v("",!0)]))),64))])):v("",!0)],64)))),64)):v("",!0)])),p("div",vo,[i.isHexMulti?(h(),m(b,{key:1},[y(" 批量修改:("+u(i.hexs.length)+"个)  ",1),g(C,{style:{float:"right",height:"23px","margin-left":"8px"},onClick:t[9]||(t[9]=e=>{i.hexs=[],i.isHexMulti=!1})},{default:f((()=>[y("退出")])),_:1}),g(C,{style:{float:"right",height:"23px"},type:"primary",onClick:s.onHexMultiChange},{default:f((()=>[y("修改")])),_:1},8,["onClick"]),p("div",wo,[g(o,{onError:s.onHexErr,min:0,max:255,modelValue:i.hexMultiValue,"onUpdate:modelValue":t[10]||(t[10]=e=>i.hexMultiValue=e)},null,8,["onError","modelValue"])])],64)):(h(),m("div",{key:0,class:"hex-footer-full-btn",onClick:t[8]||(t[8]=e=>i.isHexMulti=!i.isHexMulti)},"进入批量修改"))])]),c(p("div",Co,[i.chooseSignalShow?(h(),N(k,{key:0,filledOptions:e.$props.store.sendRecord.frames,checkedOptions:s.checkedOptions,onSignalsChange:s.updateFrame,onCancel:t[11]||(t[11]=()=>{i.chooseSignalShow=!1})},null,8,["filledOptions","checkedOptions","onSignalsChange"])):v("",!0)],512),[[A,i.chooseSignalShow]]),c(p("div",ko,[p("div",{onClick:t[12]||(t[12]=e=>i.chooseSignalShow=!i.chooseSignalShow),"data-disabled":0===e.$props.store.sendRecord.frames.length},"从DBC中导入帧",8,So),p("div",{onClick:t[13]||(t[13]=e=>s.addFrame("CAN")),"data-disabled":0==e.$props.store.sendRecord.dbc.dbcChn.length},"自定义CAN帧",8,To),p("div",{onClick:t[14]||(t[14]=e=>s.addFrame("CANFD")),"data-disabled":0==e.$props.store.sendRecord.dbc.dbcChn.length},"自定义CAN FD帧",8,Do)],512),[[A,i.addRecordShow]])]),g(T,{message:i.message},null,8,["message"])],64)}],["__scopeId","data-v-eda81dc0"]]);let xo=[],Io=0;const Lo={class:"chs-er",ref:"root"},Fo={class:"chs-list-er","data-loading":!1},Ro=["onClick"],$o=["id","onUpdate:modelValue","data-indeterminate"],Mo=["innerHTML"],Eo=["for"],_o=["id","onUpdate:modelValue","data-indeterminate"],No=["innerHTML"],Ao={class:"footer"};let Oo=0;const Po={props:["activeTab","linSendInfo","nodeOpt","ldfChn","store","setStore","curFileIdx","deployDisable"],components:{ButtonGroup:se,Button:l,InputHex:An,EditWrapper:_n,ChooseSignal:s({props:["filledOptions","checkedOptions"],emits:["connect","showMessage","getCarCode","cancel","signalsChange"],components:{Button:l,RecycleScroller:T,Spin:K,Message:i},data(){const e=this.$ls.get("blfread_sdbData")||[];if("custom"===this.carType){let t=e.find((e=>e.sdb===this.sdb))?.comments;t&&(xo=["",...t])}else xo=V.find((e=>e.value===this.$props.carType))?.children.find((e=>e.value===this.$props.sdb))?.comments||[];return xo=xo.map(((e,t)=>`${"⓪①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳㉑㉒㉓㉔㉕㉖㉗㉘㉙㉚㉛㉜㉝㉞㉟㊱㊲"[t]}${e}`)),{inputStr:"",checkedList:[],selectNodeList:[],counter:0,sdbCustom:e,lodingSpin:!1,isFlag:1,message:{visible:!1,level:"",content:""},listOpen:[],expandKeys:new Set([])}},computed:{list(){this.checkedList=this.$props.checkedOptions;let e=[],t=this,a=this.$props.filledOptions.data;for(let s in a){let l;l={_id:+s,id:+s,text:xo[s],node_type:"channel",children:[],set checked(e){l.children.forEach((t=>{t.checked=e}))},get checked(){return!l.children.some((e=>0==e.checked))},get indeterminate(){return l.children.some((e=>e.checked))&&l.children.some((e=>!e.checked))}};for(let e in a[s]){let i;i={_id:s+"_"+e,id:s+"_"+e,text:"-1"==e?"":e,node_type:"msg",channel:l.id,set checked(e){e?t.checkedList.push(i):t.checkedList=t.checkedList.filter((e=>!(e._id===i._id)))},get checked(){return t.checkedList.some((e=>e._id===i._id))},children:a[s][e].map((t=>{let a;return a={_id:s+"_"+e+"_"+t[0],id:t[0],msg:"-1"==e?"-1":+e.match(/0x\w+/)?.[0]||e,channel:l.id,text:t[0],node_type:"signal",comment:t[1],remark:t[2],canId:t[3],rawValue:t[4],maxRaw:t[5],minRaw:t[6],maxPhys:t[7],minPhys:t[8],selectPhys:t[9],unit:t[10],startBit:t[11],length:t[12],physStep:t[13],dlc:t[14],canType:t[15],periodic:t[16],eteDisable:t[17]},a}))},l.children.push(i)}e.push(l)}let l=[];for(let s=0;s<e.length;s++){let t=e[s];if(-1!=t.id&&l.push(t),this.inputStr||this.expandKeys.has(t.id))for(let e=0;e<t.children.length;e++){let a=t.children[e];"-"!=a.id[0]&&l.push(a)}}if(this.inputStr.length>0){const e=this.inputStr.toLowerCase();let t;try{t=new RegExp(e,"i")}catch(i){t={test:e=>~e.toLowerCase().indexOf(e.toLowerCase())}}l=l.filter((e=>t.test(e.text)||e.comment&&t.test(e.comment)||e.remark&&t.test(e.remark)))}return l}},watch:{checkedListIndex:{handler(e){this.checkedList=[]},deep:!0}},mounted(){this.$refs.chsInputRef.focus(),setTimeout((()=>{document.body.addEventListener("mousedown",this.clickHandler)}),300)},beforeUnmount(){},unmounted(){document.body.removeEventListener("mousedown",this.clickHandler)},methods:{clickHandler(e){0==this.$refs.root?.contains(e.target)&&this.$emit("cancel")},showFirstChild(e){this.expandKeys.has(e.id)?this.expandKeys.delete(e.id):this.expandKeys.add(e.id)},clearTable(){this.checkedList=[]},title4node:e=>Q(e),showMessage({level:e,content:t,timeout:a}){clearTimeout(Io),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(Io=setTimeout((()=>{this.message.visible=!1}),a))},submit(){this.checkedList.length>80?this.showMessage({level:"error",content:"信号选择不能超过80项",timeout:3e3}):this.$emit("signalsChange",this.checkedList)},highlightWord(e){if(!e)return e;const t=this.inputStr;if(!t)return e;const a=t.split(/\s+/g);var l,i,s=a.length;for(l=0;l<s;l++)try{(i=new RegExp(a[l],"gi")).test(e)&&(e=e.replace(i,"<strong>$&</strong>"))}catch(n){i=a[l],e=e.replace(i,"<strong>$&</strong>")}return e}}},[["render",function(e,t,a,l,i,s){const n=d("RecycleScroller"),o=d("Message"),u=r("tooltip"),b=r("esc");return c((h(),m("div",Lo,[c(p("input",{class:"chs-input-er",placeholder:"搜索信号名称/信号描述",ref:"chsInputRef","onUpdate:modelValue":t[0]||(t[0]=e=>i.inputStr=e),onInput:t[1]||(t[1]=(...t)=>e.onChange&&e.onChange(...t)),draggable:!1},null,544),[[I,i.inputStr]]),p("div",Fo,[g(n,{class:"chs-list",items:s.list,"item-size":28,"key-field":"_id"},{default:f((({item:e})=>[p("label",null,["channel"==e.node_type&&e.id>=1e3?(h(),m("div",{key:0,style:{"margin-left":"1px"},class:F(!i.inputStr&&i.expandKeys.has(e.id)?"switch-open":"switch-close"),onClick:L((t=>s.showFirstChild(e)),["stop","prevent"])},null,10,Ro)):v("",!0),"channel"==e.node_type&&e.id>=1e3?c((h(),m("input",{key:1,style:{"margin-left":"3px"},id:e._id,type:"checkbox","onUpdate:modelValue":t=>e.checked=t,"data-indeterminate":e.indeterminate,"click.stop":""},null,8,$o)),[[U,e.checked]]):v("",!0),"channel"==e.node_type&&e.id>=1e3?(h(),m("span",{key:2,class:"chs-node",innerHTML:s.highlightWord(e._id)},null,8,Mo)):"msg"==e.node_type?c((h(),m("div",{key:3,for:e.children,style:{"text-indent":"2em","margin-left":"-15px"},class:"chs-node chs-node-item"},[c(p("input",{id:e._id,type:"checkbox","onUpdate:modelValue":t=>e.checked=t,"data-indeterminate":e.indeterminate,"click.stop":""},null,8,_o),[[U,e.checked]]),p("span",{class:"",innerHTML:s.highlightWord(e.text)},null,8,No)],8,Eo)),[[u,{content:s.title4node(e),html:!0},void 0,{right:!0}]]):v("",!0)])])),_:1},8,["items"])]),p("div",Ao,[p("div",{class:"chs-btn confirm",onClick:t[2]||(t[2]=(...e)=>s.submit&&s.submit(...e))},"确认"),p("div",{class:"chs-btn cancel",onClick:t[3]||(t[3]=(...e)=>s.clearTable&&s.clearTable(...e))},"重置")]),g(o,{message:i.message},null,8,["message"])])),[[b,()=>e.$emit("cancel")]])}],["__scopeId","data-v-84227e36"]]),InputOrSelect:Bn},data:()=>({nodeVal:{},mode:"schedule",cur:-1,linListTable:{cols:[{label:"",width:"2.8em",icon:"add"},{label:"Frame Name",width:"auto"},{label:"Delay (ms)",width:"9em",tooltip:{content:"1-1000ms:周期发送<br/>0:单点发送",html:!0}},{label:"ID",width:"4.5em",tooltip:"DBC导入禁止修改ID"},{label:"Channel",width:"6em"},{label:"DIR",width:"6em"},{label:"DLC",width:"3em"},{label:"",width:"5em"}]},linSigTable:{cols:[{label:"Signal Name",width:"auto"},{label:"Raw",width:"90px"},{label:"Phys",width:"200px"},{label:"Unit",width:"4em"}]},linIsHexMulti:!1,hexs:[],activeTab:0,activeChn:0,activeScheduleIndex:-1,activeTableList:new Map,chooseLinSignalShow:!1,linAddRecordShow:!1,frames:[],cur:-1,isDeploying:!1,isDeployChecked:!0,showScheduleList:!0,scheduleStyleOpt:[{label:"调度表",value:"schedule",disable:"false"},{label:"单帧",value:"single",disable:"false"}],isFilled:!0}),watch:{curFileIdx(e){this.activeTab=e},deployDisable(e){console.log("部署disable",e)},linSendInfo(e){this.activeLinData=e?.data[this.activeChn],console.log("this.activeLinData07251122",this.activeLinData)},ldfChn:{handler(e){console.log("newVal07051108",e),this.nodeVal={},this.frames=[],this.scheduleList=[]},deep:!0,immediate:!0},"$props.store.sendRecord.isRecording":{handler(e){e&&this.updateMultiFrame(this.frames.map(((e,t)=>({...e,row:t+1}))),"add")}},"$props.store.sendRecord":{handler(e,t){}},frames:{async handler(e,t){if(console.log("nextFrames1800111",e),!this.isSyncFrames){this.isSyncFrames=!0,this.isHexMulti=!1,e.length>0&&(this.isDeployChecked=!1);for(let t=0;t<e.length;t++){let a=e[t],l=a.channel;console.log("frame07051053",l);let i=a.id;console.log("frame.dirty07041441",a.dirty,a),"raw"===a.dirty?await E.blfLogging.getRawValueToPhysValueLIN({ldfChannel:this.ldfChn[this.activeTab],linId:i,signalsData:a.children.map((e=>({name:e.text,rawValue:e.rawValue})))}).then((e=>{this.frames[t]={...a,rawData:e.data.data.rawData,children:a.children.map((t=>({...t,physValue:e.data.data.signalsData.find((e=>e.name===t.id))?.physValue??t.physValue}))),dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...this.frames[t]}],"modify"),this.isDeploying&&this.getDSServer()})).catch(console.log):"data"===a.dirty?(console.log("this.frames[i]07051410",a),"dbc"===a.from||"sch"===a.from?await E.blfLogging.getDataToValuesLIN({ldfChannel:this.ldfChn[this.activeTab],linId:i,rawData:a.rawData}).then((e=>{console.log("res07110934",e),this.frames[t]={...a,children:a.children.map((t=>({...t,physValue:e.data.data.signalsPhysData.find((e=>e.name===t.id))?.physValue??t.physValue,rawValue:e.data.data.signalsRawData.find((e=>e.name===t.id))?.rawValue??t.rawValue}))),dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...this.frames[t]}],"modify")})).catch(console.log):(this.frames[t]={...a,dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...this.frames[t]}],"modify")),this.isDeploying&&this.getDSServer()):"phys"===a.dirty?(console.log("frame.children0710",a.children),await E.blfLogging.getPhysValueToRawValueLIN({ldfChannel:this.ldfChn[this.activeTab],linId:i,signalsData:a.children.map((e=>({name:e.text,physValue:parseInt(e.physValue)})))}).then((e=>{this.frames[t]={...a,rawData:e.data.data.rawData,children:a.children.map((t=>({...t,rawValue:e.data.data.signalsData.find((e=>e.name===t.id))?.rawValue??t.rawValue}))),dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...this.frames[t]}],"modify"),this.isDeploying&&this.getDSServer()})).catch(console.log)):"dlc"===a.dirty?(this.frames[t]={...a,rawData:Array.from({length:a.dlc},((e,t)=>a.rawData[t]||0)),dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...a}],"modify"),this.isDeploying&&this.getDSServer()):"delay"===a.dirty?(this.frames[t]={...a,isSending:0!=a.delay&&a.isSending,dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...a}],"modify"),this.isDeploying&&this.getDSServer()):a.dirty&&(this.frames[t].dirty=!1,this.updateMultiFrame([{row:t+1,...a}],"modify"),this.isDeploying&&this.getDSServer())}this.isSyncFrames=!1}},deep:!0},cur(e){console.log("cur07041051",e,this.frames[e]),this.isHexMulti=!1,this.hexs=[]}},computed:{scheduleList(){if(console.log("this.activeLinData",this.ldfChn[this.activeTab],this.activeTab,this.linSendInfo,this.ldfChn),console.log("this.nodeVal.value",this.nodeVal),Object.keys(this.nodeVal).length>0&&""!==this.nodeVal.value){let e={};if("master"===this.nodeVal.parentNode)return this.showScheduleList=!0,e=0!==this.ldfChn[this.activeTab]?this.linSendInfo.data[this.ldfChn[this.activeTab]][this.nodeVal.parentNode][this.nodeVal.value]:{},Object.keys(e||{});{this.showScheduleList=!1,console.log("this.linSendInfo.data[this.ldfChn[this.activeTab]]",this.linSendInfo.data[this.ldfChn[this.activeTab]],this.linSendInfo),e=0!==this.ldfChn[this.activeTab]?this.linSendInfo.data[this.ldfChn[this.activeTab]][this.nodeVal.parentNode]:{};let t=Object.keys(e||{});return console.log("99999",t),t.forEach(((e,t)=>{e===this.nodeVal.value&&this.checkedSchedule(t,e)})),t}}},checkedOptions(){return this.frames.filter((e=>"dbc"==e.from))}},mounted(){setTimeout((()=>{document.body.addEventListener("mousedown",this.clickHandler)}),300)},unmounted(){document.body.removeEventListener("mousedown",this.clickHandler)},methods:{checkedSchedule(e,t){console.log("index,item",e,t);let a=[];a="master"===this.nodeVal.parentNode?0!==this.ldfChn[this.activeTab]?this.linSendInfo.data[this.ldfChn[this.activeTab]][this.nodeVal.parentNode][this.nodeVal.value][t]:[]:0!==this.ldfChn[this.activeTab]?this.linSendInfo.data[this.ldfChn[this.activeTab]][this.nodeVal.parentNode][t]:[],this.activeScheduleIndex=e;let l=a.map((e=>({_id:this.nodeVal.parentNode+"_"+e[0]+"_"+this.mode,id:e[1],linId:e[1],text:e[0],name:e[0],dir:e[2],dlc:e[3],delay:e[4],channel:this.ldfChn[0],dirty:"raw",from:"sch",children:e[5].map((e=>{let t;return t={_id:e[0],id:e[0],text:e[0],node_type:"signal",comment:e[1],remark:e[2],linId:e[3],rawValue:e[4],maxRaw:e[5],minRaw:e[6],maxPhys:e[7].toString(),minPhys:e[8].toString(),selectPhys:e[9],unit:e[10],startBit:e[11],length:e[12],physStep:e[13].toString(),dlc:e[14],canType:e[15],periodic:e[16]},t}))})));this.frames=[],this.frames.push(...l),this.activeTableList.set(this.nodeVal.parentNode+"-"+this.nodeVal.value+"-"+this.mode,{phone:"213-555-1234",address:"123 N 1st Ave"})},clickHandler(e){0==this.$refs.root?.contains(e.target)&&(this.linAddRecordShow=!1)},showMessage({level:e,content:t,timeout:a}){clearTimeout(Oo),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(Oo=setTimeout((()=>{this.message.visible=!1}),a))},onHexErr(){this.showMessage({timeout:2e3,level:"error",content:"请输入正确格式的16进制"})},addFrame(e){console.log("this.ldfChn[0]",this.ldfChn[0]),this.linAddRecordShow=!1;let t=[{name:"",delay:20,id:1===e,channel:this.ldfChn[0],canType:e,dir:"tx",dlc:8,isSending:!1,from:e,rawData:[0,0,0,0,0,0,0,0]}],a=this.frames.length-1;this.frames.push(...t),this.updateMultiFrame(t.map(((e,t)=>({...e,row:a+t}))),"add")},updateMultiFrame(e,t){console.log("list07051359",e),this.$props.store.sendRecord.isRecording&&e.map((e=>({...e,channel:1+this.$props.store.sendRecord.dbc.ldfChn.indexOf(e.channel)})))},updateFrame(e){let t=this.frames.slice(),a=[],l=[];for(let i=t.length-1;i>=0;i--){let a=t[i];if("dbc"===a.from){let s=e.findIndex((e=>e.id===a.id));if(~s)e.splice(s,1);else{i===this.cur&&(this.cur=-1);let e=t.splice(i,1);l.unshift({...e,row:i+1})}}}this.updateMultiFrame(l,"delete"),a=e.map(((e,t)=>{let a=e.children[0]||{};return console.log("it111",a),{...e,name:e.text,from:"dbc",periodic:a.periodic||0,canType:a.canType||"LIN",dlc:a.dlc||64,id:a.msg||0,linId:a.canId||0,dirty:"raw",dir:"tx",delay:10,isSending:!1,children:e.children.map((e=>({...e,name:e.id})))}})),t.push(...a),this.frames=t,console.log("this.frames07040952",this.frames),this.chooseLinSignalShow=!1,this.addRecordShow=!1},async startDeploy(){console.log("部署",this.nodeVal,this.nodeVal.parentNode),this.isDeploying=!0;for(var e=0;e<this.scheduleStyleOpt.length;e++)"single"===this.scheduleStyleOpt[e].value&&(this.scheduleStyleOpt[e].disable="true");this.getDSServer(),console.log("ldfChn11",this.ldfChn,this.frames)},async getDSServer(){await E.blfLogging.getDeployShedule({channelId:1,mode:this.nodeVal.parentNode?this.nodeVal.parentNode:this.isFilled?"master":"slave",LINFrames:this.frames.map((e=>({LINId:e.linId?"0x"+(parseInt(e.linId)||0).toString(16):"0x0",dataLength:e.rawData?e.rawData.length:0,dir:"tx"===e.dir?0:1,delay:e.delay,data:e.rawData})))}).then((e=>{})).catch(console.log)},async endDeploy(){this.isDeploying=!1;for(var e=0;e<this.scheduleStyleOpt.length;e++)"single"===this.scheduleStyleOpt[e].value&&(this.scheduleStyleOpt[e].disable="false");await E.blfLogging.getUnDeployShedule({channelId:1,mode:this.nodeVal.parentNode?this.nodeVal.parentNode:this.isFilled?"master":"slave"}).then((e=>{})).catch(console.log)},async togglePlay(e,t){console.log("raw07162036",e,t),await E.blfLogging.getManualSendLIN({channelId:1,mode:this.nodeVal.parentNode?this.nodeVal.parentNode:this.isFilled?"master":"slave",LINFrames:[{LINId:e.linId?"0x"+(parseInt(e.linId)||0).toString(16):"0x0",dataLength:e.rawData.length,dir:"tx"===e.dir?0:1,delay:e.delay,data:e.rawData}]}).then((e=>{}))},delFrame(e){console.log("idx2003",e,this.frames),e===this.cur&&(this.cur=-1);let t=this.frames.splice(e,1);this.frames.forEach(((e,t)=>{this.frames[t].raw=t+1})),this.updateMultiFrame([{...t,row:e+1}],"delete")}}},Uo=e=>(w("data-v-8cfbd0b5"),e=e(),C(),e),Ho={class:"lin-body"},Bo={class:"select-er"},jo={class:"select-left"},qo=Uo((()=>p("span",{class:"record-header-message"},[p("b",null,"节点：")],-1))),zo={key:0,class:"chs-ft-label pointer"},Ko=["checked"],Wo=Uo((()=>p("i",{class:"icon-ques"},null,-1))),Go={class:"select-right"},Xo=Uo((()=>p("i",{class:"play-icon"},null,-1))),Yo=Uo((()=>p("i",{class:"stop-icon"},null,-1))),Jo={class:"lin-list-wrap"},Qo={class:"lin-list-tree-er"},Zo=Uo((()=>p("div",{class:"lin-list-tree-tit"},[p("i",{class:"lin-list-icon"}),p("b",null,"LIN调度表")],-1))),ed={class:"lin-list-tree-body"},td=["data-disabled","data-active","onClick"],ad=Uo((()=>p("i",{class:"lin-list-icon-sm"},null,-1))),ld=["title"],id={class:"lin-list-er"},sd={class:"lin-list-table"},nd={key:1,class:"ic-help"},od={key:2,type:"checkbox"},dd={class:"add-record",ref:"root"},rd=["data-disabled"],cd=["data-disabled"],hd=["onClick","data-active"],md=["data-from","data-cantype","data-valid"],pd=["onUpdate:modelValue","onChange"],ud=["onUpdate:modelValue","onChange"],gd=["value"],bd=["onUpdate:modelValue","onChange"],fd=[Uo((()=>p("option",{value:"tx"},"tx",-1))),Uo((()=>p("option",{value:"rx"},"rx",-1)))],yd=["disabled","onUpdate:modelValue","onChange"],vd=["data-disable","data-recording","data-active","onClick"],wd=["data-disable","onClick"],Cd={key:0,class:"table-empty"},kd={class:"empty-meark"},Sd={class:"btn-import-er"},Td={class:"lin-sig-er"},Dd={class:"lin-hex-er"},Vd=Uo((()=>p("th",{style:{width:"4em"}}," ",-1))),xd={style:{width:"11.8%"}},Id={key:0},Ld=["value"],Fd={class:"hex-footer"},Rd={class:"hex-multi-input"},$d=s(Po,[["render",function(e,t,a,l,i,s){const n=d("v-select"),o=d("ButtonGroup"),w=d("Button"),C=d("EditWrapper"),k=d("InputHex"),T=d("ChooseSignal"),D=d("InputOrSelect"),V=r("tooltip");return h(),m("div",Ho,[p("div",Bo,[p("div",jo,[qo,g(n,{options:a.nodeOpt,clearable:!1,searchable:!1,disabled:i.isDeploying,label:"label",value:"value",modelValue:i.nodeVal,"onUpdate:modelValue":t[0]||(t[0]=e=>i.nodeVal=e),class:"tch-tool-select"},null,8,["options","disabled","modelValue"]),"0"==a.ldfChn[this.activeTab]?c((h(),m("label",zo,[p("input",{class:"chs-node-checkboxAll",type:"checkbox",checked:i.isFilled,onClick:t[1]||(t[1]=t=>e.checkMasterMode())},null,8,Ko),y("主节点模式"),Wo])),[[V,"主节点模式"]]):v("",!0)]),p("div",Go,[g(o,{options:i.scheduleStyleOpt,class:"theme-btn-group",modelValue:i.mode,"onUpdate:modelValue":t[2]||(t[2]=e=>i.mode=e)},null,8,["options","modelValue"]),y("  "),i.isDeploying?(h(),N(w,{key:1,type:"primary",class:"header-import-btn",onClick:s.endDeploy},{default:f((()=>[Yo,y("停止 ")])),_:1},8,["onClick"])):(h(),N(w,{key:0,type:"primary",class:"header-import-btn",onClick:s.startDeploy,disabled:i.isDeployChecked||"single"==i.mode||a.deployDisable,progress:"100%"},{default:f((()=>[Xo,y("部署 ")])),_:1},8,["onClick","disabled"]))])]),p("div",Jo,[c(p("div",Qo,[Zo,p("div",ed,[(h(!0),m(b,null,S(s.scheduleList,((e,t)=>(h(),m("div",{class:"lin-list-tree-item",key:t,"data-disabled":i.isDeploying,"data-active":i.activeScheduleIndex===t,onClick:a=>s.checkedSchedule(t,e)},[ad,p("span",{title:e},u(e),9,ld)],8,td)))),128))])],512),[[A,i.showScheduleList]]),p("div",id,[p("table",sd,[p("tr",null,[(h(!0),m(b,null,S(i.linListTable.cols,(e=>(h(),m("th",{style:R({width:e.width})},[y(u(e.label)+" ",1),e.icon?(h(),m("i",{key:0,onClick:t[3]||(t[3]=e=>i.linAddRecordShow=!i.linAddRecordShow),class:"lin-ic-add"})):v("",!0),e.tooltip?c((h(),m("i",nd,null,512)),[[V,e.tooltip]]):v("",!0),e.type?(h(),m("input",od)):v("",!0)],4)))),256)),c(p("div",dd,[p("div",{onClick:t[4]||(t[4]=e=>i.chooseLinSignalShow=!i.chooseLinSignalShow),"data-disabled":0===e.$props.store?.sendRecord?.frames?.length||i.isDeploying},"从DBC中导入帧",8,rd),p("div",{onClick:t[5]||(t[5]=e=>s.addFrame("LIN")),"data-disabled":0==e.$props.store?.sendRecord?.frames?.length||i.isDeploying},"自定义帧",8,cd)],512),[[A,i.linAddRecordShow]])]),(h(!0),m(b,null,S(i.frames,((t,a)=>(h(),m("tr",{onClick:e=>i.cur=a,"data-active":i.cur===a},[p("td",null,u(a+1),1),p("td",null,[p("i",{class:"ic-can","data-from":t.from,"data-cantype":t.canType,"data-valid":Object.values(e.$props.store.sendRecord.dbc.ldfChn).includes(t.channel)},null,8,md),y(" "+u(t.name),1)]),p("td",null,[g(C,null,{default:f((()=>[c(p("input",{class:"td-input",type:"number",min:"0",max:"1000","onUpdate:modelValue":e=>t.delay=e,onChange:e=>t.dirty="delay"},null,40,pd),[[I,t.delay,void 0,{lazy:!0}]])])),_:2},1024)]),p("td",null,[g(C,{disabled:"LIN"!==t.from},{default:f((()=>[g(k,{onError:s.onHexErr,min:0,max:2047,disabled:"LIN"!==t.from,class:"td-input",modelValue:t.linId,"onUpdate:modelValue":e=>t.linId=e,onChange:e=>t.dirty="linId"},null,8,["onError","disabled","modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["disabled"])]),p("td",null,[g(C,{disabled:!0},{default:f((()=>[c(p("select",{class:"td-input",disabled:!0,"onUpdate:modelValue":e=>t.channel=e,onChange:e=>t.dirty="channel"},[(h(!0),m(b,null,S(e.$props.store.sendRecord.dbc.ldfChn,((e,t)=>(h(),m("option",{value:e},"LIN"+u(t+1),9,gd)))),256))],40,ud),[[j,t.channel,void 0,{lazy:!0}]])])),_:2},1024)]),p("td",null,[g(C,null,{default:f((()=>[c(p("select",{class:"td-input","onUpdate:modelValue":e=>t.dir=e,onChange:e=>t.dirty="dir"},fd,40,bd),[[j,t.dir]])])),_:2},1024)]),p("td",null,[g(C,{disabled:"LIN"!==t.from},{default:f((()=>[c(p("input",{disabled:"LIN"!==t.from,class:"td-input",type:"number",min:"0",max:"8","onUpdate:modelValue":e=>t.dlc=e,onChange:e=>t.dirty="dlc"},null,40,yd),[[I,t.dlc,void 0,{lazy:!0}]])])),_:2},1032,["disabled"])]),p("td",null,["schedule"!==i.mode?(h(),m("i",{key:0,class:"ic-play","data-disable":Object.values(e.$props.store.sendRecord.dbc.ldfChn).includes(t.channel),"data-recording":e.$props.store.sendRecord.isRecording,"data-active":t.isSending,onClick:e=>s.togglePlay(t,a)},null,8,vd)):v("",!0),y("  "),p("i",{class:"ic-del","data-disable":i.isDeploying,onClick:L((e=>s.delFrame(a)),["stop"])},null,8,wd)])],8,hd)))),256))]),0==i.frames.length?(h(),m("div",Cd,[p("div",kd,[y("暂无内容，请先"),p("span",{class:"empty-btn",onClick:t[6]||(t[6]=e=>i.linAddRecordShow=!i.linAddRecordShow)},"导入帧")])])):v("",!0)]),c(p("div",Sd,[i.chooseLinSignalShow?(h(),N(T,{key:0,filledOptions:e.$props.store.sendRecord.frames,checkedOptions:s.checkedOptions,onSignalsChange:s.updateFrame,onCancel:t[7]||(t[7]=()=>{i.chooseLinSignalShow=!1})},null,8,["filledOptions","checkedOptions","onSignalsChange"])):v("",!0)],512),[[A,i.chooseLinSignalShow]])]),p("div",Td,[(h(),m("table",{class:"sig-table",key:"sig"+i.cur},[p("tr",null,[(h(!0),m(b,null,S(i.linSigTable.cols,(e=>(h(),m("th",{style:R({width:e.width})},u(e.label),5)))),256))]),""!==i.frames[i.cur]?.name?(h(!0),m(b,{key:0},S(i.frames[i.cur]?.children,(e=>(h(),m("tr",null,[c((h(),m("td",null,[y(u(e.text)+" ",1)])),[[V,{content:`${e.text}<hr/>phys:${e.minPhys} ~ ${e.maxPhys}<br/>raw:${e.minRaw?"0x"+e.minRaw.toString(16):""} ~ ${e.maxRaw?"0x"+e.maxRaw.toString(16):""}<br/>Start Bit:${e.startBit}<br>Length:${e.length}<br>Phys Step:${e.physStep}`,html:!0},void 0,{"top-start":!0}]]),p("td",null,[g(C,null,{default:f((()=>[g(k,{watch:!0,onError:s.onHexErr,min:e.minRaw,max:e.maxRaw,class:"td-input",modelValue:e.rawValue,"onUpdate:modelValue":t=>e.rawValue=t,modelModifiers:{lazy:!0},onChange:t[8]||(t[8]=e=>i.frames[i.cur].dirty="raw")},null,8,["onError","min","max","modelValue","onUpdate:modelValue"])])),_:2},1024)]),p("td",null,[g(C,null,{default:f((()=>[g(D,{watch:!0,min:e.minPhys,max:e.maxPhys,class:"td-input",step:e.physStep,modelValue:e.physValue,"onUpdate:modelValue":t=>e.physValue=t,enum:e.selectPhys?e.selectPhys:"",onChange:t[9]||(t[9]=e=>i.frames[i.cur].dirty="phys")},null,8,["min","max","step","modelValue","onUpdate:modelValue","enum"])])),_:2},1024)]),p("td",null,u(e.unit),1)])))),256)):v("",!0)]))]),p("div",Dd,[(h(),m("table",{class:"lin-hex-table",key:"hex"+i.cur},[p("tr",null,[Vd,(h(),m(b,null,S([0,1,2,3,4,5,6,7],(e=>p("th",xd,u(e),1))),64))]),i.frames[i.cur]?.rawData?(h(),m(b,{key:0},S([0,8,16,24,32,40,48,56,64],((a,l)=>(h(),m(b,null,[i.frames[i.cur].rawData.length>a?(h(),m("tr",Id,[p("td",null,[p("b",null,u(a),1)]),(h(),m(b,null,S(8,(l=>p("td",null,[e.isHexMulti&&a+l-1<i.frames[i.cur].rawData.length?c((h(),m("input",{key:0,type:"checkbox",class:"radio","onUpdate:modelValue":t[10]||(t[10]=e=>i.hexs=e),value:a+l-1},null,8,Ld)),[[U,i.hexs]]):v("",!0),a+l-1<i.frames[i.cur].rawData.length?(h(),N(C,{key:1},{default:f((()=>[g(k,{watch:!0,onError:s.onHexErr,min:0,max:255,class:"td-input",style:{width:"calc(100%)","text-indent":"20px"},modelValue:i.frames[i.cur].rawData[a+l-1],"onUpdate:modelValue":e=>i.frames[i.cur].rawData[a+l-1]=e,modelModifiers:{lazy:!0},onChange:t[11]||(t[11]=e=>i.frames[i.cur].dirty="data")},null,8,["onError","modelValue","onUpdate:modelValue"])])),_:2},1024)):v("",!0)]))),64))])):v("",!0)],64)))),64)):v("",!0)])),p("div",Fd,[i.linIsHexMulti?(h(),m(b,{key:1},[y(" 批量修改:("+u(i.hexs.length)+"个)  ",1),g(w,{style:{float:"right",height:"23px","margin-left":"8px"},onClick:t[13]||(t[13]=e=>{i.hexs=[],i.linIsHexMulti=!1})},{default:f((()=>[y("退出")])),_:1}),g(w,{style:{float:"right",height:"23px"},type:"primary"},{default:f((()=>[y("修改")])),_:1}),p("div",Rd,[g(k,{onError:s.onHexErr,min:0,max:255,modelValue:e.hexMultiValue,"onUpdate:modelValue":t[14]||(t[14]=t=>e.hexMultiValue=t)},null,8,["onError","modelValue"])])],64)):(h(),m("div",{key:0,class:"hex-footer-full-btn",onClick:t[12]||(t[12]=e=>i.linIsHexMulti=!i.linIsHexMulti)},"进入批量修改"))])])])}],["__scopeId","data-v-8cfbd0b5"]]);let Md=[],Ed=0;const _d={class:"chs-er",ref:"root"},Nd={class:"chs-list-er","data-loading":!1},Ad=["onClick"],Od=["id","onUpdate:modelValue","data-indeterminate"],Pd=["innerHTML"],Ud=["for"],Hd=["id","onUpdate:modelValue","data-indeterminate"],Bd=["innerHTML"],jd={class:"footer"};let qd=0;const zd={props:["activeTab","linSendInfo","nodeOpt","ldfChn","store","setStore","curFileIdx","deployDisable"],components:{ButtonGroup:se,Button:l,InputHex:An,EditWrapper:_n,ChooseSignal:s({props:["filledOptions","checkedOptions"],emits:["connect","showMessage","getCarCode","cancel","signalsChange"],components:{Button:l,RecycleScroller:T,Spin:K,Message:i},data(){const e=this.$ls.get("blfread_sdbData")||[];if("custom"===this.carType){let t=e.find((e=>e.sdb===this.sdb))?.comments;t&&(Md=["",...t])}else Md=V.find((e=>e.value===this.$props.carType))?.children.find((e=>e.value===this.$props.sdb))?.comments||[];return Md=Md.map(((e,t)=>`${"⓪①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳㉑㉒㉓㉔㉕㉖㉗㉘㉙㉚㉛㉜㉝㉞㉟㊱㊲"[t]}${e}`)),{inputStr:"",checkedList:[],selectNodeList:[],counter:0,sdbCustom:e,lodingSpin:!1,isFlag:1,message:{visible:!1,level:"",content:""},listOpen:[],expandKeys:new Set([])}},computed:{list(){this.checkedList=this.$props.checkedOptions;let e=[],t=this,a=this.$props.filledOptions.data;for(let s in a){let l;l={_id:+s,id:+s,text:Md[s],node_type:"channel",children:[],set checked(e){l.children.forEach((t=>{t.checked=e}))},get checked(){return!l.children.some((e=>0==e.checked))},get indeterminate(){return l.children.some((e=>e.checked))&&l.children.some((e=>!e.checked))}};for(let e in a[s]){let i;i={_id:s+"_"+e,id:s+"_"+e,text:"-1"==e?"":e,node_type:"msg",channel:l.id,set checked(e){e?t.checkedList.push(i):t.checkedList=t.checkedList.filter((e=>!(e._id===i._id)))},get checked(){return t.checkedList.some((e=>e._id===i._id))},children:a[s][e].map((t=>{let a;return a={_id:s+"_"+e+"_"+t[0],id:t[0],msg:"-1"==e?"-1":+e.match(/0x\w+/)?.[0]||e,channel:l.id,text:t[0],node_type:"signal",comment:t[1],remark:t[2],canId:t[3],rawValue:t[4],maxRaw:t[5],minRaw:t[6],maxPhys:t[7],minPhys:t[8],selectPhys:t[9],unit:t[10],startBit:t[11],length:t[12],physStep:t[13],dlc:t[14],canType:t[15],periodic:t[16],eteDisable:t[17]},a}))},l.children.push(i)}e.push(l)}let l=[];for(let s=0;s<e.length;s++){let t=e[s];if(-1!=t.id&&l.push(t),this.inputStr||this.expandKeys.has(t.id))for(let e=0;e<t.children.length;e++){let a=t.children[e];"-"!=a.id[0]&&l.push(a)}}if(this.inputStr.length>0){const e=this.inputStr.toLowerCase();let t;try{t=new RegExp(e,"i")}catch(i){t={test:e=>~e.toLowerCase().indexOf(e.toLowerCase())}}l=l.filter((e=>t.test(e.text)||e.comment&&t.test(e.comment)||e.remark&&t.test(e.remark)))}return l}},watch:{checkedListIndex:{handler(e){this.checkedList=[]},deep:!0}},mounted(){this.$refs.chsInputRef.focus(),setTimeout((()=>{document.body.addEventListener("mousedown",this.clickHandler)}),300)},beforeUnmount(){},unmounted(){document.body.removeEventListener("mousedown",this.clickHandler)},methods:{clickHandler(e){0==this.$refs.root?.contains(e.target)&&this.$emit("cancel")},showFirstChild(e){this.expandKeys.has(e.id)?this.expandKeys.delete(e.id):this.expandKeys.add(e.id)},clearTable(){this.checkedList=[]},title4node:e=>Q(e),showMessage({level:e,content:t,timeout:a}){clearTimeout(Ed),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(Ed=setTimeout((()=>{this.message.visible=!1}),a))},submit(){this.checkedList.length>80?this.showMessage({level:"error",content:"信号选择不能超过80项",timeout:3e3}):this.$emit("signalsChange",this.checkedList)},highlightWord(e){if(!e)return e;const t=this.inputStr;if(!t)return e;const a=t.split(/\s+/g);var l,i,s=a.length;for(l=0;l<s;l++)try{(i=new RegExp(a[l],"gi")).test(e)&&(e=e.replace(i,"<strong>$&</strong>"))}catch(n){i=a[l],e=e.replace(i,"<strong>$&</strong>")}return e}}},[["render",function(e,t,a,l,i,s){const n=d("RecycleScroller"),o=d("Message"),u=r("tooltip"),b=r("esc");return c((h(),m("div",_d,[c(p("input",{class:"chs-input-er",placeholder:"搜索信号名称/信号描述",ref:"chsInputRef","onUpdate:modelValue":t[0]||(t[0]=e=>i.inputStr=e),onInput:t[1]||(t[1]=(...t)=>e.onChange&&e.onChange(...t)),draggable:!1},null,544),[[I,i.inputStr]]),p("div",Nd,[g(n,{class:"chs-list",items:s.list,"item-size":28,"key-field":"_id"},{default:f((({item:e})=>[p("label",null,["channel"==e.node_type&&e.id>=1e3?(h(),m("div",{key:0,style:{"margin-left":"1px"},class:F(!i.inputStr&&i.expandKeys.has(e.id)?"switch-open":"switch-close"),onClick:L((t=>s.showFirstChild(e)),["stop","prevent"])},null,10,Ad)):v("",!0),"channel"==e.node_type&&e.id>=1e3?c((h(),m("input",{key:1,style:{"margin-left":"3px"},id:e._id,type:"checkbox","onUpdate:modelValue":t=>e.checked=t,"data-indeterminate":e.indeterminate,"click.stop":""},null,8,Od)),[[U,e.checked]]):v("",!0),"channel"==e.node_type&&e.id>=1e3?(h(),m("span",{key:2,class:"chs-node",innerHTML:s.highlightWord(e._id)},null,8,Pd)):"msg"==e.node_type?c((h(),m("div",{key:3,for:e.children,style:{"text-indent":"2em","margin-left":"-15px"},class:"chs-node chs-node-item"},[c(p("input",{id:e._id,type:"checkbox","onUpdate:modelValue":t=>e.checked=t,"data-indeterminate":e.indeterminate,"click.stop":""},null,8,Hd),[[U,e.checked]]),p("span",{class:"",innerHTML:s.highlightWord(e.text)},null,8,Bd)],8,Ud)),[[u,{content:s.title4node(e),html:!0},void 0,{right:!0}]]):v("",!0)])])),_:1},8,["items"])]),p("div",jd,[p("div",{class:"chs-btn confirm",onClick:t[2]||(t[2]=(...e)=>s.submit&&s.submit(...e))},"确认"),p("div",{class:"chs-btn cancel",onClick:t[3]||(t[3]=(...e)=>s.clearTable&&s.clearTable(...e))},"重置")]),g(o,{message:i.message},null,8,["message"])])),[[b,()=>e.$emit("cancel")]])}],["__scopeId","data-v-29de65dd"]]),InputOrSelect:Bn},data:()=>({nodeVal:{},mode:"schedule",cur:-1,linListTable:{cols:[{label:"",width:"2.8em",icon:"add"},{label:"Frame Name",width:"auto"},{label:"Delay (ms)",width:"9em",tooltip:{content:"1-1000ms:周期发送<br/>0:单点发送",html:!0}},{label:"ID",width:"4.5em",tooltip:"DBC导入禁止修改ID"},{label:"Channel",width:"6em"},{label:"DIR",width:"6em"},{label:"DLC",width:"3em"},{label:"",width:"5em"}]},linSigTable:{cols:[{label:"Signal Name",width:"auto"},{label:"Raw",width:"90px"},{label:"Phys",width:"200px"},{label:"Unit",width:"4em"}]},linIsHexMulti:!1,hexs:[],activeTab:0,activeChn:0,activeScheduleIndex:-1,activeTableList:new Map,chooseLinSignalShow:!1,linAddRecordShow:!1,otherFrames:[],cur:-1,isDeploying:!1,isDeployChecked:!0,showScheduleList:!0,scheduleStyleOpt:[{label:"调度表",value:"schedule",disable:"false"},{label:"单帧",value:"single",disable:"false"}],isFilled:!0}),watch:{curFileIdx(e){this.activeTab=e,console.log("this.activeChn",this.activeChn,this.ldfChn)},deployDisable(e){console.log("部署disable",e)},linSendInfo(e){console.log("val111111",e),this.activeLinData=e?.data[this.activeChn]},ldfChn:{handler(e){console.log("newVal07051108",e),this.nodeVal={},this.otherFrames=[],this.scheduleList=[]},deep:!0,immediate:!0},"$props.store.sendRecord.isRecording":{handler(e){e&&this.updateMultiFrame(this.otherFrames.map(((e,t)=>({...e,row:t+1}))),"add")}},"$props.store.sendRecord":{handler(e,t){}},otherFrames:{async handler(e,t){if(console.log("nextFrames1800",e),!this.isSyncFrames){this.isSyncFrames=!0,this.isHexMulti=!1;for(let t=0;t<e.length;t++){this.isDeployChecked=!1;let a=e[t],l=a.channel;console.log("frame07051053",l);let i=a.id;console.log("frame.dirty07041441",a.dirty,a),"raw"===a.dirty?await E.blfLogging.getRawValueToPhysValueLIN({ldfChannel:this.ldfChn[this.activeTab],linId:i,signalsData:a.children.map((e=>({name:e.text,rawValue:e.rawValue})))}).then((e=>{this.otherFrames[t]={...a,rawData:e.data.data.rawData,children:a.children.map((t=>({...t,physValue:e.data.data.signalsData.find((e=>e.name===t.id))?.physValue??t.physValue}))),dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...this.otherFrames[t]}],"modify"),this.isDeploying&&this.getDSServer()})).catch(console.log):"data"===a.dirty?(console.log("this.otherFrames[i]07051410",a),"dbc"===a.from||"sch"===a.from?await E.blfLogging.getDataToValuesLIN({ldfChannel:this.ldfChn[this.activeTab],linId:i,rawData:a.rawData}).then((e=>{console.log("res07110934",e),this.otherFrames[t]={...a,children:a.children.map((t=>({...t,physValue:e.data.data.signalsPhysData.find((e=>e.name===t.id))?.physValue??t.physValue,rawValue:e.data.data.signalsRawData.find((e=>e.name===t.id))?.rawValue??t.rawValue}))),dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...this.otherFrames[t]}],"modify")})).catch(console.log):(this.otherFrames[t]={...a,dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...this.otherFrames[t]}],"modify")),this.isDeploying&&this.getDSServer()):"phys"===a.dirty?(console.log("frame.children0710",a.children),await E.blfLogging.getPhysValueToRawValueLIN({ldfChannel:this.ldfChn[this.activeTab],linId:i,signalsData:a.children.map((e=>({name:e.text,physValue:parseInt(e.physValue)})))}).then((e=>{this.otherFrames[t]={...a,rawData:e.data.data.rawData,children:a.children.map((t=>({...t,rawValue:e.data.data.signalsData.find((e=>e.name===t.id))?.rawValue??t.rawValue}))),dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...this.otherFrames[t]}],"modify"),this.isDeploying&&this.getDSServer()})).catch(console.log)):"dlc"===a.dirty?(this.otherFrames[t]={...a,rawData:Array.from({length:a.dlc},((e,t)=>a.rawData[t]||0)),dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...a}],"modify"),this.isDeploying&&this.getDSServer()):"delay"===a.dirty?(this.otherFrames[t]={...a,isSending:0!=a.delay&&a.isSending,dirty:!1,raw:t+1},this.updateMultiFrame([{row:t+1,...a}],"modify"),this.isDeploying&&this.getDSServer()):a.dirty&&(this.otherFrames[t].dirty=!1,this.updateMultiFrame([{row:t+1,...a}],"modify"),this.isDeploying&&this.getDSServer())}this.isSyncFrames=!1}},deep:!0},cur(e){console.log("cur07041051",e,this.otherFrames[e]),this.isHexMulti=!1,this.hexs=[]}},computed:{scheduleList(){if(console.log("this.nodeVal",Object.keys(this.nodeVal),this.nodeVal,this.linSendInfo,this.ldfChn[this.activeTab]),Object.keys(this.nodeVal).length>0&&""!==this.nodeVal.value){let e={};if("master"===this.nodeVal.parentNode)return this.showScheduleList=!0,e=0!==this.ldfChn[this.activeTab]?this.linSendInfo.data[this.ldfChn[this.activeTab]][this.nodeVal.parentNode][this.nodeVal.value]:{},Object.keys(e||{});{this.showScheduleList=!1,e=0!==this.ldfChn[this.activeTab]?this.linSendInfo.data[this.ldfChn[this.activeTab]][this.nodeVal.parentNode]:{};let t=Object.keys(e||{});return console.log("99999",t),t.forEach(((e,t)=>{e===this.nodeVal.value&&this.checkedSchedule(t,e)})),t}}},checkedOptions(){return this.otherFrames.filter((e=>"dbc"==e.from))}},mounted(){setTimeout((()=>{document.body.addEventListener("mousedown",this.clickHandler)}),300)},unmounted(){document.body.removeEventListener("mousedown",this.clickHandler)},methods:{checkedSchedule(e,t){let a=[];console.log("this.nodeVal.parentNode1749",this.nodeVal.parentNode),a="master"===this.nodeVal.parentNode?0!==this.ldfChn[this.activeTab]?this.linSendInfo.data[this.ldfChn[this.activeTab]][this.nodeVal.parentNode][this.nodeVal.value][t]:[]:0!==this.ldfChn[this.activeTab]?this.linSendInfo.data[this.ldfChn[this.activeTab]][this.nodeVal.parentNode][t]:[],this.activeScheduleIndex=e;let l=a.map((e=>({_id:this.nodeVal.parentNode+"_"+e[0]+"_"+this.mode,id:e[1],linId:e[1],text:e[0],name:e[0],dir:e[2],dlc:e[3],delay:e[4],channel:this.ldfChn[1],dirty:"raw",from:"sch",children:e[5].map((e=>{let t;return t={_id:e[0],id:e[0],text:e[0],node_type:"signal",comment:e[1],remark:e[2],linId:e[3],rawValue:e[4],maxRaw:e[5],minRaw:e[6],maxPhys:e[7].toString(),minPhys:e[8].toString(),selectPhys:e[9],unit:e[10],startBit:e[11],length:e[12],physStep:e[13].toString(),dlc:e[14],canType:e[15],periodic:e[16]},t}))})));this.otherFrames=[],this.otherFrames.push(...l),this.activeTableList.set(this.nodeVal.parentNode+"-"+this.nodeVal.value+"-"+this.mode,{phone:"213-555-1234",address:"123 N 1st Ave"})},clickHandler(e){0==this.$refs.root?.contains(e.target)&&(this.linAddRecordShow=!1)},showMessage({level:e,content:t,timeout:a}){clearTimeout(qd),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(qd=setTimeout((()=>{this.message.visible=!1}),a))},onHexErr(){this.showMessage({timeout:2e3,level:"error",content:"请输入正确格式的16进制"})},addFrame(e){this.linAddRecordShow=!1;let t=[{name:"",delay:20,id:1===e,channel:this.ldfChn[1],canType:e,dir:"tx",dlc:8,isSending:!1,from:e,rawData:[0,0,0,0,0,0,0,0]}],a=this.otherFrames.length-1;this.otherFrames.push(...t),this.updateMultiFrame(t.map(((e,t)=>({...e,row:a+t}))),"add")},updateMultiFrame(e,t){console.log("list07051359",e),this.$props.store.sendRecord.isRecording&&e.map((e=>({...e,channel:this.$props.store.sendRecord.dbc.ldfChn.indexOf(e.channel)+1})))},updateFrame(e){let t=this.otherFrames.slice(),a=[],l=[];for(let i=t.length-1;i>=0;i--){let a=t[i];if("dbc"===a.from){let s=e.findIndex((e=>e.id===a.id));if(~s)e.splice(s,1);else{i===this.cur&&(this.cur=-1);let e=t.splice(i,1);l.unshift({...e,row:i+1})}}}this.updateMultiFrame(l,"delete"),a=e.map(((e,t)=>{let a=e.children[0]||{};return console.log("it2222",a),{...e,name:e.text,from:"dbc",periodic:a.periodic||0,canType:a.canType||"LIN",dlc:a.dlc||64,id:a.msg||0,linId:a.canId||0,dirty:"raw",dir:"tx",delay:10,isSending:!1,children:e.children.map((e=>({...e,name:e.id})))}})),t.push(...a),this.otherFrames=t,console.log("this.frames07040952",this.otherFrames),this.chooseLinSignalShow=!1,this.addRecordShow=!1},async startDeploy(){console.log("部署",this.nodeVal,this.nodeVal.parentNode),this.isDeploying=!0;for(var e=0;e<this.scheduleStyleOpt.length;e++)"single"===this.scheduleStyleOpt[e].value&&(this.scheduleStyleOpt[e].disable="true");this.getDSServer(),console.log("ldfChn11",this.ldfChn,this.otherFrames)},async getDSServer(){await E.blfLogging.getDeployShedule({channelId:2,mode:this.nodeVal.parentNode?this.nodeVal.parentNode:this.isFilled?"master":"slave",LINFrames:this.otherFrames.map((e=>({LINId:e.linId?"0x"+(parseInt(e.linId)||0).toString(16):"0x0",dataLength:e.rawData?e.rawData.length:0,dir:"tx"===e.dir?0:1,delay:e.delay,data:e.rawData})))}).then((e=>{})).catch(console.log)},async endDeploy(){this.isDeploying=!1;for(var e=0;e<this.scheduleStyleOpt.length;e++)"single"===this.scheduleStyleOpt[e].value&&(this.scheduleStyleOpt[e].disable="false");await E.blfLogging.getUnDeployShedule({channelId:2,mode:this.nodeVal.parentNode?this.nodeVal.parentNode:this.isFilled?"master":"slave"}).then((e=>{})).catch(console.log)},async togglePlay(e,t){console.log("raw07162036",e,t),await E.blfLogging.getManualSendLIN({channelId:2,mode:this.nodeVal.parentNode?this.nodeVal.parentNode:this.isFilled?"master":"slave",LINFrames:[{LINId:e.linId?"0x"+(parseInt(e.linId)||0).toString(16):"0x0",dataLength:e.rawData.length,dir:"tx"===e.dir?0:1,delay:e.delay,data:e.rawData}]}).then((e=>{}))},delFrame(e){console.log("idx200322222",e,this.otherFrames),e===this.cur&&(this.cur=-1);let t=this.otherFrames.splice(e,1);this.otherFrames.forEach(((e,t)=>{this.otherFrames[t].raw=t+1})),this.updateMultiFrame([{...t,row:e+1}],"delete")}}},Kd=e=>(w("data-v-d39bfe60"),e=e(),C(),e),Wd={class:"lin-body"},Gd={class:"select-er"},Xd={class:"select-left"},Yd=Kd((()=>p("span",{class:"record-header-message"},[p("b",null,"节点：")],-1))),Jd={key:0,class:"chs-ft-label pointer"},Qd=["checked"],Zd=Kd((()=>p("i",{class:"icon-ques"},null,-1))),er={class:"select-right"},tr=Kd((()=>p("i",{class:"play-icon"},null,-1))),ar=Kd((()=>p("i",{class:"stop-icon"},null,-1))),lr={class:"lin-list-wrap"},ir={class:"lin-list-tree-er"},sr=Kd((()=>p("div",{class:"lin-list-tree-tit"},[p("i",{class:"lin-list-icon"}),p("b",null,"LIN调度表")],-1))),nr={class:"lin-list-tree-body"},or=["data-disabled","data-active","onClick"],dr=Kd((()=>p("i",{class:"lin-list-icon-sm"},null,-1))),rr=["title"],cr={class:"lin-list-er"},hr={class:"lin-list-table"},mr={key:1,class:"ic-help"},pr={key:2,type:"checkbox"},ur={class:"add-record",ref:"root"},gr=["data-disabled"],br=["data-disabled"],fr=["onClick","data-active"],yr=["data-from","data-cantype","data-valid"],vr=["onUpdate:modelValue","onChange"],wr=["onUpdate:modelValue","onChange"],Cr=["value"],kr=["onUpdate:modelValue","onChange"],Sr=[Kd((()=>p("option",{value:"tx"},"tx",-1))),Kd((()=>p("option",{value:"rx"},"rx",-1)))],Tr=["disabled","onUpdate:modelValue","onChange"],Dr=["data-disable","data-recording","data-active","onClick"],Vr=["data-disable","onClick"],xr={key:0,class:"table-empty"},Ir={class:"empty-meark"},Lr={class:"btn-import-er"},Fr={class:"lin-sig-er"},Rr={class:"lin-hex-er"},$r=Kd((()=>p("th",{style:{width:"4em"}}," ",-1))),Mr={style:{width:"11.8%"}},Er={key:0},_r=["value"],Nr={class:"hex-footer"},Ar={class:"hex-multi-input"},Or=["data-theme","data-position"],Pr={class:"tab"},Ur=["value"],Hr=["data-dirty","onClick"];let Br=0;const jr={props:["store","setStore","closeFlag"],emits:["connect","showMessage","getCarCode"],components:{Button:l,Header:a,FrameRecord:ps,LinRecord:Cn,ChartRecord:ci,EditModal:He,FiveChannelEditModal:Xt,TwelveChannelEditModal:Sa,SendRecord:Vo,Message:i,LinSendRecord:$d,LinOtherSendRecord:s(zd,[["render",function(e,t,a,l,i,s){const n=d("v-select"),o=d("ButtonGroup"),w=d("Button"),C=d("EditWrapper"),k=d("InputHex"),T=d("ChooseSignal"),D=d("InputOrSelect"),V=r("tooltip");return h(),m("div",Wd,[p("div",Gd,[p("div",Xd,[Yd,g(n,{options:a.nodeOpt,clearable:!1,searchable:!1,disabled:i.isDeploying,label:"label",value:"value",modelValue:i.nodeVal,"onUpdate:modelValue":t[0]||(t[0]=e=>i.nodeVal=e),class:"tch-tool-select"},null,8,["options","disabled","modelValue"]),"0"==a.ldfChn[this.activeTab]?c((h(),m("label",Jd,[p("input",{class:"chs-node-checkboxAll",type:"checkbox",checked:i.isFilled,onClick:t[1]||(t[1]=t=>e.checkMasterMode())},null,8,Qd),y("主节点模式"),Zd])),[[V,"主节点模式"]]):v("",!0)]),p("div",er,[g(o,{options:i.scheduleStyleOpt,class:"theme-btn-group",modelValue:i.mode,"onUpdate:modelValue":t[2]||(t[2]=e=>i.mode=e)},null,8,["options","modelValue"]),y("  "),i.isDeploying?(h(),N(w,{key:1,type:"primary",class:"header-import-btn",onClick:s.endDeploy},{default:f((()=>[ar,y("停止 ")])),_:1},8,["onClick"])):(h(),N(w,{key:0,type:"primary",class:"header-import-btn",onClick:s.startDeploy,disabled:i.isDeployChecked||"single"==i.mode||a.deployDisable,progress:"100%"},{default:f((()=>[tr,y("部署 ")])),_:1},8,["onClick","disabled"]))])]),p("div",lr,[c(p("div",ir,[sr,p("div",nr,[(h(!0),m(b,null,S(s.scheduleList,((e,t)=>(h(),m("div",{class:"lin-list-tree-item",key:t,"data-disabled":i.isDeploying,"data-active":i.activeScheduleIndex===t,onClick:a=>s.checkedSchedule(t,e)},[dr,p("span",{title:e},u(e),9,rr)],8,or)))),128))])],512),[[A,i.showScheduleList]]),p("div",cr,[p("table",hr,[p("tr",null,[(h(!0),m(b,null,S(i.linListTable.cols,(e=>(h(),m("th",{style:R({width:e.width})},[y(u(e.label)+" ",1),e.icon?(h(),m("i",{key:0,onClick:t[3]||(t[3]=e=>i.linAddRecordShow=!i.linAddRecordShow),class:"lin-ic-add"})):v("",!0),e.tooltip?c((h(),m("i",mr,null,512)),[[V,e.tooltip]]):v("",!0),e.type?(h(),m("input",pr)):v("",!0)],4)))),256)),c(p("div",ur,[p("div",{onClick:t[4]||(t[4]=e=>i.chooseLinSignalShow=!i.chooseLinSignalShow),"data-disabled":0===e.$props.store?.sendRecord?.otherFrames?.length||i.isDeploying},"从DBC中导入帧",8,gr),p("div",{onClick:t[5]||(t[5]=e=>s.addFrame("LIN")),"data-disabled":0==e.$props.store?.sendRecord?.otherFrames?.length||i.isDeploying},"自定义帧",8,br)],512),[[A,i.linAddRecordShow]])]),(h(!0),m(b,null,S(i.otherFrames,((t,a)=>(h(),m("tr",{onClick:e=>i.cur=a,"data-active":i.cur===a},[p("td",null,u(a+1),1),p("td",null,[p("i",{class:"ic-can","data-from":t.from,"data-cantype":t.canType,"data-valid":Object.values(e.$props.store.sendRecord.dbc.ldfChn).includes(t.channel)},null,8,yr),y(" "+u(t.name),1)]),p("td",null,[g(C,null,{default:f((()=>[c(p("input",{class:"td-input",type:"number",min:"0",max:"1000","onUpdate:modelValue":e=>t.delay=e,onChange:e=>t.dirty="delay"},null,40,vr),[[I,t.delay,void 0,{lazy:!0}]])])),_:2},1024)]),p("td",null,[g(C,{disabled:"LIN"!==t.from},{default:f((()=>[g(k,{onError:s.onHexErr,min:0,max:2047,disabled:"LIN"!==t.from,class:"td-input",modelValue:t.linId,"onUpdate:modelValue":e=>t.linId=e,onChange:e=>t.dirty="linId"},null,8,["onError","disabled","modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["disabled"])]),p("td",null,[g(C,{disabled:!0},{default:f((()=>[c(p("select",{disabled:!0,class:"td-input","onUpdate:modelValue":e=>t.channel=e,onChange:e=>t.dirty="channel"},[(h(!0),m(b,null,S(e.$props.store.sendRecord.dbc.ldfChn,((e,t)=>(h(),m("option",{value:e},"LIN2",8,Cr)))),256))],40,wr),[[j,t.channel,void 0,{lazy:!0}]])])),_:2},1024)]),p("td",null,[g(C,null,{default:f((()=>[c(p("select",{class:"td-input","onUpdate:modelValue":e=>t.dir=e,onChange:e=>t.dirty="dir"},Sr,40,kr),[[j,t.dir]])])),_:2},1024)]),p("td",null,[g(C,{disabled:"LIN"!==t.from},{default:f((()=>[c(p("input",{disabled:"LIN"!==t.from,class:"td-input",type:"number",min:"0",max:"8","onUpdate:modelValue":e=>t.dlc=e,onChange:e=>t.dirty="dlc"},null,40,Tr),[[I,t.dlc,void 0,{lazy:!0}]])])),_:2},1032,["disabled"])]),p("td",null,["schedule"!==i.mode?(h(),m("i",{key:0,class:"ic-play","data-disable":Object.values(e.$props.store.sendRecord.dbc.ldfChn).includes(t.channel),"data-recording":e.$props.store.sendRecord.isRecording,"data-active":t.isSending,onClick:e=>s.togglePlay(t,a)},null,8,Dr)):v("",!0),y("  "),p("i",{class:"ic-del","data-disable":i.isDeploying,onClick:L((e=>s.delFrame(a)),["stop"])},null,8,Vr)])],8,fr)))),256))]),0==i.otherFrames.length?(h(),m("div",xr,[p("div",Ir,[y("暂无内容，请先"),p("span",{class:"empty-btn",onClick:t[6]||(t[6]=e=>i.linAddRecordShow=!i.linAddRecordShow)},"导入帧")])])):v("",!0)]),c(p("div",Lr,[i.chooseLinSignalShow?(h(),N(T,{key:0,filledOptions:e.$props.store.sendRecord.otherFrames,checkedOptions:s.checkedOptions,onSignalsChange:s.updateFrame,onCancel:t[7]||(t[7]=()=>{i.chooseLinSignalShow=!1})},null,8,["filledOptions","checkedOptions","onSignalsChange"])):v("",!0)],512),[[A,i.chooseLinSignalShow]])]),p("div",Fr,[(h(),m("table",{class:"sig-table",key:"sig"+i.cur},[p("tr",null,[(h(!0),m(b,null,S(i.linSigTable.cols,(e=>(h(),m("th",{style:R({width:e.width})},u(e.label),5)))),256))]),""!==i.otherFrames[i.cur]?.name?(h(!0),m(b,{key:0},S(i.otherFrames[i.cur]?.children,(e=>(h(),m("tr",null,[c((h(),m("td",null,[y(u(e.text)+" ",1)])),[[V,{content:`${e.text}<hr/>phys:${e.minPhys} ~ ${e.maxPhys}<br/>raw:${e.minRaw?"0x"+e.minRaw.toString(16):""} ~ ${e.maxRaw?"0x"+e.maxRaw.toString(16):""}<br/>Start Bit:${e.startBit}<br>Length:${e.length}<br>Phys Step:${e.physStep}`,html:!0},void 0,{"top-start":!0}]]),p("td",null,[g(C,null,{default:f((()=>[g(k,{watch:!0,onError:s.onHexErr,min:e.minRaw,max:e.maxRaw,class:"td-input",modelValue:e.rawValue,"onUpdate:modelValue":t=>e.rawValue=t,modelModifiers:{lazy:!0},onChange:t[8]||(t[8]=e=>i.otherFrames[i.cur].dirty="raw")},null,8,["onError","min","max","modelValue","onUpdate:modelValue"])])),_:2},1024)]),p("td",null,[g(C,null,{default:f((()=>[g(D,{watch:!0,min:e.minPhys,max:e.maxPhys,class:"td-input",step:e.physStep,modelValue:e.physValue,"onUpdate:modelValue":t=>e.physValue=t,enum:e.selectPhys?e.selectPhys:"",onChange:t[9]||(t[9]=e=>i.otherFrames[i.cur].dirty="phys")},null,8,["min","max","step","modelValue","onUpdate:modelValue","enum"])])),_:2},1024)]),p("td",null,u(e.unit),1)])))),256)):v("",!0)]))]),p("div",Rr,[(h(),m("table",{class:"lin-hex-table",key:"hex"+i.cur},[p("tr",null,[$r,(h(),m(b,null,S([0,1,2,3,4,5,6,7],(e=>p("th",Mr,u(e),1))),64))]),i.otherFrames[i.cur]?.rawData?(h(),m(b,{key:0},S([0,8,16,24,32,40,48,56,64],((a,l)=>(h(),m(b,null,[i.otherFrames[i.cur].rawData.length>a?(h(),m("tr",Er,[p("td",null,[p("b",null,u(a),1)]),(h(),m(b,null,S(8,(l=>p("td",null,[e.isHexMulti&&a+l-1<i.otherFrames[i.cur].rawData.length?c((h(),m("input",{key:0,type:"checkbox",class:"radio","onUpdate:modelValue":t[10]||(t[10]=e=>i.hexs=e),value:a+l-1},null,8,_r)),[[U,i.hexs]]):v("",!0),a+l-1<i.otherFrames[i.cur].rawData.length?(h(),N(C,{key:1},{default:f((()=>[g(k,{watch:!0,onError:s.onHexErr,min:0,max:255,class:"td-input",style:{width:"calc(100%)","text-indent":"20px"},modelValue:i.otherFrames[i.cur].rawData[a+l-1],"onUpdate:modelValue":e=>i.otherFrames[i.cur].rawData[a+l-1]=e,modelModifiers:{lazy:!0},onChange:t[11]||(t[11]=e=>i.otherFrames[i.cur].dirty="data")},null,8,["onError","modelValue","onUpdate:modelValue"])])),_:2},1024)):v("",!0)]))),64))])):v("",!0)],64)))),64)):v("",!0)])),p("div",Nr,[i.linIsHexMulti?(h(),m(b,{key:1},[y(" 批量修改:("+u(i.hexs.length)+"个)  ",1),g(w,{style:{float:"right",height:"23px","margin-left":"8px"},onClick:t[13]||(t[13]=e=>{i.hexs=[],i.linIsHexMulti=!1})},{default:f((()=>[y("退出")])),_:1}),g(w,{style:{float:"right",height:"23px"},type:"primary"},{default:f((()=>[y("修改")])),_:1}),p("div",Ar,[g(k,{onError:s.onHexErr,min:0,max:255,modelValue:e.hexMultiValue,"onUpdate:modelValue":t[14]||(t[14]=t=>e.hexMultiValue=t)},null,8,["onError","modelValue"])])],64)):(h(),m("div",{key:0,class:"hex-footer-full-btn",onClick:t[12]||(t[12]=e=>i.linIsHexMulti=!i.linIsHexMulti)},"进入批量修改"))])])])}],["__scopeId","data-v-d39bfe60"]]),Tabs:s({props:["theme","modelValue","options","position","closeable"],emits:["update:modelValue","close"],data(){return{value:this.$props.modelValue}},watch:{value(e){e!==this.modelValue&&this.$emit("update:modelValue",e)},modelValue(e){this.value=e}},methods:{onWheel(e){let t=0;t=e.deltaY>0||e.deltaX>0?100:-100;const a=this.$refs.rootRef;let l=a.scrollLeft+t;l<0?l=0:l+a.clientWidth>=a.scrollWidth&&(l=a.scrollWidth-a.clientWidth),console.log("nextD",a,l),a.scrollLeft=l}}},[["render",function(e,t,a,l,i,s){return h(),m("div",{class:"tab-er","data-theme":a.theme||"default","data-position":a.position,ref:"rootRef",onWheel:t[1]||(t[1]=(...e)=>s.onWheel&&s.onWheel(...e))},[(h(!0),m(b,null,S(a.options,(l=>(h(),m("label",Pr,[p("span",null,u(l.label),1),c(p("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),value:l.value},null,8,Ur),[[q,i.value]]),a.closeable?(h(),m("i",{key:0,class:"ic-close","data-dirty":l.dirty,onClick:t=>e.$emit("close",l.value)},null,8,Hr)):v("",!0)])))),256)),H(e.$slots,"default",{},void 0,!0)],40,Or)}],["__scopeId","data-v-e3e22d2b"]])},data:()=>({system:$,isHardwareChecked:!1,expandKeys:new Set,visibleStartIndex:0,visibleEndIndex:0,bottomPadding:0,recordLoading:!1,startTime:0,editModal:{title:"配置",editVisible:!1},mode:"all",dbcVal:"",sliderValue:-1,channelOne:"",channelTwo:"",channelThree:"",channelFour:"",channelFive:"",channelSix:"",channelSeven:"",channelEight:"",channelNine:"",channelTen:"",channelEleven:"",channelTwelve:"",linChannelVal:"",linChannelValTwo:"",filePath:"",comments:["","","","","","","","","","","","","","","",""],message:{visible:!1,level:"",content:""},seconds:0,rowData:[],isRecording:!1,startSqlId:0,endSqlId:0,isLock:!1,isScrollEnd:!0,isAddData:!0,secondConfirm:!1,topLock:!1,bottomLock:!1,openFlag:!1,mlist:[{key:"lookRecord",name:"CAN帧查看",icon:"box"},{key:"supeRecord",name:"图像查看",icon:"setting"},{key:"sendRecord",name:"CAN发送报文",icon:"send"},{key:"linSendRecord",name:"LIN发送报文",icon:"send"},{key:"linRecord",name:"LIN帧查看",icon:"box"}],cur:"lookRecord",recordShow:!1,linRecordShow:!0,colFilterShow:!1,recordChart:"RecordChart",recordTime:"00:00:00",frames:[],timeData:Object.freeze([]),showSignalsList:[],updateSignalData:{},dbcLoading:!1,sendRecordShow:!1,linSendRecordShow:!1,lookRecord:!0,isEditModalLoading:!1,sn:"--",sw:"--",frameType:"canFrame",sdb:"E4U3_1115",dbcChn:[],ldfChn:[],linSendInfo:[],channelValList:[],linChannelValList:[],chartTableData:[],btnActionStyle:"",curFileIdx:0,mainTabs:[],activeTab:0,activeLinData:{},nodeOpt:[],deployDisable:!0}),watch:{mode(e,t){this.topPadding=0,this.$refs.table.scrollToItem(0),this.expandKeys.clear(),this.rowData=[],this.isRecording&&this.resumeScroll()},frames(e){this.$props.setStore("sendRecord",{frames:e})},isRecording(e){this.$props.setStore("sendRecord",{isRecording:e})},curFileIdx(e){this.activeTab=this.ldfChn[e],console.log("newVal",e,this.ldfChn,this.activeTab),0===this.activeTab?(this.nodeOpt=[],console.log("111111")):this.changeTabOption(this.activeTab)}},computed:{quitConfirm(){return!!(this.dbcVal||this.channelOne||this.channelTwo||this.channelThree||this.filePath)}},methods:{_onConnectDevice(){JSBridge.send({method:"initDevice",data:{key:"value"}},(e=>{console.log("111111111",e.sn,e.version),200==e.code&&(this.isRecording=!0,this.sn=e.data.sn,this.sw=e.data.version)}))},chartTableFun(e){this.chartTableData=e?.filter((e=>e.values.length>0))},updateTimeData(e){this.$refs.chartRecordRef?.upTimeData(e)},recordTimeChange(e){this.recordTime=e},async colFilterChange(){this.editModal.editVisible=!0,await E.blfLogging.checkHardware().then((async e=>{1===e?.data?.code?(this.showMessage({timeout:5e3,level:"success",content:e.data?.msg||"硬件连接成功"}),this.sn=e.data.data.sn,this.sw=e.data.data.sw,this.isHardwareChecked=!0):(this.isHardwareChecked=!1,this.showMessage({timeout:5e3,level:"error",content:e.data?.msg||"硬件连接失败"}))})).catch((e=>{this.isHardwareChecked=!1,this.showMessage({timeout:5e3,level:"error",content:"硬件连接失败"})})).finally((()=>{this.isEditModalLoading=!1}))},_startRecord(){this.updateSignalData=this.$refs.chartRecordRef?.view,this.$refs.chartRecordRef?.updateSignal(this.updateSignalData?.children,"1"),this.$refs.chartRecordRef?.clearTimeData(),this.btnActionStyle="normal",this.$refs.frameRecordRef.startRecord(this.btnActionStyle),this.isRecording=!0,this.deployDisable=!1},async startRecord(){this.updateSignalData=this.$refs.chartRecordRef?.view,this.$refs.chartRecordRef?.updateSignal(this.updateSignalData?.children,"1"),this.$refs.chartRecordRef?.clearTimeData(),this.btnActionStyle="normal",this.$refs.frameRecordRef.startRecord(this.btnActionStyle),this.$refs.linRecordRef.startRecord(),this.isRecording=!0,this.deployDisable=!1,M.report("track","click",{element_name:"开始录制",tip:"1174.18.0.1.33199"})},async startListen(){this.btnActionStyle="listen",this.$refs.frameRecordRef.startRecord(this.btnActionStyle)},endRecord(){this.$refs.frameRecordRef.endRecord(),this.isRecording=!1,this.deployDisable=!0,M.report("track","click",{element_name:"停止录制",tip:"1174.18.0.1.33203"})},choose(e){this.cur=e,"supeRecord"==e?(this.recordShow=!0,this.sendRecordShow=!0,this.linSendRecordShow=!0,this.lookRecord=!1,this.linRecordShow=!0):"lookRecord"==e?(this.recordShow=!1,this.sendRecordShow=!0,this.linSendRecordShow=!0,this.lookRecord=!0,this.frameType="canFrame",this.linRecordShow=!0):"sendRecord"==e?(this.recordShow=!0,this.lookRecord=!0,this.sendRecordShow=!1,this.linSendRecordShow=!0,this.linRecordShow=!0):"linRecord"==e?(this.linRecordShow=!1,this.recordShow=!0,this.sendRecordShow=!0,this.lookRecord=!0,this.linSendRecordShow=!0,this.frameType="linFrame"):"linSendRecord"==e&&(this.recordShow=!0,this.lookRecord=!0,this.sendRecordShow=!0,this.linSendRecordShow=!1,this.linRecordShow=!0)},updateBocks(e){this.dbcVal=e.dbcVal,this.recordLoading=e.recordLoading,this.isRecording=e.isRecording,this.filePath=e.filePath},openEditDialog(){this.editModal.editVisible=!0,this.openFlag=!1},onCancelSelect(){this.editModal.editVisible=!1},showMessage({level:e,content:t,timeout:a}){clearTimeout(Br),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,a>0&&(Br=setTimeout((()=>{this.message.visible=!1}),a))},async onSubmitToShow(e,t,a,l){console.log("dbcVal",e,t,a,l),this.dbcVal="自定义模板"===e[0]?this.dbcVal="自定义模板":this.dbcVal=e[0]+"/"+e[1],this.sdb="自定义模板"===this.dbcVal?"默认视图":this.dbcVal.split("/")[1],this.filePath=l;let i=["","","","","","","","","","","","","","","",""],s=["","","","","","","","","","","","","","","",""];this.dbcChn=t.map(((e,t)=>"(不加载)"!==e?(i[t]=e.split("-").pop(),parseInt(e.split("-")[0])):0-(t+1))),console.log("this.dbcChn111",this.dbcChn),this.ldfChn=a.map(((e,t)=>(console.log("item111",e),s[t]=e.split("-").pop(),"(不加载)"!==e?parseInt(e):0))),this.channelValList=t,this.linChannelValList=a,this.mainTabs=[],this.linChannelValList.forEach(((e,t)=>{"(不加载)"!==e?this.mainTabs.push({label:e,value:t,dirty:"tab"}):this.mainTabs.push({label:"LIN"+(t+1),value:t,dirty:"tab"})})),console.log("mainTabs",this.mainTabs,this.linChannelValList,this.linChannelValList.some((e=>"(不加载)"!==e))),this.channelOne=t[0],this.channelTwo=t[1],this.channelThree=t[2],this.linChannelVal=a[0],this.linChannelValTwo=a[1];let n={sdb:this.sdb,carType:"自定义模板"===this.dbcVal?"custom":this.dbcVal.split("/")[0],dbcChn:this.dbcChn,ldfChn:this.ldfChn,files:"自定义模板"===this.dbcVal?i:["","","","","","","","","","","","","","","",""],ldfFiles:"自定义模板"===this.dbcVal?s:["","","","","","","","","","","","","","","",""],comments:this.comments,ldfComments:this.comments};this.$props.setStore("sendRecord",{dbc:n}),this.dbcLoading=!0;let o=await E.blfLogging.getDBC(n).finally((()=>{this.dbcLoading=!1}));this.frames=o,console.log(this.frames),this.isEditModalLoading=!0,this.mainTabs.length>0&&(this.linSendInfo=await E.blfLogging.get_LIN_shc().then(),console.log("this.ldfChn[this.curFileIdx]",this.ldfChn[0],this.curFileIdx),0===this.ldfChn[0]?this.nodeOpt=[]:this.changeTabOption(this.ldfChn[this.curFileIdx]),console.log("linSendInfo22222",this.linSendInfo,this.curFileIdx,this.ldfChn[this.curFileIdx],this.nodeOpt)),this.editModal.editVisible=!1},changeTabOption(e){let t=this.linSendInfo?.data[e];if(console.log("allNodeObj",t),0!==Object.keys(t||{}).length){let e=Object.keys(t.master).map((e=>({value:e,label:e+"[主节点]",parentNode:"master"}))),a=Object.keys(t.slaves).map((e=>({value:e,label:e+"[从节点]",parentNode:"slaves"})));this.nodeOpt=[...e,...a]}}},mounted(){M.report("trackPage",{page:"报文录制",tip:"1174.18.0.1.33191"}),E.blfLogging.removeSql()},unmounted(){E.blfLogging.removeSql(),clearInterval(0),clearInterval(0)}},qr=e=>(w("data-v-d698c9a3"),e=e(),C(),e),zr={class:"record-page-er"},Kr={style:{position:"absolute",left:"1em",display:"flex","column-gap":"6px","align-items":"center"}},Wr=qr((()=>p("i",{class:"lead-icon"},null,-1))),Gr={class:"o-pul-record-btn"},Xr=qr((()=>p("i",{class:"play-icon"},null,-1))),Yr=qr((()=>p("i",{class:"stop-icon"},null,-1))),Jr={class:"o-pul-record-btn"},Qr=qr((()=>p("i",{class:"play-icon"},null,-1))),Zr={key:0,class:"o-pul-record-time"},ec={key:1,class:"o-pul-record-time"},tc={style:{display:"flex"}},ac={class:"record-header-message",style:{display:"flex","align-items":"center"}},lc={class:"record-header-message-imp"},ic=qr((()=>p("span",{style:{color:"#D9D9D9","font-size":"16px",margin:"0 10px"}},"|",-1))),sc={class:"record-header-message",style:{"margin-right":"8px"}},nc={class:"record-header-message-imp"},oc={class:"o-pul-er"},dc={class:"o-menu"},rc={style:{position:"relative"}},cc=["data-active"],hc=qr((()=>p("i",{class:"supe-look-record"},null,-1))),mc=["data-active"],pc=qr((()=>p("i",{class:"supe-record"},null,-1))),uc=["data-active"],gc=qr((()=>p("i",{class:"send-record"},null,-1))),bc=["data-active"],fc=qr((()=>p("i",{class:"send-record"},null,-1))),yc=["data-active"],vc=qr((()=>p("i",{class:"supe-lin-record"},null,-1))),wc=["data-hidden"],Cc=["data-hidden"],kc=["data-hidden"],Sc=["data-hidden"],Tc=["data-hidden"],Dc={key:0,class:"bdy-tabs"},Vc=qr((()=>p("div",{style:{width:"54px",display:"inline-block"}},null,-1)));e("default",s(jr,[["render",function(e,t,a,l,i,s){const n=d("Button"),o=d("Header"),r=d("FrameRecord"),w=d("LinRecord"),C=d("ChartRecord"),k=d("SendRecord"),S=d("Tabs"),T=d("LinSendRecord"),D=d("LinOtherSendRecord"),V=d("EditModal"),x=d("FiveChannelEditModal"),I=d("TwelveChannelEditModal"),L=d("Message");return h(),m(b,null,[p("div",zr,[g(o,{title:"报文录制",quitConfirm:s.quitConfirm,showRight:!1,recentTest:e.$props.store.connectCar.latest,connectStatus:e.$props.store.connectCar.status},{default:f((()=>[p("div",Kr,[g(n,{type:"primary",class:"header-import-btn",disabled:i.isRecording,onClick:s._onConnectDevice},{default:f((()=>[Wr,y("连接设备")])),_:1},8,["disabled","onClick"]),p("div",Gr,[i.isRecording?(h(),N(n,{key:1,type:"primary",onClick:s.endRecord,loading:i.recordLoading,progress:"100%"},{default:f((()=>[Yr,y("停止")])),_:1},8,["onClick","loading"])):(h(),N(n,{key:0,type:"primary",loading:i.recordLoading,disabled:i.dbcLoading||!i.dbcVal||!i.filePath||!i.isHardwareChecked,progress:"100%",onClick:s._startRecord},{default:f((()=>[Xr,y("监控并录制 ")])),_:1},8,["loading","disabled","onClick"]))]),p("div",Jr,[i.isRecording?v("",!0):(h(),N(n,{key:0,type:"primary",loading:i.recordLoading,disabled:i.dbcLoading||!i.dbcVal||!i.filePath||!i.isHardwareChecked,progress:"100%",onClick:s.startListen},{default:f((()=>[Qr,y("仅监控 ")])),_:1},8,["loading","disabled","onClick"]))]),"listen"==i.btnActionStyle?(h(),m("div",Zr,"监控时间: "+u(i.recordTime),1)):(h(),m("div",ec,"录制时间: "+u(i.recordTime),1))]),p("template",tc,[p("span",ac,[y(" 设备名称： "),p("span",lc,u(i.sn),1)]),ic,p("span",sc,[y(" 版本号："),p("span",nc,u(i.sw),1)])])])),_:1},8,["quitConfirm","recentTest","connectStatus"]),p("div",oc,[p("div",dc,[p("div",rc,[p("div",{class:"o-menu-it","data-active":i.cur==i.mlist[0].key||i.mlist[0].active,onClick:t[0]||(t[0]=e=>s.choose(i.mlist[0].key))},[hc,y(" "+u(i.mlist[0].name),1)],8,cc),"mac"!=i.system?(h(),m("div",{key:0,class:"o-menu-it","data-active":i.cur==i.mlist[1].key||i.mlist[1].active,onClick:t[1]||(t[1]=e=>s.choose(i.mlist[1].key))},[pc,y(" "+u(i.mlist[1].name),1)],8,mc)):v("",!0),p("div",{class:"o-menu-it","data-active":i.cur==i.mlist[2].key||i.mlist[2].active,onClick:t[2]||(t[2]=e=>s.choose(i.mlist[2].key))},[gc,y(" "+u(i.mlist[2].name),1)],8,uc),i.sn.includes("CR3")?(h(),m("div",{key:1,class:"o-menu-it","data-active":i.cur==i.mlist[3].key||i.mlist[3].active,onClick:t[3]||(t[3]=e=>s.choose(i.mlist[3].key))},[fc,y(" "+u(i.mlist[3].name),1)],8,bc)):v("",!0),i.sn.includes("CR3")?(h(),m("div",{key:2,class:"o-menu-it","data-active":i.cur==i.mlist[4].key||i.mlist[4].active,onClick:t[4]||(t[4]=e=>s.choose(i.mlist[4].key))},[vc,y(" "+u(i.mlist[4].name),1)],8,yc)):v("",!0)])]),p("div",{class:"rec-body","data-hidden":i.recordShow},[g(r,{onUpdateBock:s.updateBocks,onUpdateTimeData:s.updateTimeData,ref:"frameRecordRef",onChartTableFun:s.chartTableFun,frameType:i.frameType,sn:i.sn,dbcChn:i.dbcChn,ldfChn:i.ldfChn,channelValList:i.channelValList,linChannelValList:i.linChannelValList,channelOne:i.channelOne,channelTwo:i.channelTwo,channelThree:i.channelThree,linChannelVal:i.linChannelVal,linChannelValTwo:i.linChannelValTwo,filePath:i.filePath,onRecordTimeChange:s.recordTimeChange,dbcVal:i.dbcVal,colFilterShow:i.colFilterShow,onStartTimeChange:t[5]||(t[5]=e=>{i.startTime=e}),startTime:i.startTime},null,8,["onUpdateBock","onUpdateTimeData","onChartTableFun","frameType","sn","dbcChn","ldfChn","channelValList","linChannelValList","channelOne","channelTwo","channelThree","linChannelVal","linChannelValTwo","filePath","onRecordTimeChange","dbcVal","colFilterShow","startTime"])],8,wc),i.sn.includes("CR3")?(h(),m("div",{key:0,class:"rec-body","data-hidden":i.linRecordShow},[g(w,{onUpdateBock:s.updateBocks,onUpdateTimeData:s.updateTimeData,ref:"linRecordRef",channelOne:i.channelOne,channelTwo:i.channelTwo,channelThree:i.channelThree,linChannelVal:i.linChannelVal,linChannelValTwo:i.linChannelValTwo,filePath:i.filePath,dbcVal:i.dbcVal,colFilterShow:i.colFilterShow,onStartTimeChange:t[6]||(t[6]=e=>{i.startTime=e}),startTime:i.startTime},null,8,["onUpdateBock","onUpdateTimeData","channelOne","channelTwo","channelThree","linChannelVal","linChannelValTwo","filePath","dbcVal","colFilterShow","startTime"])],8,Cc)):v("",!0),"mac"!==i.system?(h(),m("div",{key:1,class:"rec-body","data-hidden":i.lookRecord},[g(C,{ref:"chartRecordRef",chartTableData:i.chartTableData,sdb:i.sdb,dbcChn:i.dbcChn,ldfChn:i.ldfChn,dbcVal:i.dbcVal,getDbcData:i.frames},null,8,["chartTableData","sdb","dbcChn","ldfChn","dbcVal","getDbcData"])],8,kc)):v("",!0),p("div",{class:"rec-body","data-hidden":i.sendRecordShow},[g(k,{store:e.$props.store,setStore:e.$props.setStore},null,8,["store","setStore"])],8,Sc),i.sn.includes("CR3")?(h(),m("div",{key:2,class:"rec-body","data-hidden":i.linSendRecordShow},[i.mainTabs.length>0?(h(),m("div",Dc,[g(S,{position:"top",closeable:!1,options:i.mainTabs,modelValue:i.curFileIdx,"onUpdate:modelValue":t[7]||(t[7]=e=>i.curFileIdx=e)},{default:f((()=>[Vc])),_:1},8,["options","modelValue"])])):v("",!0),c(g(T,{activeTab:i.activeTab,linSendInfo:i.linSendInfo,nodeOpt:i.nodeOpt,curFileIdx:i.curFileIdx,ldfChn:i.ldfChn,deployDisable:i.deployDisable,store:e.$props.store,setStore:e.$props.setStore},null,8,["activeTab","linSendInfo","nodeOpt","curFileIdx","ldfChn","deployDisable","store","setStore"]),[[A,0===i.curFileIdx]]),c(g(D,{activeTab:i.activeTab,linSendInfo:i.linSendInfo,nodeOpt:i.nodeOpt,curFileIdx:i.curFileIdx,ldfChn:i.ldfChn,deployDisable:i.deployDisable,store:e.$props.store,setStore:e.$props.setStore},null,8,["activeTab","linSendInfo","nodeOpt","curFileIdx","ldfChn","deployDisable","store","setStore"]),[[A,1===i.curFileIdx]])],8,Tc)):v("",!0),c(g(V,{loading:i.isEditModalLoading,title:i.editModal.title,onCancel:s.onCancelSelect,onSubmitToShow:s.onSubmitToShow},null,8,["loading","title","onCancel","onSubmitToShow"]),[[A,i.editModal.editVisible&&i.sn.includes("CR2")]]),c(g(x,{loading:i.isEditModalLoading,title:i.editModal.title,onCancel:s.onCancelSelect,onSubmitFiveToShow:s.onSubmitToShow},null,8,["loading","title","onCancel","onSubmitFiveToShow"]),[[A,i.editModal.editVisible&&i.sn.includes("CR3")]]),c(g(I,{loading:i.isEditModalLoading,title:i.editModal.title,onCancel:s.onCancelSelect,onSubmitTwelveToShow:s.onSubmitToShow},null,8,["loading","title","onCancel","onSubmitTwelveToShow"]),[[A,i.editModal.editVisible&&i.sn.includes("DR4")]])])]),g(L,{message:i.message},null,8,["message"])],64)}],["__scopeId","data-v-d698c9a3"]]))}}}));
