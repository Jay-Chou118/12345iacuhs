import{H as y}from"./Header-29f8eb92.js";import{C as w}from"./CopyPath-4fe495ee.js";import{B as v}from"./Button-ccc4c628.js";import{M as C}from"./Message-fbe6eafa.js";import{_ as D,e as S,r as d,c as r,h as o,d as t,t as i,a as n,f as g,i as m,w as x,v as E,o as u,p as L,b as P}from"./index-e364a543.js";const T="tsp-assistant",B="1.2.8",I="TSP 辅助工具 由 整车基础软件部-软件开发平台及数据运营-软件集成及工具链 团队支持",j=["TSP","assistant","辅助工具","调试助手","小米","小米汽车"],V={name:"整软"},q={prepare:"run-script-os",server:"run-script-os",client:"run-script-os",web:"run-script-os",build:"run-script-os","test:server":"run-script-os","prepare:win32":"python -m pip install -r requirements.txt","prepare:darwin":"python3.10 -m pip install -r requirements.txt","prepare:linux":"python3.8 -m pip install -r requirements.txt","server:linux":"python3.8 backend/server.py","server:darwin":"python3.10 backend/server.py","server:win32":"python backend/server.py","client:win32":"python backend/TSPA.py","client:linux":"python3.8 backend/TSPA.py","client:darwin":"python3.10 backend/TSPA.py","test:server:win32":"python -m pytest ./tests","test:server:darwin":"python3.10  -m pytest ./tests","test:server:linux":"python3.8  -m pytest ./tests","test:web":"cypress run --headed --browser edge --config-file cypress.config.js","test:watch":"cypress open","web:default":"vite --host --port 5173",prebuild:"node ./scripts/prebuild.mjs",postbuild:"run-script-os","postbuild:win32":"python ./scripts/postbuild.py","postbuild:darwin":"python3.10 ./scripts/postbuild.py","postbuild:linux":"python3.8 ./scripts/postbuild.py","publish-update":"run-script-os","publish-update:win32":"python ./scripts/publish-update.py","publish-update:darwin":"python3.10 ./scripts/publish-update.py","publish-update:linux":"python3.8 ./scripts/publish-update.py",publish:"node ./scripts/publish.mjs","build:web":"vite build","build:android":"vite build --config vite.config.android.js","build:win32":"time /t && python -m nuitka --enable-console --standalone --windows-icon-from-ico=public/logo.ico   --include-data-dir=backend/www=www --include-data-dir=backend/apps/pullData/usr=apps/pullData/usr --include-data-file=backend/apps/pullData/usr/bin/*.dll=apps/pullData/usr/bin/  --include-data-file=backend/apps/blft/assets/bin/*.dll=apps/blft/assets/bin/ --include-data-file=backend/apps/blfMerge/assets/*.dll=apps/blfMerge/assets/ --include-data-file=backend/apps/blfCpp/assets/*.dll=apps/blfCpp/assets/  --include-data-file=backend/apps/blfMAT/assets/*.dll=apps/blfMAT/assets/ --include-data-file=backend/apps/mdfReader/*.db=apps/mdfReader/ --include-data-file=backend/apps/blfTraceCpp/assets/*.dll=apps/blfTraceCpp/assets/ --include-data-dir=backend/logging_unit=logging_unit --include-data-file=backend/logging_unit/*.dll=logging_unit/ --include-data-file=backend/apps/E2ECheck/assets/*.dll=apps/E2ECheck/assets/  --include-data-file=backend/apps/E2ECheck/datas/*.csv=apps/E2ECheck/datas/ --include-data-file=backend/apps/shared_pkg/*.py=apps/shared_pkg/ --include-data-file=backend/apps/blfMAT/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/*=apps/bflfMAT/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/ --include-data-file=backend/apps/blfCpp/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/*=apps/blfCpp/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/ --include-data-file=backend/adb/*=adb/  --include-data-file=backend/apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/*=apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/ --include-data-file=backend/apps/shared_pkg/*.json=apps/shared_pkg/ --include-data-file=backend/apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib_ldf/*=apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib_ldf/ --follow-imports --nofollow-import-to=snappy --nofollow-import-to=pandas --nofollow-import-to=jinja2  --nofollow-import-to=numpy --nofollow-import-to=scipy  --nofollow-import-to=matplotlib --nofollow-import-to=asammdf --nofollow-import-to=werkzeug backend/TSPA.py&& time /t","build:linux":"date && python3.8 -m nuitka --enable-console --standalone --include-data-dir=backend/www=www --include-data-file=backend/apps/blfMerge/assets/*.so=apps/blfMerge/assets/ --include-data-dir=backend/logging_unit=logging_unit --include-data-file=backend/logging_unit/*.so=logging_unit/ --include-data-file=backend/apps/blfCpp/assets/*.so=apps/blfCpp/assets/ --include-data-file=backend/apps/blfCpp/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/*=apps/blfCpp/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/ --include-data-file=backend/apps/shared_pkg/*.py=apps/shared_pkg/ --include-data-file=backend/apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/*=apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/ --include-data-file=backend/apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib_ldf/*=apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib_ldf/ --include-data-file=backend/apps/shared_pkg/*.json=apps/shared_pkg/  --follow-imports --include-data-file=backend/apps/mdfReader/*.db=apps/mdfReader/ --nofollow-import-to=snappy --nofollow-import-to=pandas --nofollow-import-to=jinja2  --nofollow-import-to=numpy --nofollow-import-to=scipy  --nofollow-import-to=matplotlib --nofollow-import-to=asammdf --nofollow-import-to=werkzeug --nofollow-import-to=gi backend/TSPA.py && date","build:darwin":"date && python3.10 -m nuitka --macos-create-app-bundle --macos-app-icon=setup/deb/usr/share/icons/TSPA/logo.icns --enable-console --standalone --include-data-dir=backend/www=www --include-data-file=backend/apps/shared_pkg/*.py=apps/shared_pkg/ --include-data-dir=backend/logging_unit=logging_unit --include-data-file=backend/logging_unit/mac-arm64/*.dylib=logging_unit/mac-arm64/ --include-data-dir=backend/logging_unit/mac-arm64/=logging_unit/mac-arm64/ --include-data-file=backend/logging_unit/mac-intel/*.dylib=logging_unit/mac-intel/ --include-data-dir=backend/logging_unit/mac-intel/=logging_unit/mac-intel/ --include-data-file=backend/apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/*=apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib/ --include-data-file=backend/apps/blfCpp/assets/*.dylib=apps/blfCpp/assets/ --include-data-file=backend/apps/blfMerge/assets/*.dylib=apps/blfMerge/assets/ --include-data-file=backend/apps/mdfReader/*.db=apps/mdfReader/ --include-data-file=backend/apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib_ldf/*=apps/shared_pkg/bdaces/cfignsf/Extp2DceSpicProtIo/Lib_ldf/ --include-data-file=backend/apps/shared_pkg/*.json=apps/shared_pkg/ --follow-imports --nofollow-import-to=snappy --nofollow-import-to=pandas --nofollow-import-to=jinja2  --nofollow-import-to=numpy --nofollow-import-to=scipy  --nofollow-import-to=matplotlib --nofollow-import-to=asammdf --nofollow-import-to=werkzeug backend/TSPA.py && date","build:setup.exe":"C:\\PROGRA~2\\NSIS\\makensis.exe setup.nsi",apidoc:"apidoc -t ./node_modules/@gitawego/apidoc-theme/template -i backend -o backend/www/docs"},M={"@he-tree/vue":"^2.7.0","@vitejs/plugin-legacy":"^4.1.1","@vue/compiler-sfc":"^3.3.7",axios:"^1.6.0",binarysearch:"^1.0.1","draggable-polyfill":"^1.2.4","driver.js":"^1.3.0","ev-timeplot":"git+https://git.n.xiaomi.com/ev-fe/ev-timeplot.git#main","fake-progress":"^1.0.4","floating-vue":"^2.0.0-beta.24","js-cookie":"^3.0.5","node-jq":"^4.3.1","normalize-path":"^3.0.0",qs:"^6.11.2","resize-observer-polyfill":"^1.5.1","rollup-plugin-visualizer":"^5.9.2","stats.js":"^0.17.0",uplot:"^1.6.27",vconsole:"^3.15.1",vue:"^3.3.7","vue-ls":"^4.2.0","vue-router":"^4.2.5","vue-select":"^4.0.0-beta.6","vue-slider-component":"^4.1.0-beta.7","vue-virtual-scroller":"^2.0.0-beta.8"},A={"@gitawego/apidoc-theme":"^1.0.2","@rollup/plugin-strip":"^3.0.4","@vitejs/plugin-vue":"^4.4.0",apidoc:"^1.2.0","changelog-parser":"^3.0.1",concurrently:"^8.2.2","cross-env":"^7.0.3",cypress:"^12.17.2",execa:"^8.0.1","iconv-lite":"^0.6.3",less:"^4.2.0","rollup-plugin-external-globals":"^0.9.0","run-script-os":"^1.1.6",vite:"^4.5.0","vite-plugin-html":"^3.2.0","wait-on":"^7.0.1"},h={name:T,private:!0,version:B,description:I,keywords:j,author:V,scripts:q,dependencies:M,devDependencies:A};let f=0;const N={props:["store"],components:{Button:v,Header:y,CopyPath:w,Message:C},data(){return{consoleText:"",errorNumber:0,directory:"",onFlag:!0,chartDataLoaded:!0,fileDirectory:[],fileDirectoryStr:"",inputFiles:[],fileTypesList:[],dbcCheckValid:!1,recLoading:!1,recLoadingProgress:"",showWaitWarn:!1,showWaitWarnMsg:"",consoleText:"",respData:[],message:{visible:!1,level:"",content:""},localDBCVersion:"",latestLocalDBCVersion:""}},watch:{chartDataLoaded(e,a){e?(document.querySelector("#app").style.cursor="",document.querySelector(".back-icon").style.pointerEvents="",document.querySelector(".record-header").style.cursor="",document.querySelector(".o-pul-er").style.pointerEvents="",document.querySelector(".o-menu").style.pointerEvents=""):(document.querySelector("#app").style.cursor="wait",document.querySelector(".back-icon").style.pointerEvents="none",document.querySelector(".o-pul-er").style.pointerEvents="none",document.querySelector(".o-menu").style.pointerEvents="none")}},computed:{dbcCheckValid(){if(this.localDBCVersion!==this.latestLocalDBCVersion)return!0;this.$nextTick(()=>!1)},quitConfirm(){return!!this.directory.trim()}},mounted(){this.getLocalDBCVersion()},methods:{async getLocalDBCVersion(){console.log("doc111",h.DBC_version),this.localDBCVersion=h.DBC_version},async checkUpsetVersion(){await S.confUpdate.getLastestConf({file_type:"DBC"}).then(e=>{console.log("获取最新的配置版本号",e,e.status),e.status===200&&(this.latestLocalDBCVersion=e.data.DBC_latest_version)})},showMessage({level:e,content:a,timeout:l}){clearTimeout(f),e!=null&&(this.message.level=e),a!=null&&(this.message.content=a),this.message.visible=!0,l>0&&(f=setTimeout(()=>{console.log(f,"msgTimer"),this.message.visible=!1},l))}}},p=e=>(L("data-v-e356471f"),e=e(),P(),e),R={class:"diagnostics-data"},W={class:"o-pul-er",id:"el-record-form"},z=p(()=>t("div",{class:"o-pul-title"},"DBC导入配置",-1)),U={class:"o-pul-p"},H={class:"record-header-message"},F={key:0,class:"o-warn"},G=p(()=>t("i",{class:"warn-icon"},null,-1)),O={class:"o-pul-p"},J={class:"record-header-message"},K={key:0,class:"o-pul-p start-rec"},Q=p(()=>t("i",{class:"play-icon"},null,-1)),X=["data-empty"],Y=p(()=>t("div",{class:"o-console-wrap"},[t("div",{class:"o-console-title"},"更新结果")],-1)),Z=["data-loading"];function $(e,a,l,ee,s,c){const k=d("Header"),b=d("Button"),_=d("Message");return u(),r("div",R,[o(k,{title:"DBC云端同步",quitConfirm:c.quitConfirm,showRight:!0,carNum:e.$props.store.connectCar.carNum,connectStatus:e.$props.store.connectCar.status,recentTest:e.$props.store.connectCar.latest},null,8,["quitConfirm","carNum","connectStatus","recentTest"]),t("div",W,[z,t("div",U,[t("span",H,"当前DBC版本："+i(s.localDBCVersion),1),s.showWaitWarn?(u(),r("div",F,[G,n(i(s.showWaitWarnMsg),1)])):g("",!0)]),t("div",O,[t("span",J,"最新DBC版本："+i(s.latestLocalDBCVersion),1),n("   "),o(b,{onClick:c.checkUpsetVersion},{default:m(()=>[n("获取最新配置版本号")]),_:1},8,["onClick"])]),s.onFlag?(u(),r("div",K,[o(b,{type:"primary",disabled:!c.dbcCheckValid,progress:s.recLoadingProgress,loading:s.recLoading},{default:m(()=>[Q,n("开始更新")]),_:1},8,["disabled","progress","loading"])])):g("",!0)]),t("div",{class:"o-console-er","data-empty":s.consoleText==="",id:"el-record-console"},[Y,x(t("div",{class:"o-console-body","data-loading":!s.chartDataLoaded},i(s.consoleText),9,Z),[[E,s.consoleText]])],8,X),o(_,{message:s.message},null,8,["message"])])}const ne=D(N,[["render",$],["__scopeId","data-v-e356471f"]]);export{ne as default};
