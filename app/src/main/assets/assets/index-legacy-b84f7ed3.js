System.register(["./Spin-legacy-33a5b0fb.js","./Button-legacy-e4bab9f4.js","./ev-timeplot-legacy-2c8410ba.js","./Message-legacy-513a281d.js","./Header-legacy-497a3a4c.js","./ImportFileDialog-legacy-a7398a7d.js","./index.es-legacy-00eb7f6e.js","./index-legacy-800c9beb.js","./signal-legacy-1ac1ca13.js","./index-legacy-41d7d2b4.js","./CopyPath-legacy-a3dd0953.js","./time-legacy-9e872c4a.js","./num-legacy-b60967d7.js","./DownloadMessage-legacy-7ae1674e.js","./ButtonGroup-legacy-26ab557b.js","./Cascader-legacy-4749ac65.js"],(function(e,t){"use strict";var i,s,a,l,n,c,d,o,r,h,m,g,p,u,A,C,y,b,f,k,D,w,v,S,x,T,B,M,L,F,I,V,U,E,_,P,N,j,R,G,K,z,Q,H,X;return{setters:[e=>{i=e.S},e=>{s=e.B},e=>{a=e.A,l=e.W,n=e.P},e=>{c=e.M},e=>{d=e.H},e=>{o=e.I},e=>{r=e.c},e=>{h=e._,m=e.q,g=e.S,p=e.r,u=e.l,A=e.w,C=e.o,y=e.c,b=e.d,f=e.g,k=e.h,D=e.i,w=e.y,v=e.x,S=e.f,x=e.E,T=e.a,B=e.t,M=e.e,L=e.k,F=e.G,I=e.j,V=e.A,U=e.F,E=e.m,_=e.n,P=e.v,N=e.p,j=e.b},e=>{R=e.t},e=>{G=e.n},e=>{K=e.b},e=>{z=e.s},e=>{Q=e.b},e=>{H=e.D},e=>{X=e.B},null],execute:function(){let t=0;const O={class:"chs-er",ref:"root"},J={class:"chs-list-er","data-loading":!1},Z=["onClick"],W=["id","onUpdate:modelValue","data-indeterminate"],q=["innerHTML"],Y=["for"],$=["id","onUpdate:modelValue","data-indeterminate"],ee=["innerHTML"],te=["for"],ie=["id","onUpdate:modelValue"],se=["innerHTML"],ae=["innerHTML"],le={style:{position:"fixed",left:"89px","background-color":"#fff",height:"70px","line-height":"70px","border-top":"1px solid #e8e8e8"}},ne=h({props:["signals","carType","sdb","isFilled","fileType","getDbcList","checkedListIndex"],emits:["connect","showMessage","getCarCode","cancel"],components:{Button:s,RecycleScroller:m,Spin:i,Message:c},data:()=>({inputStr:"",checkedList:[],selectNodeList:[],counter:0,lodingSpin:!1,isFlag:1,message:{visible:!1,level:"",content:""},listOpen:[],expandKeys:new Set([]),C2C:[]}),computed:{list(){let e=[],t=this,i=this.getDbcList;for(let l in i){let s;s={_id:+l,id:+l,text:this.C2C[l],node_type:"channel",children:[],set checked(e){s.children.forEach((t=>{t.checked=e}))},get checked(){return!s.children.some((e=>0==e.checked))},get indeterminate(){return s.children.some((e=>e.checked))&&s.children.some((e=>!e.checked))}};for(let e in i[l]){let a;a={_id:l+"_"+e,id:l+"_"+e,text:"-1"==e?"":e,node_type:"msg",channel:s.id,set checked(e){a.children.forEach((t=>{t.checked=e}))},get checked(){return!a.children.some((e=>0==e.checked))},get indeterminate(){return a.children.some((e=>e.checked))&&a.children.some((e=>!e.checked))},children:i[l][e].map((i=>{let a;return a={_id:l+"_"+e+"_"+i[0],id:i[0],msg:"-1"==e?"-1":+e.match(/0x\w+/)?.[0]||e,channel:s.id,text:i[0],node_type:"signal",comment:i[1],remark:i[2],set checked(e){e?t.checkedList.push(a):t.checkedList=t.checkedList.filter((e=>!(e._id===a._id)))},get checked(){return t.checkedList.some((e=>e._id===a._id))}},a}))},s.children.push(a)}e.push(s)}let s=[];for(let l=0;l<e.length;l++){let t=e[l];if(-1!=t.id&&s.push(t),this.inputStr||this.expandKeys.has(t.id))for(let e=0;e<t.children.length;e++){let i=t.children[e];"-"!=i.id[0]&&s.push(i);for(let e=0;e<i.children.length;e++){let t=i.children[e];s.push(t)}}}if(this.inputStr.length>0){const e=this.inputStr.toLowerCase();let t;try{t=new RegExp(e,"i")}catch(a){t={test:e=>~e.toLowerCase().indexOf(e.toLowerCase())}}s=s.filter((e=>t.test(e.text)||e.comment&&t.test(e.comment)||e.remark&&t.test(e.remark)))}return s},sdbVal(){return[this.carType,this.sdb]}},watch:{checkedListIndex:{handler(e){this.checkedList=[]},deep:!0},sdbVal:{handler(e){let t=[];const i=this.$ls.get("blfread_sdbData")||[];if("custom"===this.carType){let e=i.find((e=>e.sdb===this.sdb))?.comments;e&&(t=["",...e])}else t=g.DEFAULT.find((e=>e.value===this.$props.carType))?.children.find((e=>e.value===this.$props.sdb))?.comments||[];this.C2C=t.map(((e,t)=>`${"⓪①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳㉑㉒㉓㉔㉕㉖㉗㉘㉙㉚㉛㉜㉝㉞㉟㊱"[t]}${e}`))},immediate:!0}},mounted(){},beforeUnmount(){},unmounted(){},methods:{showFirstChild(e){this.expandKeys.has(e.id)?this.expandKeys.delete(e.id):this.expandKeys.add(e.id)},clearTable(){this.checkedList=[],this.$emit("clearTable")},title4node:e=>R(e),showMessage({level:e,content:i,timeout:s}){clearTimeout(t),null!=e&&(this.message.level=e),null!=i&&(this.message.content=i),this.message.visible=!0,s>0&&(t=setTimeout((()=>{this.message.visible=!1}),s))},submit(){this.checkedList.length>80?this.showMessage({level:"error",content:"信号选择不能超过80项",timeout:3e3}):this.$emit("choose",this.checkedList)},highlightWord(e){if(!e)return e;const t=this.inputStr;if(!t)return e;const i=t.split(/\s+/g);var s,a,l=i.length;for(s=0;s<l;s++)try{(a=new RegExp(i[s],"gi")).test(e)&&(e=e.replace(a,"<strong>$&</strong>"))}catch(n){a=i[s],e=e.replace(a,"<strong>$&</strong>")}return e}}},[["render",function(e,t,i,s,a,l){const n=p("RecycleScroller"),c=p("Message"),d=u("tooltip"),o=u("esc");return A((C(),y("div",O,[A(b("input",{class:"chs-input-er",placeholder:"搜索信号名称/信号描述","onUpdate:modelValue":t[0]||(t[0]=e=>a.inputStr=e),onInput:t[1]||(t[1]=(...t)=>e.onChange&&e.onChange(...t)),draggable:!1},null,544),[[f,a.inputStr]]),b("div",J,[k(n,{class:"chs-list",items:l.list,"item-size":28,"key-field":"_id"},{default:D((({item:e})=>[b("label",null,["channel"==e.node_type&&e.id<=16?(C(),y("div",{key:0,style:{"margin-left":"1px"},class:w(!a.inputStr&&a.expandKeys.has(e.id)?"switch-open":"switch-close"),onClick:v((t=>l.showFirstChild(e)),["stop","prevent"])},null,10,Z)):S("",!0),"channel"==e.node_type&&e.id<=16?A((C(),y("input",{key:1,style:{"margin-left":"3px"},id:e._id,type:"checkbox","onUpdate:modelValue":t=>e.checked=t,"data-indeterminate":e.indeterminate,"click.stop":""},null,8,W)),[[x,e.checked]]):S("",!0),"channel"==e.node_type&&e.id<=16?(C(),y("span",{key:2,class:"chs-node",innerHTML:l.highlightWord(e.text)},null,8,q)):"msg"==e.node_type?(C(),y("div",{key:3,for:e.children,style:{"text-indent":"2em","margin-left":"-15px"},class:"chs-node chs-node-item"},[A(b("input",{id:e._id,type:"checkbox","onUpdate:modelValue":t=>e.checked=t,"data-indeterminate":e.indeterminate,"click.stop":""},null,8,$),[[x,e.checked]]),b("span",{class:"",innerHTML:l.highlightWord(e.text)},null,8,ee)],8,Y)):"signal"==e.node_type?A((C(),y("div",{key:4,for:e._id,style:{"text-indent":"2em","margin-left":"-5px"},class:"chs-node chs-node-item"},[A(b("input",{id:e._id,type:"checkbox",class:"chs-node-checkbox","onUpdate:modelValue":t=>e.checked=t,"click.stop":""},null,8,ie),[[x,e.checked]]),b("span",{class:"chs-node-signal",innerHTML:l.highlightWord(e.text)},null,8,se),T(" "),b("span",{class:"chs-node-comment",innerHTML:l.highlightWord(e.comment)},null,8,ae)],8,te)),[[d,{content:l.title4node(e),html:!0},void 0,{right:!0}]]):S("",!0)])])),_:1},8,["items"])]),b("div",null,[b("div",le,[b("div",{class:w(a.checkedList.length>80?"chs-ft-label-len":"chs-ft-label"),style:{"text-align":"center","line-height":"70px"}},"（"+B(a.checkedList.length)+"/80）",3),b("div",{class:"chs-btn confirm",onClick:t[2]||(t[2]=(...e)=>l.submit&&l.submit(...e))},"确认"),b("div",{class:"chs-btn cancel",onClick:t[3]||(t[3]=(...e)=>l.clearTable&&l.clearTable(...e))},"重置")])]),k(c,{message:a.message},null,8,["message"])])),[[o,()=>e.$emit("cancel")]])}],["__scopeId","data-v-320e6286"]]);let ce=[];window.rowData=ce;let de=0;const oe={props:["store","closeFlag"],emits:["connect","showMessage","getCarCode"],components:{Button:s,Header:d,ImportFileDialog:o,Spin:i,ButtonGroup:X,Draggable:r,ChooseSignal:ne,AddOrSelector:a,TimePlotMulti:l,ProgressBar:n,Message:c,DownloadMessage:H},data(){let e=this.$ls.get("blfread_treeData")?.map((e=>({...e,checkedListIndex:[],carType:e.carType||"MS11",sdb:e.sdb||"E4",children:e.children.map((t=>({...t,warning:!1,pid:e.id,color:t.color||"blue"}))),signals:{}})));if(e&&0!==e?.length||(e=[]),e=e.filter((e=>!("MS11"===e.carType&&"E4U1"===e.sdb&&"默认视图"===e.text&&0===e.children.length))),!e.some((e=>"MS11"===e.carType&&"E4U1"===e.sdb))){let t=Date.now();e.push({id:t,text:"默认视图",type:"view",editable:!1,carType:"MS11",sdb:"E4U1",deleteConfirm:!1,children:[{id:"PwrModSts",msg:198,channel:3,text:"PwrModSts",node_type:"signal",comment:"PowerMode Status",remark:"VCCD::BCP/BCS/EPS/SCUC/SWM::VCCD_ChassisCANFD_0xC6::PwrModSts::CANFD signal",checked:!0,_id:"3-3_VCCD_ChassisCANFD_0xC6(0xc6)-PwrModSts",pid:t,color:"purple"},{id:"VCUActGearLvr",msg:198,channel:3,text:"VCUActGearLvr",node_type:"signal",comment:"Actual gear level 车辆实际档位\\\\nP R N D挡位",remark:"VCCD::BCP/BCS/EPS/SCUC/SWM::VCCD_ChassisCANFD_0xC6::VCUActGearLvr::CANFD signal",checked:!0,_id:"3-3_VCCD_ChassisCANFD_0xC6(0xc6)-VCUActGearLvr",pid:t,color:"blue",warning:!1},{id:"VCUAccrPedlRat",msg:198,channel:3,text:"VCUAccrPedlRat",node_type:"signal",comment:"加速油门踏板开度",remark:"VCCD::BCP/BCS/EPS/SCUC/SWM::VCCD_ChassisCANFD_0xC6::VCUAccrPedlRat::CANFD signal",checked:!0,_id:"3-3_VCCD_ChassisCANFD_0xC6(0xc6)-VCUAccrPedlRat",pid:t,color:"cerulean",warning:!1},{id:"HvBattSoCAct",msg:449,channel:5,text:"HvBattSoCAct",node_type:"signal",comment:"HV battery SoC actual",remark:"BMS::VCCD/VECU::BMS_PTCANFD_0x1C1::HvBattSoCAct::CANFD signal",checked:!0,_id:"5-5_BMS_PTCANFD_0x1C1(0x1c1)-HvBattSoCAct",pid:t,color:"cyan",warning:!1},{id:"VehSpd",msg:179,channel:3,text:"VehSpd",node_type:"signal",comment:"Vehicle speed",remark:"BCS::ADD/VCCD/BCP/EPS/SCUC/SWM::BCS_ChassisCANFD_0xB3::VehSpd::CANFD signal",checked:!0,_id:"3-3_BCS_ChassisCANFD_0xB3(0xb3)-VehSpd",pid:t,color:"green",warning:!1},{id:"SwtHiBeam",msg:419,channel:3,text:"SwtHiBeam",node_type:"signal",comment:"组合开关远光灯请求命令",remark:"SWM::BCP/BCS/VCCD::SWM_ChassisCANFD_0x1A3::SwtHiBeam::CANFD signal",checked:!0,_id:"3-3_SWM_ChassisCANFD_0x1A3(0x1a3)-SwtHiBeam",pid:t,color:"lime",warning:!1}]})}return this.$ls.set("blfread_treeData",e),{filteredItems:[],filteredList:[],fileType:"blf",blfcpp:"cpp",downloadMessage:{show:!1,path:""},message:{visible:!1,level:"",content:""},modal:{title:"导入文件",visible:!1},treeData:e.map((e=>(e.children.forEach((e=>{e.warning=!1})),e))),curView:{label:e[0]?.text,value:0,tag:e[0]?.sdb},C2C:[],sdb:"E4U2",directory:"",carType:"MS11",directorySize:{label:"",value:0,durationMaybe:0,durationMaybeLabel:"0秒"},backBlock:!1,chartDataLoaded:!0,timeDataShow:!1,waitChart:{},fileChoosed:!1,traceList:new Map,timeData:[],changeTabs:!0,tableList:[],channelVersion:[{label:"全部",value:""}],channelVal:"全部",ECUVersion:[{label:"全部",value:""}],ECUVal:"全部",canIdsVersion:[{label:"全部",value:""}],canIdsVal:"全部",filterTableList:[],showDotsFrame:!1,modeOptions:[{label:"分散",value:"single"},{label:"对齐",value:"same"},{label:"聚合",value:"shifted"}],chartMode:"single",startTime:0,rowData:[],barChartData:[],count:0,tableDataFlag:!1,debug:window._debug,saerchList:[],flag:!1,chooseSignalAble:!1,signObj:{},signList:[],sigGrpValList:[],getDbcList:{},isFilled:!1,timeDataVisiable:!0,paramsSig:[],initAreas:[],initPots:[],timeShow:!1,tableLoading:!1,chooseLoading:!1}},computed:{sdbVal(){return[this.carType,this.sdb]},quitConfirm(){return!!this.directory.trim()},carTypeLabel(){return this.carType&&"custom"!==this.carType?this.carType+" / ":""},view(){return this.treeData[this.curView.value]},directoryLabel(){let e=this.directory.split("/").pop();return e.length>25?e.slice(0,10)+"..."+e.slice(-15):e},fileType_CarType(){return[this.fileType,this.carType]}},mounted(){I.report("trackPage",{page:"E2E校验",tip:"1174.15.0.1.31310"}),this.chooseSignalAble=!0,this.debug=!!window._debug,ce=[],this.SDBLoading=!0,M.ete.getDBC({carType:this.carType,sdb:this.sdb}).then((e=>{window._sdb=e.data})).finally((()=>{this.SDBLoading=!1}))},beforeUnmount(){this.timeData={}},unmounted(){M.blf.freeSpace()},watch:{saerchList:{handler(e){window._sdb=e},deep:!0},fileType_CarType(){"mdf"===this.fileType?this.blfcpp="cpp":this.debug||("custom"===this.carType?this.blfcpp="python":this.blfcpp="cpp")},blfcpp:{handler(e){window._blfcpp=e},immediate:!0},sdbVal:{handler(e){let t=[];const i=this.$ls.get("blfread_sdbData")||[];if("custom"===this.carType){let e=i.find((e=>e.sdb===this.sdb))?.comments;e&&(t=["",...e])}else t=g.DEFAULT.find((e=>e.value===this.carType))?.children.find((e=>e.value===this.sdb))?.comments||[];this.C2C=t.map(((e,t)=>`${"⓪①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯⑰⑱⑲⑳㉑㉒㉓㉔㉕㉖㉗㉘㉙㉚㉛㉜㉝㉞㉟㊱"[t]}${e}`))},immediate:!0},treeData:{handler(e,t){JSON.stringify(this.$ls.get("blfread_treeData"))!==JSON.stringify(e)&&this.$ls.set("blfread_treeData",e)},deep:!0},directory:{async handler(e){const t=await L.getFileSize(e),i=Math.round(.166*(1678e-19*t*t+1.768e-7*t+.5581));this.directorySize={label:K(t),value:t,durationMaybe:1e3*i,durationMaybeLabel:z(i)}}}},methods:{onUpdateDefaultOptions(e){console.log("getDBC",e),window._sdb=e},onFilledChange(e){1==e?("asc"===this.fileType?window._sdb=this.ascHaveDataList:window._sdb=this.haveDataList,this.isFilled=!0):0==e&&(this.carType,this.fileType,window._sdb=this.getDbcList,this.isFilled=!1)},timeCheck:F((function(e,t){this.traceList=new Map,this.timeData=[],this.timeShow=!0,this.timeDataShow=!0,this.paramsSig=e,this.timeDataVisiable=!1,"time"==t&&(this.initAreas=[{name:"startTime",key:"startValue",color:"#ff557a",value:[e[3][0],e[3][1]]}],this.initPots=[{name:e[4],key:"end",color:"#ff557a",value:e[3][1]}],this.play())}),1e3,{leading:!0}),title4node:e=>R(e),showMessage({level:e,content:t,timeout:i}){clearTimeout(de),null!=e&&(this.message.level=e),null!=t&&(this.message.content=t),this.message.visible=!0,i>0&&(de=setTimeout((()=>{this.message.visible=!1}),i))},hideMessage(){this.message.visible=!1},onTreeDataChange(){this.treeData=this.$ls.get("blfread_treeData")},resetTimeData(){this.directory="",this.backBlock=!1,this.chartDataLoaded=!0,this.waitChart={},this.fileChoosed=!1,this.traceList=new Map,this.timeData={},this.filteredItems=[],this.timeDataVisiable=!0},clearTableData(){this.timeData={},this.traceList=new Map,this.timeDataVisiable=!0,this.filteredItems=[]},choosePath(){/\.blf$/i.test(this.directory)?(this.chartDataLoaded=!1,this.clearTimeData(),M.blf.getBLFdata({blfFile:this.directory}).then((async e=>{this.fileChoosed=!0,this.treeData.forEach((e=>{this.waitChart[e.id]=!0}));let t=this.treeData.slice();t.splice(this.curView.value,1),t.unshift(this.treeData[this.curView.value]),t=t.filter((e=>e.carType===this.carType&&e.sdb===this.sdb));for(let i=0;i<t.length;i++)await this.play(t[i]),0===i&&(this.chartDataLoaded=!0)})).catch((()=>{})).finally((()=>{this.chartDataLoaded=!0}))):/\.mf4$|\.dat$|\.mdf$/i.test(this.directory)&&(async()=>{this.chartDataLoaded=!1,this.clearTimeData(),this.fileChoosed=!0,this.treeData.forEach((e=>{this.waitChart[e.id]=!0}));let e=this.treeData.slice();e.splice(this.curView.value,1),e.unshift(this.treeData[this.curView.value]),e=e.filter((e=>e.carType===this.carType&&e.sdb===this.sdb)),await this.play(this.treeData[this.curView.value]);for(let t=0;t<e.length;t++)await this.play(e[t]),0===t&&(this.chartDataLoaded=!0)})()},clearTimeData(){for(let e in this.timeData)this.timeData[e]=[];this.treeData.forEach((e=>{e.children.forEach((e=>{e.warning=void 0}))}))},async play(e,t){if(this.blfcpp="python","python"!==this.blfcpp);else{if(t)return void this.loadChart(e,t);let s;try{let e=[];e.push({busId:+this.paramsSig[0],canId:+this.paramsSig[1],name:this.paramsSig[2]}),s=await M.ete.getSigGrpVal({params:e}),this.timeDataShow=!1,0==s.data.data.length&&this.showMessage({level:"success",content:"表格信号为空",timeout:5e3})}catch(i){return void(this.waitChart[e.id]=!1)}const a={};for(let e in s.data.data){const t=s.data.data[e];let i=!0,l=Object.freeze(t[3].map((e=>{if(Number.isSafeInteger(parseInt(e[1])))return parseFloat(e[1]);{i=!1;let t=parseFloat(e[1]),s=new Number(t);return s.valueOf=()=>t,s.toString=()=>"0x"+Q(e[1]),s}})));this.traceList.set(t[0]+"_"+t[2],{name:this.C2C[+t[0]]+"-"+t[2],t:Object.freeze(t[3].map((e=>Math.round(1e3*e[0][0])/1e3))),v:l,enums:t[4],cycle:t[5],safe:i,color:"#2266ff"}),a[t[0]+"_"+t[2]]=t[3].length}this.loadChart()}},loadChart(){let e=this.traceList.values();for(let t of e)this.timeData.push(t)},updateSignal(e,t){this.tableLoading=!0,this.signals=e,e.forEach(((t,i)=>{let s={},a=(+e[i]._id.match(/\((.*?)\)/g).map((e=>e.replace(/\(|\)/g,"")))).toString(16);s.busId=e[i].channel;let l=`0x${a}`;s.canId=l,s.name=e[i].text,this.signList.push(s)})),M.ete.getAnalysisByParams(this.signList).then((e=>{this.filteredItems=e.data.data,this.tableLoading=!1,0==e.data.data.length&&this.showMessage({level:"success",content:"信号检查结果暂无错误",timeout:5e3}),this.signList=[]}))},formatTime(e){const t=new Date(e);return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`},goBackHome(){this.$router.push({path:"/"})},importFile(){this.modal.visible=!0},onCancelImportFile(){this.modal.visible=!1},onCheckView(e){this.checkedListIndex=[],this.resetTimeData(),this.chooseLoading=!0,this.modal.visible=!1;let t=this.treeData.filter((t=>t.id===e.curId)).map((t=>({label:t.text,value:this.treeData.findIndex((t=>t.id===e.curId))})));this.curView=t[0],this.carType=e.carType,this.sdb=e.sdb,this.directory=G(e.directory),this.files=e.files.length?e.files:void 0,this.comments=e.comments.length?e.comments:void 0,this.fileType=e.fileType,this.$nextTick((async()=>{"custom"===this.carType?M.ete.getDBC({carType:this.carType,sdb:this.sdb,files:this.files,comments:this.comments}).then((t=>{window._sdb=t.data,this.getDbcList=window._sdb,console.log("this.getDbcList1111",this.getDbcList),0==Object.keys(this.getDbcList).length&&this.showMessage({level:"success",content:"导入文件暂无信号",timeout:5e3}),this.flag=!0,this.chooseSignalAble=!1,M.ete.getBlfdata({blfFile:e.directory}).then((e=>{this.chooseLoading=!1}))})).finally((()=>{this.SDBLoading=!1})):(this.getDbcList=window._sdb,console.log("this.getDbcList22222",this.getDbcList),0==Object.keys(this.getDbcList).length&&this.showMessage({level:"success",content:"导入文件暂无信号",timeout:5e3}),this.getDbcList=window._sdb,this.flag=!0,this.chooseSignalAble=!1,await M.ete.reAdjust(e.sendReAdjust),await M.ete.getBlfdata({blfFile:e.directory}).then((e=>{this.chooseLoading=!1}))),this.modal.visible=!1})),I.report("track","click",{element_name:"E2E校验",asset_name:this.directory+";",tip:"1174.15.0.1.31311"})},tenTosixteen:e=>"0x"+e.toString(16),onExportArea(e,t){const i=this.view.children.filter((e=>!1===e.warning)),s=this.timeData[this.view.id];let a="csv",l="CSV文件 (*.csv;*.CSV)";switch(e.type){case"blf":a="blf",l="BLF文件 (*.blf;*.BLF)";break;case"mdf":a="mf4",l="MDF文件 (*.mf4;*.MF4)";break;case"mat":a="mat",l="MAT文件 (*.mat;*.MAT)"}L.choosePath({directory:this.directory.replace(/\/[^\/]+$/,""),saveFilename:this.directory.match(/\/([^\/]+)$/)[1].replace(/.blf|.dat|.mf4/i,`_cut-${e.start}-${e.end}.${a}`),dialogType:"SAVE_DIALOG",fileTypes:[l],allow_multiple:!1}).then((a=>{if(a.data.directory){const l=G(a.data.directory),n=G(this.directory),c=s.map(((s,a)=>{const l=s.t.findIndex((t=>t>=e.start)),n=s.t.length-s.t.slice().reverse().findIndex((t=>t<=e.end));return{busId:"blf"===t?i[a].channel:null,busName:"blf"===t?this.C2C[+i[a].channel].slice(1):null,canId:"blf"===t?i[a].msg:null,cycle:"blf"===t?s.cycle:null,enums:s.enums,name:i[a].text,times:s.t.slice(l,n),values:s.v.slice(l,n)}}));this.showMessage({level:"loading",content:"导出中..."}),M.blf.exportFile({filePath:n,outputFilePath:l,type:e.type,resampleRate:e.resampleRate,startTime:e.startTime,endTime:e.endTime,data:c}).then((e=>{this.showMessage({level:"success",content:"导出成功",timeout:2e3}),this.downloadMessage.path=l,this.downloadMessage.show=!0})).catch((e=>{this.showMessage({level:"error",content:"导出失败",timeout:2e3})}))}}))}}},re=e=>(N("data-v-490f6254"),e=e(),j(),e),he={class:"blf-check"},me=re((()=>b("i",{class:"lead-icon"},null,-1))),ge={key:0},pe={key:1},ue={class:"record-header-message"},Ae={class:"record-header-message-imp"},Ce={class:"record-header-message-imp"},ye={class:"o-pul-er"},be={class:"o-column"},fe={class:"o-column-left"},ke=re((()=>b("div",{class:"o-resize-bar"},null,-1))),De=re((()=>b("div",{class:"o-resize-line"},null,-1))),we={class:"o-resize-save"},ve={key:0,class:"o-pul-button-wrap-icon"},Se=[re((()=>b("img",{class:"text-muted-ing-data",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACICAMAAABX7hBEAAAAM1BMVEUAAAD////Nzc0MDAyXl5cAAAAAAAC9vb3t7e0BAQF1dXUAAAApKSkAAABBQUFXV1cAAACKKc10AAAAEXRSTlMATExMTAk1TExBTCFLF0tMKkK5GFYAAAL4SURBVHja7JntauswDIZty7Is+fP+r/Y0dUOz0BZzMKkGe35sMFh5Kr2Sndb88cd/gR2NahBAuWJolZNmxd6iz1z0KiJEGwVCMVoBsvauqLWIQaxVrZhqtHeoscqBRiY7iJRVDjSL3dkGWt+09GqtasUCWSg+FSUrm5ZQJUNuPu6STtdAF/DOkVSAKm5XbIpOaG7uDvmWAZqPyhQLkCM3oFFI726SkZRcIoKQ5NrEE9HTUShuA63ghC5ADUC27kJum+febPFRwSUCueXsx32BvNThKeLvhczef3ugE0AlqmIHMUbnpQ3P2mD7Bd9URIZKzkmN9shNc5TzwfcuER2g3aiwC548yUvLQ9FcDqIxKQyA7FuirwAczLVgCpyOu+aNHEkGDpfvQ+zMHfF8aT33V2re5C7PHyY+bzfM7ly5BkPuepC5mDPsj3J1tPU7lJc7I4gKuRuJy8s/55WZW+9nkBXI3Sic3pknDZ9+4M1PNV3To8YLEEopGjr5jgDAzOoee3ewj8egpNQQGcIjiWwUgtz3EUaNJcQQnl5B4bIJwSCjGfRutFEYN0G9FeRkNkG1GUTAg1didbu6h/vPIVYUHsgjdBg4lRQU+u3NxcSs8oN81Be6Xyeobq/sfGkzY5ilvDjbSljF+74kaDJDYxxOxxBy80uon5IdMrkZHi+CgMcnYLuEnD7Gvk0ZUu6nECKLXQJ9Xg2Fxc3gYRwiz3+ENQWMNU18PzSBAP6cr1UFBDSf6UBzhj9akfIVBRyEOhfDGtAsT6Df3/aiQdlJdVEBnyO8alAG7C8p4E6ajSHg4gRCMlP0PNfk9tjXqwu4OoYpX5bAHZyP4dICmhMr9nUxfXkBlw4K/2vfXlIABKEAikbaR7P9b7d5kxREDM5dwVGcPNS71wbm1PhmI1ZVQjn6FK7GoXx0rRNOipULj2eX4r60AteqQqcjCAgICAgICAgICAgICAgICAgICAgICAgICAgI+BdgHn3buX1/XJmr9AZus7VIkiRJD2y6ViB4C1+1AAAAAElFTkSuQmCC",alt:""},null,-1))),re((()=>b("td",{class:"text-center text-muted-data"},"请先导入文件",-1)))],xe={key:1,class:"spin-loding-Choose"},Te={key:2,class:"spin-Choose-style"},Be=re((()=>b("div",{class:"spin-import-style"},"文件导入中",-1))),Me={class:"o-pul-button-wrap"},Le={class:"o-column-right"},Fe=re((()=>b("div",{class:"timechart-hotkey"},[b("div",{class:"hotkey-more"}," 信号检查结果 "),b("div",{style:{"margin-right":"20px",color:"#F38709"}})],-1))),Ie={style:{display:"flex","flex-direction":"column",height:"calc(100vh - 220px)"}},Ve={style:{margin:"0 20px"}},Ue={class:"hotkey-more-table",style:{width:"100%",height:"230px"}},Ee={style:{width:"100%",height:"200px"}},_e={key:0,class:"spin-loding-bc"},Pe={key:1,class:"spin-loding-style"},Ne=re((()=>b("thead",{style:{"background-color":"#FAFAFA"}},[b("tr",{class:"check-table"},[b("th",{style:{width:"5%"}},[b("div",{style:{"min-width":"100px"}},"通道名")]),b("th",{style:{width:"8%"}},[b("div",{style:{"min-width":"100px"}},"canID")]),b("th",{style:{width:"15%"}},[b("div",{style:{"min-width":"150px"}},"信号组名")]),b("div",{class:"time-line"}),b("th",{style:{width:"15%"}},[b("div",{style:{"min-width":"150px"}},"时间戳/时间段")]),b("div",{class:"time-line"}),b("th",{style:{width:"10%"}},[b("div",{style:{"min-width":"150px"}},"错误类型")]),b("div",{class:"time-line"}),b("th",{style:{width:"50%"}},[b("div",{style:{"min-width":"200px"}},"错误描述")])])],-1))),je={key:0,class:"o-pul-button-wrap-icon"},Re=[re((()=>b("img",{class:"text-muted-ing-data",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACICAMAAABX7hBEAAAAM1BMVEUAAAD////Nzc0MDAyXl5cAAAAAAAC9vb3t7e0BAQF1dXUAAAApKSkAAABBQUFXV1cAAACKKc10AAAAEXRSTlMATExMTAk1TExBTCFLF0tMKkK5GFYAAAL4SURBVHja7JntauswDIZty7Is+fP+r/Y0dUOz0BZzMKkGe35sMFh5Kr2Sndb88cd/gR2NahBAuWJolZNmxd6iz1z0KiJEGwVCMVoBsvauqLWIQaxVrZhqtHeoscqBRiY7iJRVDjSL3dkGWt+09GqtasUCWSg+FSUrm5ZQJUNuPu6STtdAF/DOkVSAKm5XbIpOaG7uDvmWAZqPyhQLkCM3oFFI726SkZRcIoKQ5NrEE9HTUShuA63ghC5ADUC27kJum+febPFRwSUCueXsx32BvNThKeLvhczef3ugE0AlqmIHMUbnpQ3P2mD7Bd9URIZKzkmN9shNc5TzwfcuER2g3aiwC548yUvLQ9FcDqIxKQyA7FuirwAczLVgCpyOu+aNHEkGDpfvQ+zMHfF8aT33V2re5C7PHyY+bzfM7ly5BkPuepC5mDPsj3J1tPU7lJc7I4gKuRuJy8s/55WZW+9nkBXI3Sic3pknDZ9+4M1PNV3To8YLEEopGjr5jgDAzOoee3ewj8egpNQQGcIjiWwUgtz3EUaNJcQQnl5B4bIJwSCjGfRutFEYN0G9FeRkNkG1GUTAg1didbu6h/vPIVYUHsgjdBg4lRQU+u3NxcSs8oN81Be6Xyeobq/sfGkzY5ilvDjbSljF+74kaDJDYxxOxxBy80uon5IdMrkZHi+CgMcnYLuEnD7Gvk0ZUu6nECKLXQJ9Xg2Fxc3gYRwiz3+ENQWMNU18PzSBAP6cr1UFBDSf6UBzhj9akfIVBRyEOhfDGtAsT6Df3/aiQdlJdVEBnyO8alAG7C8p4E6ajSHg4gRCMlP0PNfk9tjXqwu4OoYpX5bAHZyP4dICmhMr9nUxfXkBlw4K/2vfXlIABKEAikbaR7P9b7d5kxREDM5dwVGcPNS71wbm1PhmI1ZVQjn6FK7GoXx0rRNOipULj2eX4r60AteqQqcjCAgICAgICAgICAgICAgICAgICAgICAgICAgI+BdgHn3buX1/XJmr9AZus7VIkiRJD2y6ViB4C1+1AAAAAElFTkSuQmCC",alt:""},null,-1))),re((()=>b("td",{class:"text-center text-muted-data"},"请先选择信号并确认",-1)))],Ge=["onClick"],Ke=["onClick"],ze=["onClick"],Qe=["onClick"],He=re((()=>b("i",{class:"home-icon home-icon-ete-move"},null,-1))),Xe=["onClick"],Oe=["onClick"],Je={class:"hotkey-more-table",style:{"margin-left":"0","margin-right":"0","margin-top":"15px",height:"100%","flex-grow":"1",border:"0 solid"}},Ze={key:0,class:"board-spin-er"},We=[re((()=>b("div",{class:"board-spin-text"},"正在解析文件…",-1)))],qe={style:{width:"100%",height:"100%"}},Ye=re((()=>b("div",{class:"check-table-line"},[b("i",{class:"signal-analyse"}),T(" 信号回放 ")],-1))),$e={class:"timechart-er",style:{width:"100%",height:"100%",display:"flex","flex-direction":"column"}},et={class:"tch-tool-blank-er"},tt=re((()=>b("div",{class:"tch-tool-span"},null,-1))),it=re((()=>b("div",{class:"tch-tool-span"},null,-1))),st=["id"],at={key:0,class:"o-pul-button-wrap-icon",style:{top:"20%"}},lt=[re((()=>b("img",{class:"text-muted-ing-data",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACICAMAAABX7hBEAAAAM1BMVEUAAAD////Nzc0MDAyXl5cAAAAAAAC9vb3t7e0BAQF1dXUAAAApKSkAAABBQUFXV1cAAACKKc10AAAAEXRSTlMATExMTAk1TExBTCFLF0tMKkK5GFYAAAL4SURBVHja7JntauswDIZty7Is+fP+r/Y0dUOz0BZzMKkGe35sMFh5Kr2Sndb88cd/gR2NahBAuWJolZNmxd6iz1z0KiJEGwVCMVoBsvauqLWIQaxVrZhqtHeoscqBRiY7iJRVDjSL3dkGWt+09GqtasUCWSg+FSUrm5ZQJUNuPu6STtdAF/DOkVSAKm5XbIpOaG7uDvmWAZqPyhQLkCM3oFFI726SkZRcIoKQ5NrEE9HTUShuA63ghC5ADUC27kJum+febPFRwSUCueXsx32BvNThKeLvhczef3ugE0AlqmIHMUbnpQ3P2mD7Bd9URIZKzkmN9shNc5TzwfcuER2g3aiwC548yUvLQ9FcDqIxKQyA7FuirwAczLVgCpyOu+aNHEkGDpfvQ+zMHfF8aT33V2re5C7PHyY+bzfM7ly5BkPuepC5mDPsj3J1tPU7lJc7I4gKuRuJy8s/55WZW+9nkBXI3Sic3pknDZ9+4M1PNV3To8YLEEopGjr5jgDAzOoee3ewj8egpNQQGcIjiWwUgtz3EUaNJcQQnl5B4bIJwSCjGfRutFEYN0G9FeRkNkG1GUTAg1didbu6h/vPIVYUHsgjdBg4lRQU+u3NxcSs8oN81Be6Xyeobq/sfGkzY5ilvDjbSljF+74kaDJDYxxOxxBy80uon5IdMrkZHi+CgMcnYLuEnD7Gvk0ZUu6nECKLXQJ9Xg2Fxc3gYRwiz3+ENQWMNU18PzSBAP6cr1UFBDSf6UBzhj9akfIVBRyEOhfDGtAsT6Df3/aiQdlJdVEBnyO8alAG7C8p4E6ajSHg4gRCMlP0PNfk9tjXqwu4OoYpX5bAHZyP4dICmhMr9nUxfXkBlw4K/2vfXlIABKEAikbaR7P9b7d5kxREDM5dwVGcPNS71wbm1PhmI1ZVQjn6FK7GoXx0rRNOipULj2eX4r60AteqQqcjCAgICAgICAgICAgICAgICAgICAgICAgICAgI+BdgHn3buX1/XJmr9AZus7VIkiRJD2y6ViB4C1+1AAAAAElFTkSuQmCC",alt:""},null,-1))),re((()=>b("div",{class:"text-center text-muted-data"},"请先选中表格内信号",-1)))];e("default",h(oe,[["render",function(e,t,i,s,a,l){const n=p("Button"),c=p("Header"),d=p("Spin"),o=p("ChooseSignal"),r=p("ButtonGroup"),h=p("TimePlotMulti"),m=p("ImportFileDialog"),g=p("Message"),f=p("DownloadMessage"),v=u("tooltip");return C(),y(U,null,[b("div",he,[k(c,{title:"E2ECheck",quitConfirm:l.quitConfirm,backBlock:a.backBlock},{default:D((()=>[k(n,{type:"primary",class:"header-import-btn",onClick:l.importFile},{default:D((()=>[me,T("导入文件")])),_:1},8,["onClick"]),a.debug?(C(),y("label",ge,[A(b("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=e=>a.blfcpp=e),value:"python"},null,512),[[_,a.blfcpp]]),T("python")])):S("",!0),a.debug?(C(),y("label",pe,[A(b("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>a.blfcpp=e),value:"cpp"},null,512),[[_,a.blfcpp]]),T("cpp")])):S("",!0),b("span",ue,[T(" BLF文件："),b("span",Ae,B(l.directoryLabel||"--"),1),A(b("span",{style:{color:"#333","text-shadow":"0 0.3px currentColor"}},"（"+B(a.directorySize.label)+"）",513),[[P,a.directorySize.value]]),T("  DBC配置："),b("span",Ce,B(l.carTypeLabel)+B(a.sdb||"--"),1)])])),_:1},8,["quitConfirm","backBlock"]),b("div",ye,[b("div",be,[b("div",fe,[ke,De,b("div",we,[0===Object.keys(a.getDbcList).length?(C(),y("div",ve,Se)):S("",!0),a.chooseLoading?(C(),y("div",xe)):S("",!0),a.chooseLoading?(C(),y("div",Te,[k(d,{style:{"z-index":"150"}}),Be])):S("",!0),b("div",Me,[a.flag?(C(),V(o,{key:0,signals:l.view.children,onClearTable:l.clearTableData,onFilledChange:t[2]||(t[2]=e=>l.onFilledChange(e)),checkedListIndex:e.checkedListIndex,getDbcList:a.getDbcList,isFilled:a.isFilled,onChoose:t[3]||(t[3]=e=>l.updateSignal(e,l.view)),carType:a.carType,fileType:a.fileType,sdb:a.sdb},null,8,["signals","onClearTable","checkedListIndex","getDbcList","isFilled","carType","fileType","sdb"])):S("",!0)])])]),b("div",Le,[Fe,b("div",Ie,[b("div",Ve,[b("div",Ue,[b("table",Ee,[a.tableLoading?(C(),y("div",_e)):S("",!0),a.tableLoading?(C(),y("div",Pe,[k(d,{style:{"z-index":"1500"}})])):S("",!0),Ne,b("tbody",{class:w(0==a.filteredItems.length?"":"tbody-scoll")},[0==a.filteredItems.length?(C(),y("div",je,Re)):S("",!0),(C(!0),y(U,null,E(a.filteredItems,(e=>(C(),y("tr",{key:e.id,class:"check-table"},[b("td",{style:{width:"5%"},onClick:t=>l.timeCheck(e,"time"),class:"errListStykl"},B(e[0]),9,Ge),b("td",{style:{width:"8%"},onClick:t=>l.timeCheck(e,"time")},B(e[1]),9,Ke),b("td",{style:{width:"15%"},onClick:t=>l.timeCheck(e,"time")},B(e[2]),9,ze),A((C(),y("td",{style:{width:"15%"},onClick:t=>l.timeCheck(e,"time"),class:"errListStyklClic"},[He,T(B(-1==e[3]?"":`${this.formatTime(Math.trunc(1e3*e[3][0]))} ~ ${this.formatTime(Math.trunc(1e3*e[3][1]))} `),1)],8,Qe)),[[v,"点击回放该时刻"]]),b("td",{style:{width:"10%"},onClick:t=>l.timeCheck(e,"time")},B(e[4]),9,Xe),b("td",{style:{width:"50%"},onClick:t=>l.timeCheck(e,"time")},B(e[5]),9,Oe)])))),128))],2)])])]),b("div",Je,[a.timeDataShow?(C(),y("div",Ze,We)):S("",!0),b("div",qe,[Ye,b("div",$e,[b("div",et,[k(n,{class:"tch-tool-btn",onClick:t[4]||(t[4]=e=>a.showDotsFrame=!a.showDotsFrame),title:"alt+左键"},{default:D((()=>[T("打点")])),_:1}),tt,it,k(r,{options:a.modeOptions,modelValue:a.chartMode,"onUpdate:modelValue":t[5]||(t[5]=e=>a.chartMode=e)},null,8,["options","modelValue"])]),(C(),y("div",{id:"timechart_"+l.view.id,style:{width:"100%",height:"100%","margin-bottom":"15px"},key:l.view.id},[a.timeShow&&a.timeData.length>0?(C(),V(h,{key:0,fileType:a.fileType,timeData:a.timeData,onExportAreaData:l.onExportArea,mode:a.chartMode,showExport:!1,startTime:a.startTime,showDotsFrame:a.showDotsFrame,"onUpdate:showDotsFrame":t[6]||(t[6]=e=>a.showDotsFrame=e),initAreas:a.initAreas,initPots:a.initPots},null,8,["fileType","timeData","onExportAreaData","mode","startTime","showDotsFrame","initAreas","initPots"])):S("",!0)],8,st))]),a.timeDataVisiable?(C(),y("div",at,lt)):S("",!0)])])])])])]),a.modal.visible?(C(),V(m,{key:0,ref:"homeDel",curViewInx:a.curView.value,from:"eteReader",title:a.modal.title,onCancel:l.onCancelImportFile,onImportFileSubmit:l.onCheckView,carType:a.carType,hisDirectory:a.directory,sdb:a.sdb,onTreeDataChange:l.onTreeDataChange,onUpdateDefaultOptions:l.onUpdateDefaultOptions},null,8,["curViewInx","title","onCancel","onImportFileSubmit","carType","hisDirectory","sdb","onTreeDataChange","onUpdateDefaultOptions"])):S("",!0)]),k(g,{message:a.message},null,8,["message"]),a.downloadMessage.show?(C(),V(f,{key:0,path:a.downloadMessage.path,onClose:t[7]||(t[7]=e=>a.downloadMessage.show=!1)},null,8,["path"])):S("",!0)],64)}],["__scopeId","data-v-490f6254"]]))}}}));
