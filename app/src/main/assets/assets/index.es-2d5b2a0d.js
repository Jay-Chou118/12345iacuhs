import{r as Pe,o as $,c as F,h as qe,i as G,K as N,F as oe,m as $e,B as Q,O as ue,P as re,Q as z,R as ae,U as Le,V as rt,W as Ee,d as Ie,A as lt,y as Te,a as it,t as at,f as Ae}from"./index-29b65081.js";var st=!1,ot=!0;function de(e){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(e)}function dt(e,t){if(de(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(de(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ut(e){var t=dt(e,"string");return de(t)==="symbol"?t:String(t)}function se(e,t,n){return t=ut(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}/*!
 * helper-js v3.1.5
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */function ye(e){return Object.prototype.toString.call(e)==="[object Array]"}function Ke(e){return Object.prototype.toString.call(e)==="[object Object]"}function ct(e){return typeof e=="function"}function ft(e,t){return e<t?e:t}function Je(e,t){let n,r=0;for(;(n=e.indexOf(t))>-1;)e.splice(n,1),r++;return r}function Ze(e){return e[e.length-1]}function ht(e){return ye(e)?e:[e]}function gt(e,t){let n=new Set(t);const r={};return n.forEach(u=>{r[u]=e[u]}),r}function*pt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.reverse)if(e.length!=null)for(let n=e.length-1;n>=0;n--){const r={value:e[n],index:n};(!t.exclude||!t.exclude(r))&&(yield r)}else if(Ke(e)){const n=Object.keys(e);n.reverse();for(const r of n){const u={value:e[r],key:r};(!t.exclude||!t.exclude(u))&&(yield u)}}else throw"Unsupported type";else if(e.length!=null)for(let n=0;n<e.length;n++){const r={value:e[n],index:n};(!t.exclude||!t.exclude(r))&&(yield r)}else if(Ke(e))for(const n of Object.keys(e)){const r={value:e[n],key:n};(!t.exclude||!t.exclude(r))&&(yield r)}else throw"Unsupported type"}function vt(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}function Ge(e,t){return Object.keys(t).forEach(n=>{vt(e,n,t[n])}),e}function mt(e){const t={};return Object.keys(e).forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t}function H(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=Ge({...n},{childrenKey:"children"});const{childrenKey:r}=n,u=ye(e)?e:[e];class l{}const s=(a,c,o)=>{n.reverse&&(a=a.slice(),a.reverse());const i=a.length;for(let d=0;d<i;d++){const f=a[d],h=n.reverse?i-d-1:d,p=o?[...o,h]:[];n.childFirst&&f[r]!=null&&s(f[r],f,p);const y=t(f,h,c,p);if(y===!1)throw new l;if(y==="skip children")continue;if(y==="skip siblings")break;n.childFirst||f[r]!=null&&s(f[r],f,p)}};try{s(u,null,ye(e)?[]:null)}catch(a){if(!(a instanceof l))throw a}}function yt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r;return H(e,function(){if(t(...arguments))return r={node:arguments.length<=0?void 0:arguments[0],index:arguments.length<=1?void 0:arguments[1],parent:arguments.length<=2?void 0:arguments[2],path:arguments.length<=3?void 0:arguments[3]},!1},n),r}function bt(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=yt(e,t,n);return r==null?void 0:r.node}function Qe(e,t){const n={childrenKey:"children"};t&&Object.assign(n,t);const{childrenKey:r,nodeHandler:u}=n,l=new Fe;return l.childrenKey=r,H(e,(s,a,c,o)=>{let i=Object.assign({},s);i[r]&&(i[r]=[]),u&&(i=u(i,{oldNode:s,index:a,parent:c,path:o})),l.set(o,i)},{childrenKey:r}),l.data}class Fe{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];se(this,"data",void 0),se(this,"childrenKey","children"),this.data=t}get rootChildren(){const{childrenKey:t}=this,{data:n}=this;return ye(n)?n:n[t]}*iteratePath(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{childrenKey:r,rootChildren:u}=this;if(n.reverse){const l=[...this.iteratePath(t,{...n,reverse:!1})];l.reverse();for(const{path:s,node:a}of l)yield{path:s,node:a}}else{let l=[],s=u;for(const a of t){const c=[...l,a],o=s[a];yield{path:c,node:o},l=c,s=o[r]}}}getFamily(t){const n=[];for(const{node:r}of this.iteratePath(t))n.push(r);return n}get(t){return Ze(this.getFamily(t))}getParentAndIndex(t){const n=t.slice(),r=n.pop();return{parent:this.get(n),index:r,parentPath:n}}getParent(t){return this.getParentAndIndex(t).parent}set(t,n){if(t==null||t.length===0)this.data=n;else{const{childrenKey:r}=this;let{rootChildren:u}=this;const{parent:l,index:s}=this.getParentAndIndex(t);let a;t.length===1?(u||(this.data?this.data[r]=[]:this.data=[]),a=u):(l[r]||(l[r]=[]),a=l[r]),a[s]=n}}delete(t){const{childrenKey:n,rootChildren:r}=this,{parent:u,index:l}=this.getParentAndIndex(t),s=t.length===1?r:u[n],a=s[l];return s.splice(l,1),a}walk(t,n){const{childrenKey:r,data:u}=this;return H(u,t,r,n)}clone(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qe(this.data),mt({childrenKey:this.childrenKey,nodeHandler:t.nodeHandler||void 0})}}function ze(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return ct(e)?e(...t):e}function Dt(e,t){return function(){let r,u;try{r=e(...arguments)}catch(l){u=l}finally{t()}if(u)throw u;return r}}function le(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[];let r;const u={};let l=u;return{action:function(){for(var c=arguments.length,o=new Array(c),i=0;i<c;i++)o[i]=arguments[i];if(o.length===0)return l===u&&(l=e()),l;if(r||(r=new Ot),!r.has(o)&&(r.set(o,e(...o)),t.capacity!=null)){n.push(o);const d=n.splice(0,n.length-t.capacity);for(const f of d)r.delete(f)}return r.get(o)},clearCache:()=>{r=null,n.splice(0,n.length)}}}function St(){let e,t;return{promise:new Promise((r,u)=>{e=r,t=u}),resolve:e,reject:t}}function wt(e,t){for(;;){if(e.parentNode==null)return!1;if(e.parentNode===t)return!0;e=e.parentNode}}function Oe(e){let t=e.getBoundingClientRect();if(document.documentElement.clientTop>0){const n=t.top-document.documentElement.clientTop,r=t.bottom,u=t.left-document.documentElement.clientLeft,l=t.right,s=t.width||l-u,a=t.height||r-n,i={top:n,right:l,bottom:r,left:u,width:s,height:a,x:u,y:n};t={...i,toJSON:()=>i}}return t}function Ve(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n&&n.withSelf?e:e.parentElement;for(;r;){const u=n.until&&r===n.until;if(u&&!n.withUntil)return;const l=t(r);if(l==="break")return;if(l)return r;if(u)return;r=r.parentElement}}function be(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function Re(e,t){for(const n of t)if(be(e,n))return!0;return!1}function U(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),n,r)}function W(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on".concat(t),n,r)}function Et(e){let t=[];const n=()=>{if(!u.listening){for(const l of e){U.apply(this,l);const s=()=>W.apply(this,l);t.push(s)}u.listening=!0}},u={listening:!1,stop:()=>{if(u.listening){for(const l of t)l();t=[],u.listening=!1}},resume:n,start:n};return u.start(),u}function De(e,t){return getComputedStyle(e)[t]}function Be(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n={start:0,end:e.length-1,maxTimes:1e3,...n};let{start:r,end:u}=n;const{returnNearestIfNoHit:l,maxTimes:s}=n;let a,c;r==null&&(r=0,u=e.length-1);let o=0,i;for(;r>=0&&r<=u;){if(o>=s)throw Error("binarySearch: loop times is over ".concat(s,", you can increase the limit."));a=Math.floor((u-r)/2+r),c=e[a];const d=o+1;if(i=t(c,a,d),i>0)u=a-1;else if(i<0)r=a+1;else return{index:a,value:c,count:d,hit:!0};o++}return l?{index:a,value:c,count:o+1,hit:!1,greater:i>0}:null}class Ot{constructor(){se(this,"_map",new Map),se(this,"_values",{}),se(this,"_objCount",0)}_keysToString(t){const{_map:n}=this;let r=[];for(const u of t){if(!n.has(u))return null;r.push(n.get(u)[0])}return r.toString()}has(t){return this._keysToString(t)!=null}get(t){const{_values:n}=this,r=this._keysToString(t);if(r==null)throw"Value not found by specified keys";return n[r][1]}set(t,n){const{_map:r,_values:u}=this;let l=[];for(const s of t){let a,c=1;r.has(s)?([a,c]=r.get(s),c++):(this._objCount++,a=this._objCount.toString()),r.set(s,[a,c]),l.push(a)}u[l.toString()]=[t.slice(),n]}delete(t){const{_values:n,_map:r}=this,u=this._keysToString(t);if(u==null)throw"Value not found by specified keys";delete n[u];for(const l of t){let[s,a]=r.get(l);a--,a===0?r.delete(l):r.set(l,[s,a])}}clear(){this._map.clear(),this._values={}}*entries(){const{_values:t}=this;for(const n in t){const[r,u]=t[n];yield[r,u]}}count(){return[...this.entries()].length}}/*!
 * @virtual-list/vue
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://virtual-list.phphe.com
 * Released under the MIT License.
 */var et=(e,t)=>{const n=e.__vccOpts||e;for(const[r,u]of t)n[r]=u;return n};const kt=ue({props:{table:Boolean}}),Ct={key:0},_t={key:1};function xt(e,t,n,r,u,l){return e.table?($(),F("table",Ct,[N(e.$slots,"prepend"),Ie("tbody",null,[N(e.$slots,"default")]),N(e.$slots,"append")])):($(),F("div",_t,[N(e.$slots,"prepend"),N(e.$slots,"default"),N(e.$slots,"append")]))}var Nt=et(kt,[["render",xt]]);const Pt=ue({components:{VirtualListTable:Nt},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const t=re(0),n=re(e.firstRender-1),r=z(()=>{var b;return ft(n.value,(((b=e.items)==null?void 0:b.length)||1)-1)}),u=re(0),l=z(()=>f.value[t.value]?te(t.value):0),s=z(()=>f.value.length>0?te(f.value.length-1)+Ze(d.value):0),a=z(()=>f.value[r.value]?s.value-te(r.value)-d.value[r.value]:0),c=z(()=>e.disabled?{}:{overflow:"auto"}),o=z(()=>{const b={display:"flex"};return e.disabled||(e.horizontal?Object.assign(b,{"margin-left":l.value+"px","margin-right":a.value+"px",width:s.value-a.value-l.value+"px"}):Object.assign(b,{"margin-top":l.value+"px","margin-bottom":a.value+"px"})),b["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete b.display,delete b["flex-direction"]),b}),i=z(()=>ae((e.items||[]).map(()=>null))),d=z(()=>(e.items||[]).map((b,v)=>{var S;if(i[v]!=null)return i[v];let D=(S=e.itemSize)==null?void 0:S.call(e,b,v);return D==null&&(D=u.value),D})),f=z(()=>{const b=[];return d.value.reduce((v,S)=>(b.push(v),v+S),0),b});Le(()=>e.items,E);const h=z(()=>{if(!e.items||e.disabled)return;const b=[];for(let v=t.value;v<=r.value;v++){const S=e.items[v];if(!S)break;b.push({item:S,index:v})}return b}),p=re(),y=re();rt(async()=>{E();try{we()}catch(b){await Ee(),E()}});let w;function k(){const b=p.value;if(!b)return;const v=X(b);w!=null&&e.buffer-Math.abs(v-w)>=10||(w=v,E())}let x=!1,R=!1;async function E(){var b;if(x){R=!0;return}if(!e.items||e.disabled)return;x=!0;const v=p.value,S=(b=y.value)==null?void 0:b.$el;if(!v||!S)return;u.value||(u.value=he()),t.value=ne(),n.value=fe(),await Ee();let D,L=0;const P={},Y=e.table?S.querySelector("tbody").children:S.children;for(let I=0;I<Y.length;I++){const C=Y[I],O=De(C,"position");if(O&&["absolute","fixed"].includes(O))continue;const _=De(C,"display")!=="none"?ee(C):0,T=C.getAttribute("vt-index"),q=T?parseInt(T):t.value+L;P[q]=(P[q]||0)+_,L++}for(const I of Object.keys(P)){const C=parseInt(I);i.value[C]!==P[C]&&(i.value[C]=P[C],D=!0)}D&&await Ee(),x=!1,R&&(R=!1,E());function ne(){const I=X(v)-B(v)-e.buffer;return Be(f.value,O=>O-I,{returnNearestIfNoHit:!0}).index}function fe(){const I=X(v)-B(v)+M(v)+e.buffer;return Be(f.value,O=>O-I,{returnNearestIfNoHit:!0}).index}function he(){const C=[],O=e.table?S.querySelector("tbody").children:S.children;for(let _=0;_<O.length;_++){const T=O[_],q=getComputedStyle(T);if(["absolute","fixed"].includes(q.position))continue;const ge=ee(T);if(C.push(ge),C.length>=10)break}return C.length===0?0:C.reduce((_,T)=>_+T,0)/C.length}}function M(b){const v=getComputedStyle(b);let S=parseFloat(e.horizontal?v.width:v.height);return v.boxSizing==="border-box"&&(e.horizontal?S=S-parseFloat(v.borderLeftWidth)-parseFloat(v.borderRightWidth):S=S-parseFloat(v.borderTopWidth)-parseFloat(v.borderBottomWidth)),S}function ee(b){let v=M(b);const S=getComputedStyle(b);return e.horizontal?v+=parseFloat(S.borderLeftWidth)+parseFloat(S.borderRightWidth)+parseFloat(S.marginLeft)+parseFloat(S.marginRight):v+=parseFloat(S.borderTopWidth)+parseFloat(S.borderBottomWidth)+parseFloat(S.marginTop)+parseFloat(S.marginBottom),v=Number.isNaN(v)?0:v,v}function X(b){return e.horizontal?b.scrollLeft:b.scrollTop}function B(b){const v=getComputedStyle(b);return e.horizontal?parseFloat(v.paddingLeft):parseFloat(v.paddingTop)}function te(b){return f.value[b]}function we(){const b=p.value;new ResizeObserver(S=>{for(let D of S)if(be(D.target,"vtlist")){E();break}}).observe(b)}function ce(b,v){if(e.itemKey){if(typeof e.itemKey=="string"&&e.itemKey==="index")return v;if(typeof e.itemKey=="function")return e.itemKey(b,v)}}return{listElRef:p,listInnerRef:y,onscroll:k,listStyle:c,listInnerStyle:o,visibleItemsInfo:h,getItemKey:ce,update:E,sizes:d,positions:f,runtimeSizes:i}}}),$t=Pt;function Lt(e,t,n,r,u,l){const s=Pe("VirtualListTable");return $(),F("div",{class:"vtlist",ref:"listElRef",style:Q(e.listStyle),onScrollPassive:t[0]||(t[0]=(...a)=>e.onscroll&&e.onscroll(...a))},[qe(s,{class:"vtlist-inner",ref:"listInnerRef",style:Q(e.listInnerStyle),table:e.table},{prepend:G(()=>[N(e.$slots,"prepend")]),append:G(()=>[N(e.$slots,"append")]),default:G(()=>[e.disabled?($(!0),F(oe,{key:0},$e(e.items,(a,c)=>N(e.$slots,"default",{key:e.getItemKey(a,c),item:a,index:c})),128)):($(!0),F(oe,{key:1},$e(e.visibleItemsInfo,({item:a,index:c})=>N(e.$slots,"default",{key:e.getItemKey(a,c),item:a,index:c})),128))]),_:3},8,["style","table"])],36)}var Tt=et($t,[["render",Lt]]);/*!
 * @he-tree/tree-utils v0.1.0-alpha.1
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const Z="children";function Ft(e){const n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={...Bt,...n,data:e,stats:null,statsFlat:null,_statsMap:null,initialized:!1,init(){const{data:l,childrenKey:s}=this,a=new Fe([]);this._statsMap=new Map,H(l,(o,i,d,f)=>{const h=this.statHandler({...Me(),data:o,open:!!this.defaultOpen,parent:a.getParent(f),children:[],level:f.length});this._statsMap.set(o,h),a.set(f,h)},{childrenKey:s});const c=[];a.walk(o=>{c.push(o)}),this.stats=this.statsHandler(a.rootChildren),this.statsFlat=this.statsFlatHandler(c),this.initialized=!0},getStat(l){let s=this._statsMap.get(l);if(!s)throw new He("Stat not found");return s},has(l){if(l.isStat)return this.statsFlat.indexOf(l)>-1;try{return!!this.getStat(l)}catch(s){if(s instanceof He)return!1;throw s}},_getPathByStat(l){if(l==null)return[];const a=this.getSiblings(l).indexOf(l);return[...l.parent?this._getPathByStat(l.parent):[],a]},afterOneCheckChanged(l){const{checked:s}=l;if(l._ignoreCheckedOnce)return delete l._ignoreCheckedOnce,!1;const a=c=>{const{parent:o}=c;if(o){let i,d;for(const h of o.children)if(h.checked)i=!0;else if(d=!0,i)break;const f=d?i?0:!1:!0;o.checked!==f&&(o._ignoreCheckedOnce=!0,o.checked=f),a(o)}};return a(l),H(l.children,c=>{c.checked!==s&&(c._ignoreCheckedOnce=!0,c.checked=s)},{childrenKey:Z}),!0},isVisible(l){const s=l.isStat?l:this.getStat(l),a=c=>!c||!c.hidden&&c.open&&a(c.parent);return!!(!s.hidden&&a(s.parent))},updateCheck(){H(this.stats,l=>{if(l.children&&l.children.length>0){const s=l.children.every(a=>a.checked);l.checked!==s&&(l._ignoreCheckedOnce=!0,l.checked=s)}},{childFirst:!0,childrenKey:Z})},getChecked(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.statsFlat.filter(s=>s.checked||l&&s.checked===0)},getUnchecked(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.statsFlat.filter(s=>l?!s.checked:s.checked===!1)},openAll(){for(const l of this.statsFlat)l.open=!0},closeAll(){for(const l of this.statsFlat)l.open=!1},openNodeAndParents(l){const s=l.isStat?l:this.getStat(l);for(const a of this.iterateParent(s,{withSelf:!0}))a.open=!0},_calcFlatIndex(l,s){let a=l?this.statsFlat.indexOf(l)+1:0;const c=l?l.children:this.stats;for(let o=0;o<s;o++)a+=this._count(c[o]);return a},add(l,s,a){if(this.has(l))throw"Can't add because data exists in tree";const c=s?s.children:this.stats;a==null&&(a=c.length);const o=this.statHandler({...Me(),open:!!this.defaultOpen,data:l,parent:s||null,children:[],level:s?s.level+1:1});this._setPosition(o,s||null,a);const i=l[this.childrenKey];if(i){const d=i.slice();for(const f of d)this.add(f,o)}},remove(l){const s=this.getSiblings(l);if(s.includes(l)){Je(s,l);const a=this._flat(l);this.statsFlat.splice(this.statsFlat.indexOf(l),a.length);for(const c of a)this._statsMap.delete(c.data);return this.afterRemoveStat(l),!0}return!1},getSiblings(l){const{parent:s}=l;return s?s.children:this.stats},_setPosition(l,s,a){(s?s.children:this.stats).splice(a,0,l),l.parent=s,l.level=s?s.level+1:1;const o=this._calcFlatIndex(s,a),i=this._flat(l);this.statsFlat.splice(o,0,...i);for(const d of i)this._statsMap.has(d.data)||this._statsMap.set(d.data,d);H(l,(d,f,h)=>{h&&(d.level=h.level+1)},{childrenKey:Z}),this.afterSetStat(l,s,a)},*iterateParent(l,s){let a=s!=null&&s.withSelf?l:l.parent;for(;a;)yield a,a=a.parent},move(l,s,a){if(this.has(l)){if(l.parent===s&&this.getSiblings(l).indexOf(l)===a)return!1;if(l===s)throw new Error("Can't move node to it self");if(s&&l.level<s.level){let c;for(const o of this.iterateParent(s))if(o.level===l.level){c=o;break}if(l===c)throw new Error("Can't move node to its descendant")}this.remove(l)}return this._setPosition(l,s,a),!0},_flat(l){const s=[];return H(l,a=>{s.push(a)},{childrenKey:Z}),s},_count(l){return this._flat(l).length},getData(l,s){const{childrenKey:a}=this,c=new Fe([]);return c.childrenKey=a,H(s||this.stats,(o,i,d,f)=>{let h={...o.data,[a]:[]};l&&(h=l(h)),c.set(f,h)},{childrenKey:Z}),c.data}},u=r;return r.noInitialization||u.init(),u}const Bt={childrenKey:"children",defaultOpen:!1,statsHandler(e){return e},statsFlatHandler(e){return e},afterSetStat(e,t,n){},afterRemoveStat(e){},statHandler(e){return e}};function Me(){return{isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null}}class He extends Error{constructor(t){super(t),this.name="StatNotFoundError"}}/*!
 * drag-event-service v2.0.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const pe={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},Ue={isTouch(e){return e.type&&e.type.startsWith("touch")},_getStore(e){return e._wrapperStore||(e._wrapperStore=[]),e._wrapperStore},on(e,t,n,r){const{args:u,mouseArgs:l,touchArgs:s}=We(r),a=this._getStore(e),c=this,o=function(i){let d;if(c.isTouch(i))d={x:i.changedTouches[0].pageX,y:i.changedTouches[0].pageY,pageX:i.changedTouches[0].pageX,pageY:i.changedTouches[0].pageY,clientX:i.changedTouches[0].clientX,clientY:i.changedTouches[0].clientY,screenX:i.changedTouches[0].screenX,screenY:i.changedTouches[0].screenY};else if(d={x:i.pageX,y:i.pageY,pageX:i.pageX,pageY:i.pageY,clientX:i.clientX,clientY:i.clientY,screenX:i.screenX,screenY:i.screenY},t==="start"&&i.which!==1)return;return n.call(this,i,d)};a.push({handler:n,wrapper:o}),U.call(null,e,pe[t][0],o,...u,...l),U.call(null,e,pe[t][1],o,...u,...s)},off(e,t,n,r){const{args:u,mouseArgs:l,touchArgs:s}=We(r),a=this._getStore(e);for(let c=a.length-1;c>=0;c--){const{handler:o,wrapper:i}=a[c];n===o&&(W.call(null,e,pe[t][0],i,...u,...l),W.call(null,e,pe[t][1],i,...u,...l),a.splice(c,1))}}};function We(e){e||(e={});const t=e.args||[],n=e.mouseArgs||[],r=e.touchArgs||[];return{args:t,mouseArgs:n,touchArgs:r}}/*!
 * @he-tree/dnd-utils v0.2.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const ke=new Map,j={triggerElement:null,dragElement:null,internal:!1,dropEffect:"none",preventDefault:!1},V=j;function ie(e){e.dataTransfer&&(e.dataTransfer.dropEffect=V.dropEffect)}function It(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ke.has(e))throw"Already registered on specified element";const n={...t},r=n;Ge(n,At),Ue.on(e,"start",u,{touchArgs:[{passive:!0}]});function u(i){var d;const f=i.target;f.nodeType===Node.ELEMENT_NODE&&(V.triggerElement=f);const h=f;if(n.ingoreHTMLTags&&h.tagName&&n.ingoreHTMLTags.find(y=>y.toUpperCase()===h.tagName))return;const p=(d=n.beforeDragStart)===null||d===void 0?void 0:d.call(n,i);p&&(p.setAttribute("draggable","true"),V.dragElement=p)}function l(i){var d;V.internal=!0,(d=n.onDragStart)===null||d===void 0||d.call(n,i),ie(i)}function s(i){var d;(d=n.onDrag)===null||d===void 0||d.call(n,i),ie(i)}function a(i){var d;(d=n.onDragEnd)===null||d===void 0||d.call(n,i),V.internal=!1,V.dragElement&&V.dragElement.removeAttribute("draggable"),V.triggerElement=null,V.dragElement=null,V.dropEffect="none"}const c=zt(e,{onDragLeave(i){var d;(d=n.onDragLeave)===null||d===void 0||d.call(n,i),ie(i)},onDragEnter(i){var d;r.ifPreventDefault(i)&&i.preventDefault(),(d=n.onDragEnter)===null||d===void 0||d.call(n,i),ie(i)},onDragOver(i){var d;r.ifPreventDefault(i)&&i.preventDefault(),(d=n.onDragOver)===null||d===void 0||d.call(n,i),ie(i)},onDrop(i){var d;r.ifPreventDefault(i)&&i.preventDefault(),(d=n.onDrop)===null||d===void 0||d.call(n,i)},onEnter(i){var d;(d=n.onEnter)===null||d===void 0||d.call(n,i)},onLeave(i){var d;(d=n.onLeave)===null||d===void 0||d.call(n,i)}});return U(e,"dragstart",l),U(e,"drag",s),U(e,"dragend",a),Object.assign(n,{root:e,destroy:()=>{Ue.off(e,"start",u,{touchArgs:[{passive:!0}]}),W(e,"dragstart",l),W(e,"drag",s),W(e,"dragend",a),c(),ke.delete(e)}}),ke.set(e,r),r}const At={ingoreHTMLTags:["INPUT","TEXTAREA","SELECT","OPTGROUP","OPTION"],ifPreventDefault(e){return j.dragElement?!0:V.preventDefault},beforeDragStart(e){},onDragStart(e){},onDrag(e){},onDragEnter(e){},onDragLeave(e){},onDragOver(e){},onDragEnd(e){},onDrop(e){}};let Se=null;const Kt=e=>{Se=e,setTimeout(()=>{Se=null},20)};function zt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e;let r=!1;const u=h=>{var p;r=!0,(p=t.onEnter)===null||p===void 0||p.call(t,h),i.resume()},l=h=>{var p;Kt(h.target),(p=t.onDragEnter)===null||p===void 0||p.call(t,h),r||u(h)},s=h=>{var p;r||u(h),(p=t.onDragOver)===null||p===void 0||p.call(t,h)},a=h=>{var p;(p=t.onDragLeave)===null||p===void 0||p.call(t,h);const y=function(){var k;let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h;r=!1,(k=t.onLeave)===null||k===void 0||k.call(t,x),i.stop()},w=Se;Se=null,w&&wt(w,n)||y()},c=h=>{var p;(p=t.onDrop)===null||p===void 0||p.call(t,h)},o=h=>{var p;h instanceof KeyboardEvent&&h.key!=="Escape"||(r=!1,i.stop(),(p=t.onEndBeforeLeave)===null||p===void 0||p.call(t,h))},i=Et([[e,"drop",o],[window,"mouseup",o],[window,"touchend",o],[window,"keydown",o]]);i.stop();const d=()=>{U(e,"dragenter",l),U(e,"dragover",s),U(e,"dragleave",a),U(e,"drop",c)},f=()=>{W(e,"dragenter",l),W(e,"dragover",s),W(e,"dragleave",a),W(e,"drop",c),i.stop()};return d(),f}var Vt=Object.defineProperty,Rt=Object.defineProperties,Mt=Object.getOwnPropertyDescriptors,je=Object.getOwnPropertySymbols,Ht=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable,Xe=(e,t,n)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tt=(e,t)=>{for(var n in t||(t={}))Ht.call(t,n)&&Xe(e,n,t[n]);if(je)for(var n of je(t))Ut.call(t,n)&&Xe(e,n,t[n]);return e},Wt=(e,t)=>Rt(e,Mt(t)),nt=(e,t)=>{const n=e.__vccOpts||e;for(const[r,u]of t)n[r]=u;return n};const jt=ue({props:["stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor"],emits:["open","close","check"],setup(e,{emit:t}){const n=z(()=>({[e.rtl?"paddingRight":"paddingLeft"]:e.indent*(e.stat.level-1)+"px"}));Le(()=>e.stat.checked,l=>{e.processor.afterOneCheckChanged(e.stat)&&t("check",e.stat)}),Le(()=>e.stat.open,l=>{t(l?"open":"close",e.stat)});const r=z(()=>{const l=[],s=i=>{var d;if(i.parent){let f=(d=i.parent)==null?void 0:d.children.indexOf(i);do{f++;let h=i.parent.children[f];if(h){if(!h.hidden)return!0}else break}while(!0)}return!1},a=e.rtl?"right":"left",c=e.btt?"top":"bottom";let o=e.stat;for(;o;){let i=(o.level-2)*e.indent+e.treeLineOffset;const d=s(o),f=()=>{l.push({style:{[a]:i+"px",[c]:d?0:"50%"}})};o===e.stat?o.level>1&&f():d&&f(),o=o.parent}return l}),u=z(()=>{let l=(e.stat.level-2)*e.indent+e.treeLineOffset;return{[e.rtl?"right":"left"]:l+"px"}});return{indentStyle:n,vLines:r,hLineStyle:u}}}),Xt=jt,Yt={class:"tree-node-inner"},qt={key:1,class:"tree-node",ref:"el"};function Jt(e,t,n,r,u,l){return e.table?($(),F("tr",qt,[N(e.$slots,"default",{indentStyle:e.indentStyle})],512)):($(),F("div",{key:0,class:Te(["tree-node",{"tree-node--with-tree-line":e.treeLine}]),style:Q(e.indentStyle),ref:"el"},[e.treeLine?($(),F(oe,{key:0},[($(!0),F(oe,null,$e(e.vLines,s=>($(),F("div",{class:"tree-line tree-vline",style:Q(s.style)},null,4))),256)),e.stat.level>1?($(),F("div",{key:0,class:"tree-line tree-hline",style:Q(e.hLineStyle)},null,4)):Ae("",!0)],64)):Ae("",!0),Ie("div",Yt,[N(e.$slots,"default",{indentStyle:e.indentStyle})])],6))}var Zt=nt(Xt,[["render",Jt]]);function Gt(e,t={}){const n=Wt(tt({},t),{statHandler(r){return this._statHandler2&&(r=this._statHandler2(r)),Ce(t.statHandler,ae(r))},statsHandler(r){return Ce(t.statsHandler,ae(r))},statsFlatHandler(r){return Ce(t.statsFlatHandler,ae(r))}});return Ft(e,n)}function Ce(e,t){return e?e(t):t}const Qt=ue({components:{VirtualList:Tt,TreeNode:Zt},props:{value:{required:st,type:Array},modelValue:{required:ot,type:Array},updateBehavior:{type:String,default:"modify"},processor:{type:Object,default:()=>Gt([],{noInitialization:!0})},childrenKey:{type:String,default:"children"},textKey:{type:String,default:"text"},indent:{type:Number,default:20},virtualization:{type:Boolean,default:!1},virtualizationPrerenderCount:{type:Number,default:20},defaultOpen:{type:Boolean,default:!0},statHandler:{type:Function},rtl:{type:Boolean,default:!1},btt:{type:Boolean,default:!1},table:{type:Boolean,default:!1},watermark:{type:Boolean,default:!1},nodeKey:{type:[String,Function],default:"index"},treeLine:{type:Boolean,default:!1},treeLineOffset:{type:Number,default:8}},emits:["update:modelValue","click:node","open:node","close:node","check:node","beforeDragStart","before-drag-start","after-drop","change","enter","leave"],data(){return{stats:[],statsFlat:[],dragNode:null,dragOvering:!1,placeholderData:{},placeholderColspan:1,batchUpdateWaiting:!1,self:this,_ignoreValueChangeOnce:!1}},computed:{valueComputed(){return this.modelValue||[]},visibleStats(){const{statsFlat:e,isVisible:t}=this;let n=e;return this.btt&&(n=n.slice(),n.reverse()),n.filter(r=>t(r))},rootChildren(){return this.stats}},methods:{_emitValue(e){this.$emit("update:modelValue",e)},_updateValue(e){return this.updateBehavior==="disabled"?!1:(e!==this.valueComputed&&(this._ignoreValueChangeOnce=!0),this._emitValue(e),!0)},getStat:_e(A("getStat")),has:_e(A("has")),updateCheck:A("updateCheck"),getChecked:A("getChecked"),getUnchecked:A("getUnchecked"),openAll:A("openAll"),closeAll:A("closeAll"),openNodeAndParents:A("openNodeAndParents"),isVisible:A("isVisible"),move:Ye("move"),add:_e(Ye("add")),addMulti(e,t,n){this.batchUpdate(()=>{let r=n;for(const u of e)this.add(u,t,r),r!=null&&r++})},remove:A("remove"),removeMulti(e){this.batchUpdate(()=>{for(const t of e)this.remove(t)})},iterateParent:A("iterateParent"),getSiblings:A("getSiblings"),getData:A("getData"),getRootEl(){return this.$refs.vtlist.listElRef},batchUpdate(e){const t=this.ignoreUpdate(e);return this.batchUpdateWaiting||this._updateValue(this.updateBehavior==="new"?this.getData():this.valueComputed),t},ignoreUpdate(e){const t=this.batchUpdateWaiting;this.batchUpdateWaiting=!0;const n=e();return this.batchUpdateWaiting=t,n}},watch:{processor:{immediate:!0,handler(e){if(e){const t=n=>{if(n){const{childrenKey:r}=this;return n[r]||(n[r]=[]),n[r]}else return this.valueComputed};e._statHandler2=this.statHandler?n=>n.data===this.placeholderData?n:this.statHandler(n):null,e.afterSetStat=(n,r,u)=>{const{childrenKey:l,updateBehavior:s}=this;let a=this.valueComputed;if(s==="new"){if(this.batchUpdateWaiting)return;a=this.getData()}else if(s==="modify"){const c=t(r==null?void 0:r.data);c.includes(n.data)||c.splice(u,0,n.data)}this.batchUpdateWaiting||this._updateValue(a)},e.afterRemoveStat=n=>{var r;const{childrenKey:u,updateBehavior:l}=this;let s=this.valueComputed;if(l==="new"){if(this.batchUpdateWaiting)return;s=this.getData()}else if(l==="modify"){const a=t((r=n.parent)==null?void 0:r.data);Je(a,n.data)}this.batchUpdateWaiting||this._updateValue(s)}}e.initialized||(e.data=this.valueComputed,Object.assign(e,gt(this,["childrenKey","defaultOpen"])),e.init(),e.updateCheck()),this.stats=e.stats,this.statsFlat=e.statsFlat,e.data!==this.valueComputed&&this._updateValue(e.data)}},valueComputed:{handler(e){if(this._ignoreValueChangeOnce)this._ignoreValueChangeOnce=!1;else{const{processor:t}=this;t.data=e,t.init(),this.stats=t.stats,this.statsFlat=t.statsFlat}}}},created(){},mounted(){this.watermark===!1&&(window._heTreeWatermarkDisabled=!0),this.watermark&&!window._heTreeWatermarkDisabled&&(window._heTreeWatermark||(window._heTreeWatermark=!0,console.log("%c[he-tree] Vue tree component:  https://hetree.phphe.com","color:#0075ff; font-size:14px;")))}}),en=Qt;function A(e){return function(...t){return this.processor[e](...t)}}function Ye(e){return function(...t){return this.batchUpdate(()=>this.processor[e](...t))}}function _e(e){return function(t,...n){return t&&(t=ae(t)),e.call(this,t,...n)}}const tn={key:0,class:"drag-placeholder he-tree-drag-placeholder"},nn=["colspan"],rn={class:"drag-placeholder he-tree-drag-placeholder"};function ln(e,t,n,r,u,l){const s=Pe("TreeNode"),a=Pe("VirtualList");return $(),lt(a,{class:Te(["he-tree",{"he-tree--rtl rtl":e.rtl,"he-tree--drag-overing drag-overing":e.dragOvering}]),ref:"vtlist",items:e.visibleStats,disabled:!e.virtualization,table:e.table,itemKey:e.nodeKey},{prepend:G(()=>[N(e.$slots,"prepend",{tree:e.self})]),default:G(({item:c,index:o})=>[qe(s,{"vt-index":o,class:Te([c.class,{"drag-placeholder-wrapper":c.data===e.placeholderData,"dragging-node":c===e.dragNode}]),style:Q(c.style),stat:c,rtl:e.rtl,btt:e.btt,indent:e.indent,table:e.table,treeLine:e.treeLine,treeLineOffset:e.treeLineOffset,processor:e.processor,onClick:i=>e.$emit("click:node",c),onOpen:t[0]||(t[0]=i=>e.$emit("open:node",i)),onClose:t[1]||(t[1]=i=>e.$emit("close:node",i)),onCheck:t[2]||(t[2]=i=>e.$emit("check:node",i))},{default:G(({indentStyle:i})=>[c.data===e.placeholderData?($(),F(oe,{key:0},[e.table?($(),F("td",{key:1,style:Q(i),colspan:e.placeholderColspan},[Ie("div",rn,[N(e.$slots,"placeholder",{tree:e.self})])],12,nn)):($(),F("div",tn,[N(e.$slots,"placeholder",{tree:e.self})]))],64)):N(e.$slots,"default",{key:1,node:c.data,stat:c,indentStyle:i,tree:e.self},()=>[it(at(c.data[e.textKey]),1)])]),_:2},1032,["vt-index","class","style","stat","rtl","btt","indent","table","treeLine","treeLineOffset","processor","onClick"])]),append:G(()=>[N(e.$slots,"append",{tree:e.self})]),_:3},8,["class","items","disabled","table","itemKey"])}var an=nt(en,[["render",ln]]);let m=null,g=null,xe,ve,J,me,Ne,K;const on=ue({extends:an,props:{triggerClass:{type:[String,Array]},disableDrag:Boolean,disableDrop:Boolean,eachDraggable:{type:Function},eachDroppable:{type:Function},rootDroppable:{type:[Boolean,Function],default:!0},dragOpen:{type:Boolean,default:!0},dragOpenDelay:{type:Number,default:0},beforeDragOpen:{type:Function},resolveStartMovePoint:{type:[String,Function]},keepPlaceholder:{type:Boolean},maxLevel:{type:Number},dragCopy:{type:Boolean},dragCopyDataHandler:{type:Function},onExternalDragOver:{type:Function},externalDataHandler:{type:Function}},data(){return{treeDraggableInstance:null}},computed:{},methods:{getNodeByElement(e){const t=e.getAttribute("vt-index");return t==null?null:this.visibleStats[t]},isDraggable(e){if(this.disableDrag)return!1;if(e.draggable!=null)return e.draggable;if(this.eachDraggable){const n=this.eachDraggable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDraggable(t):!0},isDroppable(e){if(this.disableDrop)return!1;if(!e)return ze(this.rootDroppable,[this,m]);if(e.droppable!=null)return e.droppable;if(this.eachDroppable){const n=this.eachDroppable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDroppable(t):!0},_eachDroppable(){var e;return ze((e=this._isDragCopy)==null?void 0:e.call(this),[this])}},mounted(){const e=(o,i)=>{let d=!0;return m&&m!==this&&(d=d&&this._isMoved),this.table&&!this._isDragCopy&&(d=d&&this._isDragCopy),d&&(o.x!==i.x||o.y!==i.y)},t=(o,i)=>{g.ignoreUpdate(()=>{if(!g.has(g.placeholderData)){if(g.table){let f=0;const h=g.getRootEl().querySelector("tr");if(h)for(const{value:p}of pt(h.children))De(p,"display")!=="none"&&(f+=p.colSpan||1);f<1&&(f=1),g.placeholderColspan=f}g.add(g.placeholderData)}const d=g.getStat(g.placeholderData);g.move(d,o,i)})},n=()=>{const o=this;if(o.has(o.placeholderData))return o.remove(o.getStat(o.placeholderData)),!0},r=o=>{o?j.dropEffect=m!=null&&m.dragCopy?"copy":"move":j.dropEffect="none"},u=o=>{const i=this;o?r(!0):i.keepPlaceholder?i.has(i.placeholderData)||r(!1):(n(),r(!1))};let l={x:0,y:0};const s=this.getRootEl();let a=null;const c=()=>{g.has(g.placeholderData)&&g.ignoreUpdate(()=>{g.remove(g.getStat(g.placeholderData)),m&&(m.dragNode.hidden=!1,m.dragOvering=!1)})};this.treeDraggableInstance=It(s,{beforeDragStart:o=>{if(!j.triggerElement)return;let i=this.triggerClass;(!i||i.length===0)&&(i="tree-node");let d=ht(i),f=Ve(j.triggerElement,h=>{if(Re(h,d))return!0;if(be(h,"tree-node"))return"break"},{withSelf:!0,until:s});if(a=Ve(f,h=>{if(be(h,"tree-node"))return!0},{withSelf:!0,until:s}),!!a){if(K=this.getNodeByElement(a),!K)throw"Can't find drag node";if(this.isDraggable(K))return this.$emit("before-drag-start",K),this.$emit("beforeDragStart",K),s}},onDragStart:o=>{var i,d;if(!a||!K)return;{const{x:y,y:w}=a.getBoundingClientRect(),{clientX:k,clientY:x}=o;(i=o.dataTransfer)==null||i.setDragImage(a,k-y,x-w)}Ne={x:o.clientX,y:o.clientY},m=this,m.dragNode=K,me=(()=>{if(this.resolveStartMovePoint==="mouse")return{x:o.clientX,y:o.clientY};if(typeof this.resolveStartMovePoint=="function")return this.resolveStartMovePoint(a);{let y,w=0;if(this.table){let k=a.getBoundingClientRect();y={x:k.x,y:k.y},this.rtl&&(y.x=k.right),w=k.height}else if(!this.rtl)y=a.children[0].getBoundingClientRect().toJSON(),w=y.height;else{const k=a.children[0].getBoundingClientRect();y={x:k.right,y:k.y},w=k.height}return this.btt&&(y.y+=w),y}})(),this.dragOvering=!0;const h=m.getSiblings(m.dragNode),p=h.indexOf(K);xe={tree:m,dragNode:K,parent:K.parent,siblings:h,indexBeforeDrop:p},g=this,(d=o.dataTransfer)==null||d.setData("text","he-tree drag start at ".concat(new Date().toISOString())),m._eachDroppable()||setTimeout(()=>{K.hidden=!0,t(K.parent,p+1)},0)},onEnter:o=>{this.$emit("enter",o)},onLeave:o=>{J=null,this.dragOvering=!1,j.preventDefault=!1,n(),this.$emit("leave",o)},onDragOver:Dt(o=>{if(!m){if(!this.onExternalDragOver||this.onExternalDragOver(o)===!1)return;j.preventDefault=!0}const i={x:o.clientX,y:o.clientY},d=e(i,l);if(l=i,!d)return;this.dragOvering=!0,g=this;const f=me?{x:me.x+(i.x-Ne.x),y:me.y+(i.y-Ne.y)}:tt({},i),{btt:h,rtl:p}=g;if(g.disableDrop){j.dropEffect="none";return}let y,w;const k=g.getRootEl().querySelectorAll(".tree-node"),x=[];k.forEach(D=>{!Re(D,["drag-placeholder-wrapper","dragging-node"])&&De(D,"display")!=="none"&&x.push(D)});const R=Be(x,D=>Oe(D)[h?"bottom":"top"]-f.y,{returnNearestIfNoHit:!0});let E=null,M,ee;R.hit||(R.greater?h||(E=R.index-1,x[E]||E++):h&&(E=R.index+1,x[E]||E--)),E==null&&(E=R.index),M=x[E],ee=h?x[E-1]:x[E+1],y=M&&g.getNodeByElement(M),w=ee&&g.getNodeByElement(ee);const{indent:X}=g,B=le(()=>{if(g.table){let D=Oe(M).toJSON();const L=X*(y.level-1);return p?(D.width-=L,D.right-=L):D.x+=L,D}else return Oe(M.firstElementChild)}).action,te=le(()=>h?f.y>B().y+B().height/2:f.y<B().y+B().height/2).action,we=le(()=>h?!M||E===x.length-1&&te():!M||E===0&&te()).action,ce=le(()=>p?f.x-(B().x+B().width):B().x-f.x).action,b=le(()=>p?f.x<B().x+B().width-X:f.x>B().x+X).action;let v;if(we())v=1,y=null;else if(y)ce()>0?v=y.level-Math.ceil(ce()/X):b()?v=y.level+1:v=y.level;else return;w&&v<w.level&&(v=w.level),(async()=>{let D,L,P=!1,Y=null;const ne=async O=>{if(O.open)return!0;if(g.dragOpen)if(g.dragOpenDelay)if(Y=O,J===O)P=!0;else{let _=St();J=O;const T=O;return setTimeout(async()=>{T!==J?(P=!0,_.resolve(!0)):(g.beforeDragOpen&&await g.beforeDragOpen(O),T!==J?(P=!0,_.resolve(!0)):(O.open=!0,Y=null,_.resolve(!0)))},g.dragOpenDelay),await _.promise}else return O.open=!0,!0;else return!1},fe=async()=>{if(g.isDroppable(y)&&await ne(y)){if(P)return;D=y,L=null}else return!1},he=(O=v)=>{let _=y,T=[];for(;_&&_.level>=O;)_=_.parent||null,T.unshift(_);let q=0;for(const ge of T){if(g.isDroppable(ge))return D=ge,L=T[q+1]||y,!0;q++}return!1};y?v>y.level?await fe()===!1&&he(y.level):he()===!1&&await fe():g.isDroppable(null)&&(D=null),J=Y;const I=!!(!P&&(D||D===null));return{cancelled:P,success:I,parent:D,index:I?(()=>L?(D?D.children:g.stats).filter(O=>O.data!==g.placeholderData).indexOf(L)+1:0)():-1}})().then(D=>{if(!D.cancelled){if(!D.success){u(!1);return}if(m&&g.maxLevel!=null&&g.maxLevel>0){const L=m.dragNode;let P=0;if(H(L,ne=>{ne.level>P&&(P=ne.level)},{childrenKey:Z}),P-L.level+1+(D.parent?D.parent.level:0)>g.maxLevel){u(!1);return}}u(!0),t(D.parent,D.index)}})},()=>{}),onDrop:o=>{g=this;const i=!m;if(!g)return;const d=m==null?void 0:m.dragNode;let f,h=(()=>{var p;let y=!0;if(!g.has(g.placeholderData))y=!1;else if(i)f=(p=this.externalDataHandler)==null?void 0:p.call(this,o),y=f!=null;else if(!m.dragCopy){const w=g.getStat(g.placeholderData);m===g&&w.parent===d.parent&&bt(d,k=>k===w)}return y})();if(h){const p=g.getStat(g.placeholderData),y=g.getSiblings(p);ve={tree:g,dragNode:d,parent:p.parent,siblings:y,indexBeforeDrop:y.indexOf(p)}}(()=>{if(c(),h){let p=ve.indexBeforeDrop;m&&!m.dragCopy&&m===g&&xe.parent==ve.parent&&xe.indexBeforeDrop<p&&p--,m&&m!==g&&!m._eachDroppable()&&m.batchUpdate(()=>{m.remove(d),m.updateCheck()}),g.batchUpdate(()=>{let y=m==null?void 0:m.dragNode,w;f?w=f:m._eachDroppable()&&(w=Qe(m.dragNode.data,{childrenKey:m.childrenKey}),m.dragCopyDataHandler&&(w=m.dragCopyDataHandler(w))),w&&(g.add(w),y=g.getStat(w)),g.move(y,ve.parent,p),g.updateCheck()})}g.$emit("after-drop"),h&&(m&&(m.dragCopy||m.$emit("change")),g!==m&&g.$emit("change"))})()},onDragEnd:o=>{c(),m&&(m.dragNode&&(m.dragNode.hidden=!1),m.dragNode=null,m.dragOvering=!1,m=null),g=null,J=null,K=null}})},unmounted(){var e;(e=this.treeDraggableInstance)==null||e.destroy()}});export{on as c};
