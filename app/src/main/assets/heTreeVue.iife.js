var Pt=Object.defineProperty,Lt=Object.defineProperties;var It=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var Kt=Object.prototype.hasOwnProperty,At=Object.prototype.propertyIsEnumerable;var Ue=(O,b,f)=>b in O?Pt(O,b,{enumerable:!0,configurable:!0,writable:!0,value:f}):O[b]=f,K=(O,b)=>{for(var f in b||(b={}))Kt.call(b,f)&&Ue(O,f,b[f]);if(Re)for(var f of Re(b))At.call(b,f)&&Ue(O,f,b[f]);return O},Y=(O,b)=>Lt(O,It(b));/*!
 * @he-tree/vue v2.4.1
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://hetree.phphe.com/
 * Released under the MIT License.
 */var heTreeVue=function(O,b,f){"use strict";function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}/*!
 * helper-js v3.1.2
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */function ie(e){return Object.prototype.toString.call(e)==="[object Array]"}function Ce(e){return Object.prototype.toString.call(e)==="[object Object]"}function We(e){return typeof e=="function"}function Xe(e,t){return e<t?e:t}function xe(e,t){let n,r=0;for(;(n=e.indexOf(t))>-1;)e.splice(n,1),r++;return r}function _e(e){return e[e.length-1]}function je(e){return ie(e)?e:[e]}function Ye(e,t){let n=new Set(t);const r={};return n.forEach(s=>{r[s]=e[s]}),r}function*qe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.reverse)if(e.length!=null)for(let n=e.length-1;n>=0;n--){const r={value:e[n],index:n};(!t.exclude||!t.exclude(r))&&(yield r)}else if(Ce(e)){const n=Object.keys(e);n.reverse();for(const r of n){const s={value:e[r],key:r};(!t.exclude||!t.exclude(s))&&(yield s)}}else throw"Unsupported type";else if(e.length!=null)for(let n=0;n<e.length;n++){const r={value:e[n],index:n};(!t.exclude||!t.exclude(r))&&(yield r)}else if(Ce(e))for(const n of Object.keys(e)){const r={value:e[n],key:n};(!t.exclude||!t.exclude(r))&&(yield r)}else throw"Unsupported type"}function Je(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}function Oe(e,t){return Object.keys(t).forEach(n=>{Je(e,n,t[n])}),e}function Ze(e){const t={};return Object.keys(e).forEach(n=>{e[n]!==void 0&&(t[n]=e[n])}),t}function V(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=Oe(K({},n),{childrenKey:"children"});const{childrenKey:r}=n,s=ie(e)?e:[e];class l{}const o=(i,u,d)=>{n.reverse&&(i=i.slice(),i.reverse());const a=i.length;for(let c=0;c<a;c++){const g=i[c],p=n.reverse?a-c-1:c,m=d?[...d,p]:[];n.childFirst&&g[r]!=null&&o(g[r],g,m);const S=t(g,p,u,m);if(S===!1)throw new l;if(S==="skip children")continue;if(S==="skip siblings")break;n.childFirst||g[r]!=null&&o(g[r],g,m)}};try{o(s,null,ie(e)?[]:null)}catch(i){if(!(i instanceof l))throw i}}function Ge(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r;return V(e,function(){if(t(...arguments))return r={node:arguments.length<=0?void 0:arguments[0],index:arguments.length<=1?void 0:arguments[1],parent:arguments.length<=2?void 0:arguments[2],path:arguments.length<=3?void 0:arguments[3]},!1},n),r}function Qe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Ge(e,t,n);return r==null?void 0:r.node}function $e(e,t){const n={childrenKey:"children"};t&&Object.assign(n,t);const{childrenKey:r,nodeHandler:s}=n,l=new ye;return l.childrenKey=r,V(e,(o,i,u,d)=>{let a=Object.assign({},o);a[r]&&(a[r]=[]),s&&(a=s(a,{oldNode:o,index:i,parent:u,path:d})),l.set(d,a)},{childrenKey:r}),l.data}class ye{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];ne(this,"data",void 0),ne(this,"childrenKey","children"),this.data=t}get rootChildren(){const{childrenKey:t}=this,{data:n}=this;return ie(n)?n:n[t]}*iteratePath(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{childrenKey:r,rootChildren:s}=this;if(n.reverse){const l=[...this.iteratePath(t,Y(K({},n),{reverse:!1}))];l.reverse();for(const{path:o,node:i}of l)yield{path:o,node:i}}else{let l=[],o=s;for(const i of t){const u=[...l,i],d=o[i];yield{path:u,node:d},l=u,o=d[r]}}}getFamily(t){const n=[];for(const{node:r}of this.iteratePath(t))n.push(r);return n}get(t){return _e(this.getFamily(t))}getParentAndIndex(t){const n=t.slice(),r=n.pop();return{parent:this.get(n),index:r,parentPath:n}}getParent(t){return this.getParentAndIndex(t).parent}set(t,n){if(t==null||t.length===0)this.data=n;else{const{childrenKey:r}=this;let{rootChildren:s}=this;const{parent:l,index:o}=this.getParentAndIndex(t);let i;t.length===1?(s||(this.data?this.data[r]=[]:this.data=[]),i=s):(l[r]||(l[r]=[]),i=l[r]),i[o]=n}}delete(t){const{childrenKey:n,rootChildren:r}=this,{parent:s,index:l}=this.getParentAndIndex(t),o=t.length===1?r:s[n],i=o[l];return o.splice(l,1),i}walk(t,n){const{childrenKey:r,data:s}=this;return V(s,t,r,n)}clone(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $e(this.data),Ze({childrenKey:this.childrenKey,nodeHandler:t.nodeHandler||void 0})}}function Ne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return We(e)?e(...t):e}function et(e,t){return function(){let r,s;try{r=e(...arguments)}catch(l){s=l}finally{t()}if(s)throw s;return r}}function re(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[];let r;const s={};let l=s;return{action:function(){for(var u=arguments.length,d=new Array(u),a=0;a<u;a++)d[a]=arguments[a];if(d.length===0)return l===s&&(l=e()),l;if(r||(r=new lt),!r.has(d)&&(r.set(d,e(...d)),t.capacity!=null)){n.push(d);const c=n.splice(0,n.length-t.capacity);for(const g of c)r.delete(g)}return r.get(d)},clearCache:()=>{r=null,n.splice(0,n.length)}}}function tt(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}function nt(e,t){for(;;){if(e.parentNode==null)return!1;if(e.parentNode===t)return!0;e=e.parentNode}}function ve(e){let t=e.getBoundingClientRect();if(document.documentElement.clientTop>0){const n=t.top-document.documentElement.clientTop,r=t.bottom,s=t.left-document.documentElement.clientLeft,l=t.right,o=t.width||l-s,i=t.height||r-n,a={top:n,right:l,bottom:r,left:s,width:o,height:i,x:s,y:n};t=Y(K({},a),{toJSON:()=>a})}return t}function Be(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n&&n.withSelf?e:e.parentElement;for(;r;){const s=n.until&&r===n.until;if(s&&!n.withUntil)return;const l=t(r);if(l==="break")return;if(l)return r;if(s)return;r=r.parentElement}}function oe(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function Te(e,t){for(const n of t)if(oe(e,n))return!0;return!1}function H(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),n,r)}function R(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on".concat(t),n,r)}function rt(e){let t=[];const s={listening:!1,stop:()=>{if(!!s.listening){for(const l of t)l();t=[],s.listening=!1}},resume:()=>{if(!s.listening){for(const l of e){H.apply(this,l);const o=()=>R.apply(this,l);t.push(o)}s.listening=!0}}};return s}function se(e,t){return getComputedStyle(e)[t]}function be(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n=K({start:0,end:e.length-1,maxTimes:1e3},n);let{start:r,end:s}=n;const{returnNearestIfNoHit:l,maxTimes:o}=n;let i,u;r==null&&(r=0,s=e.length-1);let d=0,a;for(;r>=0&&r<=s;){if(d>=o)throw Error("binarySearch: loop times is over ".concat(o,", you can increase the limit."));i=Math.floor((s-r)/2+r),u=e[i];const c=d+1;if(a=t(u,i,c),a>0)s=i-1;else if(a<0)r=i+1;else return{index:i,value:u,count:c,hit:!0};d++}return l?{index:i,value:u,count:d+1,hit:!1,greater:a>0}:null}class lt{constructor(){ne(this,"_map",new Map),ne(this,"_values",{}),ne(this,"_objCount",0)}_keysToString(t){const{_map:n}=this;let r=[];for(const s of t){if(!n.has(s))return null;r.push(n.get(s)[0])}return r.toString()}has(t){return this._keysToString(t)!=null}get(t){const{_values:n}=this,r=this._keysToString(t);if(r==null)throw"Value not found by specified keys";return n[r][1]}set(t,n){const{_map:r,_values:s}=this;let l=[];for(const o of t){let i,u=1;r.has(o)?([i,u]=r.get(o),u++):(this._objCount++,i=this._objCount.toString()),r.set(o,[i,u]),l.push(i)}s[l.toString()]=[t.slice(),n]}delete(t){const{_values:n,_map:r}=this,s=this._keysToString(t);if(s==null)throw"Value not found by specified keys";delete n[s];for(const l of t){let[o,i]=r.get(l);i--,i===0?r.delete(l):r.set(l,[o,i])}}clear(){this._map.clear(),this._values={}}*entries(){const{_values:t}=this;for(const n in t){const[r,s]=t[n];yield[r,s]}}count(){return[...this.entries()].length}}/*!
 * @virtual-list/vue
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: https://virtual-list.phphe.com
 * Released under the MIT License.
 */var Fe=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n};const at=b.defineComponent({props:{table:Boolean}}),it={key:0},ot={key:1};function st(e,t,n,r,s,l){return e.table?(f.openBlock(),f.createElementBlock("table",it,[f.renderSlot(e.$slots,"prepend"),f.createElementVNode("tbody",null,[f.renderSlot(e.$slots,"default")]),f.renderSlot(e.$slots,"append")])):(f.openBlock(),f.createElementBlock("div",ot,[f.renderSlot(e.$slots,"prepend"),f.renderSlot(e.$slots,"default"),f.renderSlot(e.$slots,"append")]))}var dt=Fe(at,[["render",st]]);const ct=b.defineComponent({components:{VirtualListTable:dt},props:{items:Array,disabled:Boolean,horizontal:Boolean,firstRender:{type:Number,default:10},buffer:{type:Number,default:100},itemKey:{type:[String,Function]},itemSize:{type:Function},table:Boolean},setup(e){const t=b.ref(0),n=b.ref(e.firstRender-1),r=b.computed(()=>{var k;return Xe(n.value,(((k=e.items)==null?void 0:k.length)||1)-1)}),s=b.ref(0),l=b.computed(()=>g.value[t.value]?ee(t.value):0),o=b.computed(()=>g.value.length>0?ee(g.value.length-1)+_e(c.value):0),i=b.computed(()=>g.value[r.value]?o.value-ee(r.value)-c.value[r.value]:0),u=b.computed(()=>e.disabled?{}:{overflow:"auto"}),d=b.computed(()=>{const k={display:"flex"};return e.disabled||(e.horizontal?Object.assign(k,{"margin-left":l.value+"px","margin-right":i.value+"px",width:o.value-i.value-l.value+"px"}):Object.assign(k,{"margin-top":l.value+"px","margin-bottom":i.value+"px"})),k["flex-direction"]=e.horizontal?"row":"column",e.table&&(delete k.display,delete k["flex-direction"]),k}),a=b.computed(()=>b.reactive((e.items||[]).map(()=>null))),c=b.computed(()=>(e.items||[]).map((k,v)=>{var E;if(a[v]!=null)return a[v];let w=(E=e.itemSize)==null?void 0:E.call(e,k,v);return w==null&&(w=s.value),w})),g=b.computed(()=>{const k=[];return c.value.reduce((v,E)=>(k.push(v),v+E),0),k});b.watch(()=>e.items,C);const p=b.computed(()=>{if(!e.items||e.disabled)return;const k=[];for(let v=t.value;v<=r.value;v++){const E=e.items[v];if(!E)break;k.push({item:E,index:v})}return k}),m=b.ref(),S=b.ref();b.onMounted(async()=>{C();try{De()}catch{await b.nextTick(),C()}});let D;function _(){const k=m.value;if(!k)return;const v=j(k);D!=null&&e.buffer-Math.abs(v-D)>=10||(D=v,C())}let B=!1,U=!1;async function C(){var k;if(B){U=!0;return}if(!e.items||e.disabled)return;B=!0;const v=m.value,E=(k=S.value)==null?void 0:k.$el;if(!v||!E)return;s.value||(s.value=pe()),t.value=te(),n.value=ge(),await b.nextTick();let w,F=0;const T={},Z=e.table?E.querySelector("tbody").children:E.children;for(let I=0;I<Z.length;I++){const $=Z[I],x=se($,"position");if(x&&["absolute","fixed"].includes(x))continue;const N=se($,"display")!=="none"?Q($):0,P=$.getAttribute("vt-index"),G=P?parseInt(P):t.value+F;T[G]=(T[G]||0)+N,F++}for(const I of Object.keys(T)){const $=parseInt(I);a.value[$]!==T[$]&&(a.value[$]=T[$],w=!0)}w&&await b.nextTick(),B=!1,U&&(U=!1,C());function te(){const I=j(v)-L(v)-e.buffer;return be(g.value,x=>x-I,{returnNearestIfNoHit:!0}).index}function ge(){const I=j(v)-L(v)+W(v)+e.buffer;return be(g.value,x=>x-I,{returnNearestIfNoHit:!0}).index}function pe(){const $=[],x=e.table?E.querySelector("tbody").children:E.children;for(let N=0;N<x.length;N++){const P=x[N],G=getComputedStyle(P);if(["absolute","fixed"].includes(G.position))continue;const me=Q(P);if($.push(me),$.length>=10)break}return $.length===0?0:$.reduce((N,P)=>N+P,0)/$.length}}function W(k){const v=getComputedStyle(k);let E=parseFloat(e.horizontal?v.width:v.height);return v.boxSizing==="border-box"&&(e.horizontal?E=E-parseFloat(v.borderLeftWidth)-parseFloat(v.borderRightWidth):E=E-parseFloat(v.borderTopWidth)-parseFloat(v.borderBottomWidth)),E}function Q(k){let v=W(k);const E=getComputedStyle(k);return e.horizontal?v+=parseFloat(E.borderLeftWidth)+parseFloat(E.borderRightWidth)+parseFloat(E.marginLeft)+parseFloat(E.marginRight):v+=parseFloat(E.borderTopWidth)+parseFloat(E.borderBottomWidth)+parseFloat(E.marginTop)+parseFloat(E.marginBottom),v=Number.isNaN(v)?0:v,v}function j(k){return e.horizontal?k.scrollLeft:k.scrollTop}function L(k){const v=getComputedStyle(k);return e.horizontal?parseFloat(v.paddingLeft):parseFloat(v.paddingTop)}function ee(k){return g.value[k]}function De(){const k=m.value;new ResizeObserver(E=>{for(let w of E)if(oe(w.target,"vtlist")){C();break}}).observe(k)}function he(k,v){if(e.itemKey){if(typeof e.itemKey=="string"&&e.itemKey==="index")return v;if(typeof e.itemKey=="function")return e.itemKey(k,v)}}return{listElRef:m,listInnerRef:S,onscroll:_,listStyle:u,listInnerStyle:d,visibleItemsInfo:p,getItemKey:he,update:C,sizes:c,positions:g,runtimeSizes:a}}});function ut(e,t,n,r,s,l){const o=f.resolveComponent("VirtualListTable");return f.openBlock(),f.createElementBlock("div",{class:"vtlist",ref:"listElRef",style:f.normalizeStyle(e.listStyle),onScrollPassive:t[0]||(t[0]=(...i)=>e.onscroll&&e.onscroll(...i))},[f.createVNode(o,{class:"vtlist-inner",ref:"listInnerRef",style:f.normalizeStyle(e.listInnerStyle),table:e.table},{prepend:f.withCtx(()=>[f.renderSlot(e.$slots,"prepend")]),append:f.withCtx(()=>[f.renderSlot(e.$slots,"append")]),default:f.withCtx(()=>[e.disabled?(f.openBlock(!0),f.createElementBlock(f.Fragment,{key:0},f.renderList(e.items,(i,u)=>f.renderSlot(e.$slots,"default",{key:e.getItemKey(i,u),item:i,index:u})),128)):(f.openBlock(!0),f.createElementBlock(f.Fragment,{key:1},f.renderList(e.visibleItemsInfo,({item:i,index:u})=>f.renderSlot(e.$slots,"default",{key:e.getItemKey(i,u),item:i,index:u})),128))]),_:3},8,["style","table"])],36)}var ft=Fe(ct,[["render",ut]]),Pe=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n};const ht=b.defineComponent({props:["stat","rtl","indent","table","processor"],emits:["open","close","check"],setup(e,{emit:t}){const n=b.computed(()=>({[e.rtl?"paddingRight":"paddingLeft"]:e.indent*(e.stat.level-1)+"px"}));return b.watch(()=>e.stat.checked,r=>{e.processor.afterOneCheckChanged(e.stat)&&t("check",e.stat)}),b.watch(()=>e.stat.open,r=>{t(r?"open":"close",e.stat)}),{indentStyle:n}}}),gt={class:"tree-node-inner"},pt={key:1,class:"tree-node",ref:"el"};function mt(e,t,n,r,s,l){return e.table?(f.openBlock(),f.createElementBlock("tr",pt,[f.renderSlot(e.$slots,"default",{indentStyle:e.indentStyle})],512)):(f.openBlock(),f.createElementBlock("div",{key:0,class:"tree-node",style:f.normalizeStyle(e.indentStyle),ref:"el"},[f.createElementVNode("div",gt,[f.renderSlot(e.$slots,"default",{indentStyle:e.indentStyle})])],4))}var yt=Pe(ht,[["render",mt]]);/*!
 * @he-tree/tree-utils v0.1.0-alpha.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const q="children";function vt(e){const n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Y(K(K({},bt),n),{data:e,stats:null,statsFlat:null,_statsMap:null,initialized:!1,init(){const{data:l,childrenKey:o}=this,i=new ye([]);this._statsMap=new Map,V(l,(d,a,c,g)=>{const p=this.statHandler(Y(K({},Le()),{data:d,open:Boolean(this.defaultOpen),parent:i.getParent(g),children:[],level:g.length}));this._statsMap.set(d,p),i.set(g,p)},{childrenKey:o});const u=[];i.walk(d=>{u.push(d)}),this.stats=this.statsHandler(i.rootChildren),this.statsFlat=this.statsFlatHandler(u),this.initialized=!0},getStat(l){let o=this._statsMap.get(l);if(!o)throw new Ie("Stat not found");return o},has(l){if(l.isStat)return this.statsFlat.indexOf(l)>-1;try{let o=this.getStat(l);return Boolean(o)}catch(o){if(o instanceof Ie)return!1;throw o}},_getPathByStat(l){if(l==null)return[];const i=this.getSiblings(l).indexOf(l);return[...l.parent?this._getPathByStat(l.parent):[],i]},afterOneCheckChanged(l){const{checked:o}=l;if(l._ignoreCheckedOnce)return delete l._ignoreCheckedOnce,!1;const i=u=>{const{parent:d}=u;if(d){let a,c;for(const p of d.children)if(p.checked)a=!0;else if(c=!0,a)break;const g=c?a?0:!1:!0;d.checked!==g&&(d._ignoreCheckedOnce=!0,d.checked=g),i(d)}};return i(l),V(l.children,u=>{u.checked!==o&&(u._ignoreCheckedOnce=!0,u.checked=o)},{childrenKey:q}),!0},isVisible(l){const o=l.isStat?l:this.getStat(l),i=u=>!u||!u.hidden&&u.open&&i(u.parent);return Boolean(!o.hidden&&i(o.parent))},updateCheck(){V(this.stats,l=>{if(l.children&&l.children.length>0){const o=l.children.every(i=>i.checked);l.checked!==o&&(l._ignoreCheckedOnce=!0,l.checked=o)}},{childFirst:!0,childrenKey:q})},getChecked(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.statsFlat.filter(o=>o.checked||l&&o.checked===0)},getUnchecked(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.statsFlat.filter(o=>l?!o.checked:o.checked===!1)},openAll(){for(const l of this.statsFlat)l.open=!0},closeAll(){for(const l of this.statsFlat)l.open=!1},_calcFlatIndex(l,o){let i=l?this.statsFlat.indexOf(l)+1:0;const u=l?l.children:this.stats;for(let d=0;d<o;d++)i+=this._count(u[d]);return i},add(l,o,i){if(this.has(l))throw"Can't add because data exists in tree";const u=o?o.children:this.stats;i==null&&(i=u.length);const d=this.statHandler(Y(K({},Le()),{open:Boolean(this.defaultOpen),data:l,parent:o||null,children:[],level:o?o.level+1:1}));this._setPosition(d,o||null,i);const a=l[this.childrenKey];if(a){const c=a.slice();for(const g of c)this.add(g,d)}},remove(l){const o=this.getSiblings(l);if(o.includes(l)){xe(o,l);const i=this._flat(l);this.statsFlat.splice(this.statsFlat.indexOf(l),i.length);for(const u of i)this._statsMap.delete(u.data);return this.afterRemoveStat(l),!0}return!1},getSiblings(l){const{parent:o}=l;return o?o.children:this.stats},_setPosition(l,o,i){(o?o.children:this.stats).splice(i,0,l),l.parent=o,l.level=o?o.level+1:1;const d=this._calcFlatIndex(o,i),a=this._flat(l);this.statsFlat.splice(d,0,...a);for(const c of a)this._statsMap.has(c.data)||this._statsMap.set(c.data,c);V(l,(c,g,p)=>{p&&(c.level=p.level+1)},{childrenKey:q}),this.afterSetStat(l,o,i)},*iterateParent(l,o){let i=o!=null&&o.withSelf?l:l.parent;for(;i;)yield i,i=i.parent},move(l,o,i){if(this.has(l)){if(l.parent===o&&this.getSiblings(l).indexOf(l)===i)return!1;if(l===o)throw new Error("Can't move node to it self");if(o&&l.level<o.level){let u;for(const d of this.iterateParent(o))if(d.level===l.level){u=d;break}if(l===u)throw new Error("Can't move node to its descendant")}this.remove(l)}return this._setPosition(l,o,i),!0},_flat(l){const o=[];return V(l,i=>{o.push(i)},{childrenKey:q}),o},_count(l){return this._flat(l).length},getData(l,o){const{childrenKey:i}=this,u=new ye([]);return u.childrenKey=i,V(o||this.stats,(d,a,c,g)=>{let p=Y(K({},d.data),{[i]:[]});l&&(p=l(p)),u.set(g,p)},{childrenKey:q}),u.data}}),s=r;return r.noInitialization||s.init(),s}const bt={childrenKey:"children",defaultOpen:!1,statsHandler(e){return e},statsFlatHandler(e){return e},afterSetStat(e,t,n){},afterRemoveStat(e){},statHandler(e){return e}};function Le(){return{isStat:!0,hidden:!1,checked:!1,style:null,class:null,draggable:null,droppable:null}}class Ie extends Error{constructor(t){super(t);this.name="StatNotFoundError"}}function St(e,t={}){const n=Y(K({},t),{statHandler(r){return this._statHandler2&&(r=this._statHandler2(r)),Se(t.statHandler,b.reactive(r))},statsHandler(r){return Se(t.statsHandler,b.reactive(r))},statsFlatHandler(r){return Se(t.statsFlatHandler,b.reactive(r))}});return vt(e,n)}function Se(e,t){return e?e(t):t}var Mt="";const kt=b.defineComponent({components:{VirtualList:ft,TreeNode:yt},props:{value:{required:b.isVue2,type:Array},modelValue:{required:b.isVue3,type:Array},updateBehavior:{type:String,default:"modify"},processor:{type:Object,default:()=>St([],{noInitialization:!0})},childrenKey:{type:String,default:"children"},textKey:{type:String,default:"text"},indent:{type:Number,default:20},virtualization:{type:Boolean,default:!1},virtualizationPrerenderCount:{type:Number,default:20},defaultOpen:{type:Boolean,default:!0},statHandler:{type:Function},rtl:{type:Boolean,default:!1},btt:{type:Boolean,default:!1},table:{type:Boolean,default:!1},watermark:{type:Boolean,default:!0},nodeKey:{type:[String,Function],default:"index"}},emits:["update:modelValue","click:node","open:node","close:node","check:node","after-drop","change","enter","leave"],data(){return{stats:[],statsFlat:[],dragNode:null,dragOvering:!1,placeholderData:{},placeholderColspan:1,batchUpdateWaiting:!1,self:this,_ignoreValueChangeOnce:!1}},computed:{valueComputed(){return(b.isVue2?this.value:this.modelValue)||[]},visibleStats(){const{statsFlat:e,isVisible:t}=this;let n=e;return this.btt&&(n=n.slice(),n.reverse()),n.filter(r=>t(r))},rootChildren(){return this.stats}},methods:{_emitValue(e){this.$emit(b.isVue2?"input":"update:modelValue",e)},_updateValue(e){return this.updateBehavior==="disabled"?!1:(e!==this.valueComputed&&(this._ignoreValueChangeOnce=!0),this._emitValue(e),!0)},getStat:ke(A("getStat")),has:ke(A("has")),updateCheck:A("updateCheck"),getChecked:A("getChecked"),getUnchecked:A("getUnchecked"),openAll:A("openAll"),closeAll:A("closeAll"),isVisible:A("isVisible"),move:Ke("move"),add:ke(Ke("add")),addMulti(e,t,n){this.batchUpdate(()=>{let r=n;for(const s of e)this.add(s,t,r),r!=null&&r++})},remove:A("remove"),removeMulti(e){this.batchUpdate(()=>{for(const t of e)this.remove(t)})},iterateParent:A("iterateParent"),getSiblings:A("getSiblings"),getData:A("getData"),getRootEl(){return this.$refs.vtlist.listElRef},batchUpdate(e){const t=this.ignoreUpdate(e);return this.batchUpdateWaiting||this._updateValue(this.updateBehavior==="new"?this.getData():this.valueComputed),t},ignoreUpdate(e){const t=this.batchUpdateWaiting;this.batchUpdateWaiting=!0;const n=e();return this.batchUpdateWaiting=t,n}},watch:{processor:{immediate:!0,handler(e){if(e){const t=n=>{if(n){const{childrenKey:r}=this;return n[r]||(n[r]=[]),n[r]}else return this.valueComputed};e._statHandler2=this.statHandler?n=>n.data===this.placeholderData?n:this.statHandler(n):null,e.afterSetStat=(n,r,s)=>{const{childrenKey:l,updateBehavior:o}=this;let i=this.valueComputed;if(o==="new"){if(this.batchUpdateWaiting)return;i=this.getData()}else if(o==="modify"){const u=t(r==null?void 0:r.data);u.includes(n.data)||u.splice(s,0,n.data)}this.batchUpdateWaiting||this._updateValue(i)},e.afterRemoveStat=n=>{var o;const{childrenKey:r,updateBehavior:s}=this;let l=this.valueComputed;if(s==="new"){if(this.batchUpdateWaiting)return;l=this.getData()}else if(s==="modify"){const i=t((o=n.parent)==null?void 0:o.data);xe(i,n.data)}this.batchUpdateWaiting||this._updateValue(l)}}e.initialized||(e.data=this.valueComputed,Object.assign(e,Ye(this,["childrenKey","defaultOpen"])),e.init(),e.updateCheck()),this.stats=e.stats,this.statsFlat=e.statsFlat,e.data!==this.valueComputed&&this._updateValue(e.data)}},valueComputed:{handler(e){if(this._ignoreValueChangeOnce)this._ignoreValueChangeOnce=!1;else{const{processor:t}=this;t.data=e,t.init(),this.stats=t.stats,this.statsFlat=t.statsFlat}}}},created(){},mounted(){this.watermark===!1&&(window._heTreeWatermarkDisabled=!0),this.watermark&&!window._heTreeWatermarkDisabled&&(window._heTreeWatermark||(window._heTreeWatermark=!0,console.log("%c[he-tree] Vue tree component:  https://hetree.phphe.com","color:#0075ff; font-size:14px;")))}});function A(e){return function(...t){return this.processor[e](...t)}}function Ke(e){return function(...t){return this.batchUpdate(()=>this.processor[e](...t))}}function ke(e){return function(t,...n){return t&&(t=b.reactive(t)),e.call(this,t,...n)}}const wt={key:0,class:"drag-placeholder he-tree-drag-placeholder"},Et=["colspan"],Dt={class:"drag-placeholder he-tree-drag-placeholder"};function Ct(e,t,n,r,s,l){const o=f.resolveComponent("TreeNode"),i=f.resolveComponent("VirtualList");return f.openBlock(),f.createBlock(i,{class:f.normalizeClass(["he-tree",{"he-tree--rtl rtl":e.rtl,"he-tree--drag-overing drag-overing":e.dragOvering}]),ref:"vtlist",items:e.visibleStats,disabled:!e.virtualization,table:e.table,itemKey:e.nodeKey},{prepend:f.withCtx(()=>[f.renderSlot(e.$slots,"prepend",{tree:e.self})]),default:f.withCtx(({item:u,index:d})=>[f.createVNode(o,{"vt-index":d,class:f.normalizeClass([u.class,{"drag-placeholder-wrapper":u.data===e.placeholderData,"dragging-node":u===e.dragNode}]),style:f.normalizeStyle(u.style),stat:u,rtl:e.rtl,indent:e.indent,table:e.table,processor:e.processor,onClick:a=>e.$emit("click:node",u),onOpen:t[0]||(t[0]=a=>e.$emit("open:node",a)),onClose:t[1]||(t[1]=a=>e.$emit("close:node",a)),onCheck:t[2]||(t[2]=a=>e.$emit("check:node",a))},{default:f.withCtx(({indentStyle:a})=>[u.data===e.placeholderData?(f.openBlock(),f.createElementBlock(f.Fragment,{key:0},[e.table?(f.openBlock(),f.createElementBlock("td",{key:1,style:f.normalizeStyle(a),colspan:e.placeholderColspan},[f.createElementVNode("div",Dt,[f.renderSlot(e.$slots,"placeholder",{tree:e.self})])],12,Et)):(f.openBlock(),f.createElementBlock("div",wt,[f.renderSlot(e.$slots,"placeholder",{tree:e.self})]))],64)):f.renderSlot(e.$slots,"default",{key:1,node:u.data,stat:u,indentStyle:a,tree:e.self},()=>[f.createTextVNode(f.toDisplayString(u.data[e.textKey]),1)])]),_:2},1032,["vt-index","class","style","stat","rtl","indent","table","processor","onClick"])]),append:f.withCtx(()=>[f.renderSlot(e.$slots,"append",{tree:e.self})]),_:3},8,["class","items","disabled","table","itemKey"])}var Ae=Pe(kt,[["render",Ct]]);/*!
 * drag-event-service v2.0.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const de={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},ze={isTouch(e){return e.type&&e.type.startsWith("touch")},_getStore(e){return e._wrapperStore||(e._wrapperStore=[]),e._wrapperStore},on(e,t,n,r){const{args:s,mouseArgs:l,touchArgs:o}=Ve(r),i=this._getStore(e),u=this,d=function(a){let c;if(u.isTouch(a))c={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,pageX:a.changedTouches[0].pageX,pageY:a.changedTouches[0].pageY,clientX:a.changedTouches[0].clientX,clientY:a.changedTouches[0].clientY,screenX:a.changedTouches[0].screenX,screenY:a.changedTouches[0].screenY};else if(c={x:a.pageX,y:a.pageY,pageX:a.pageX,pageY:a.pageY,clientX:a.clientX,clientY:a.clientY,screenX:a.screenX,screenY:a.screenY},t==="start"&&a.which!==1)return;return n.call(this,a,c)};i.push({handler:n,wrapper:d}),H.call(null,e,de[t][0],d,...s,...l),H.call(null,e,de[t][1],d,...s,...o)},off(e,t,n,r){const{args:s,mouseArgs:l,touchArgs:o}=Ve(r),i=this._getStore(e);for(let u=i.length-1;u>=0;u--){const{handler:d,wrapper:a}=i[u];n===d&&(R.call(null,e,de[t][0],a,...s,...l),R.call(null,e,de[t][1],a,...s,...l),i.splice(u,1))}}};function Ve(e){e||(e={});const t=e.args||[],n=e.mouseArgs||[],r=e.touchArgs||[];return{args:t,mouseArgs:n,touchArgs:r}}/*!
 * @he-tree/dnd-utils v0.2.0
 * Author: phphe <phphe@outlook.com> (https://github.com/phphe)
 * Homepage: null
 * Released under the MIT License.
 */const we=new Map,X={triggerElement:null,dragElement:null,internal:!1,dropEffect:"none",preventDefault:!1},M=X;function le(e){e.dataTransfer&&(e.dataTransfer.dropEffect=M.dropEffect)}function xt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(we.has(e))throw"Already registered on specified element";const n=K({},t),r=n;Oe(n,_t),ze.on(e,"start",s,{touchArgs:[{passive:!0}]});function s(a){var c;const g=a.target;g.nodeType===Node.ELEMENT_NODE&&(M.triggerElement=g);const p=g;if(n.ingoreHTMLTags&&p.tagName&&n.ingoreHTMLTags.find(S=>S.toUpperCase()===p.tagName))return;const m=(c=n.beforeDragStart)===null||c===void 0?void 0:c.call(n,a);m&&(m.setAttribute("draggable","true"),M.dragElement=m)}function l(a){var c;M.internal=!0,(c=n.onDragStart)===null||c===void 0||c.call(n,a),le(a)}function o(a){var c;(c=n.onDrag)===null||c===void 0||c.call(n,a),le(a)}function i(a){var c;(c=n.onDragEnd)===null||c===void 0||c.call(n,a),M.internal=!1,M.dragElement&&M.dragElement.removeAttribute("draggable"),M.triggerElement=null,M.dragElement=null,M.dropEffect="none"}const u=$t(e,{onDragLeave(a){var c;(c=n.onDragLeave)===null||c===void 0||c.call(n,a),le(a)},onDragEnter(a){var c;r.ifPreventDefault(a)&&a.preventDefault(),(c=n.onDragEnter)===null||c===void 0||c.call(n,a),le(a)},onDragOver(a){var c;r.ifPreventDefault(a)&&a.preventDefault(),(c=n.onDragOver)===null||c===void 0||c.call(n,a),le(a)},onDrop(a){var c;r.ifPreventDefault(a)&&a.preventDefault(),(c=n.onDrop)===null||c===void 0||c.call(n,a)},onEnter(a){var c;(c=n.onEnter)===null||c===void 0||c.call(n,a)},onLeave(a){var c;(c=n.onLeave)===null||c===void 0||c.call(n,a)}});return H(e,"dragstart",l),H(e,"drag",o),H(e,"dragend",i),Object.assign(n,{root:e,destroy:()=>{ze.off(e,"start",s,{touchArgs:[{passive:!0}]}),R(e,"dragstart",l),R(e,"drag",o),R(e,"dragend",i),u(),we.delete(e)}}),we.set(e,r),r}const _t={ingoreHTMLTags:["INPUT","TEXTAREA","SELECT","OPTGROUP","OPTION"],ifPreventDefault(e){return X.dragElement?!0:M.preventDefault},beforeDragStart(e){},onDragStart(e){},onDrag(e){},onDragEnter(e){},onDragLeave(e){},onDragOver(e){},onDragEnd(e){},onDrop(e){}};let ce=null;const Ot=e=>{ce=e,setTimeout(()=>{ce=null},20)};function $t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e;let r=!1;const s=p=>{var m;r=!0,(m=t.onEnter)===null||m===void 0||m.call(t,p),a.resume()},l=p=>{var m;Ot(p.target),(m=t.onDragEnter)===null||m===void 0||m.call(t,p),r||s(p)},o=p=>{var m;r||s(p),(m=t.onDragOver)===null||m===void 0||m.call(t,p)},i=p=>{var m;(m=t.onDragLeave)===null||m===void 0||m.call(t,p);const S=function(){var _;let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;r=!1,(_=t.onLeave)===null||_===void 0||_.call(t,B),a.stop()},D=ce;ce=null,D&&nt(D,n)||S()},u=p=>{var m;(m=t.onDrop)===null||m===void 0||m.call(t,p)},d=p=>{var m;p instanceof KeyboardEvent&&p.key!=="Escape"||(r=!1,a.stop(),(m=t.onEndBeforeLeave)===null||m===void 0||m.call(t,p))},a=rt([[e,"drop",d],[window,"mouseup",d],[window,"touchend",d],[window,"keydown",d]]);a.stop();const c=()=>{H(e,"dragenter",l),H(e,"dragover",o),H(e,"dragleave",i),H(e,"drop",u)},g=()=>{R(e,"dragenter",l),R(e,"dragover",o),R(e,"dragleave",i),R(e,"drop",u),a.stop()};return c(),g}let y=null,h=null,ue,ae,J,fe,Ee,z;const Me={get startInfo(){return ue},get targetInfo(){return ae},get dragNode(){return z},get startTree(){return y},get targetTree(){return h}},He=b.defineComponent({extends:Ae,props:{triggerClass:{type:[String,Array]},disableDrag:Boolean,disableDrop:Boolean,eachDraggable:{type:Function},eachDroppable:{type:Function},rootDroppable:{type:[Boolean,Function],default:!0},dragOpen:{type:Boolean,default:!0},dragOpenDelay:{type:Number,default:0},beforeDragOpen:{type:Function},resolveStartMovePoint:{type:[String,Function]},keepPlaceholder:{type:Boolean},maxLevel:{type:Number},dragCopy:{type:Boolean},dragCopyDataHandler:{type:Function},onExternalDragOver:{type:Function},externalDataHandler:{type:Function}},data(){return{treeDraggableInstance:null}},computed:{},methods:{getNodeByElement(e){const t=e.getAttribute("vt-index");return t==null?null:this.visibleStats[t]},isDraggable(e){if(this.disableDrag)return!1;if(e.draggable!=null)return e.draggable;if(this.eachDraggable){const n=this.eachDraggable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDraggable(t):!0},isDroppable(e){if(this.disableDrop)return!1;if(!e)return Ne(this.rootDroppable,[this,y]);if(e.droppable!=null)return e.droppable;if(this.eachDroppable){const n=this.eachDroppable(e);if(n!=null)return n}const{parent:t}=e;return t?this.isDroppable(t):!0},_eachDroppable(){var e;return Ne((e=this._isDragCopy)==null?void 0:e.call(this),[this])}},mounted(){const e=(d,a)=>{let c=!0;return y&&y!==this&&(c=c&&this._isMoved),this.table&&!this._isDragCopy&&(c=c&&this._isDragCopy),c&&(d.x!==a.x||d.y!==a.y)},t=(d,a)=>{h.ignoreUpdate(()=>{if(!h.has(h.placeholderData)){if(h.table){let g=0;const p=h.getRootEl().querySelector("tr");if(p)for(const{value:m}of qe(p.children))se(m,"display")!=="none"&&(g+=m.colSpan||1);g<1&&(g=1),h.placeholderColspan=g}h.add(h.placeholderData)}const c=h.getStat(h.placeholderData);h.move(c,d,a)})},n=()=>{const d=this;if(d.has(d.placeholderData))return d.remove(d.getStat(d.placeholderData)),!0},r=d=>{d?X.dropEffect=y!=null&&y.dragCopy?"copy":"move":X.dropEffect="none"},s=d=>{const a=this;d?r(!0):a.keepPlaceholder?a.has(a.placeholderData)||r(!1):(n(),r(!1))};let l={x:0,y:0};const o=this.getRootEl();let i=null;const u=()=>{h.has(h.placeholderData)&&h.ignoreUpdate(()=>{h.remove(h.getStat(h.placeholderData)),y&&(y.dragNode.hidden=!1,y.dragOvering=!1)})};this.treeDraggableInstance=xt(o,{beforeDragStart:d=>{if(!X.triggerElement)return;let a=this.triggerClass;(!a||a.length===0)&&(a="tree-node");let c=je(a),g=Be(X.triggerElement,p=>{if(Te(p,c))return!0;if(oe(p,"tree-node"))return"break"},{withSelf:!0,until:o});if(i=Be(g,p=>{if(oe(p,"tree-node"))return!0},{withSelf:!0,until:o}),!!i){if(z=this.getNodeByElement(i),!z)throw"Can't find drag node";if(!!this.isDraggable(z))return o}},onDragStart:d=>{var p,m;if(!i||!z)return;{const{x:S,y:D}=i.getBoundingClientRect(),{clientX:_,clientY:B}=d;(p=d.dataTransfer)==null||p.setDragImage(i,_-S,B-D)}Ee={x:d.clientX,y:d.clientY},y=this,y.dragNode=z,fe=(()=>{if(this.resolveStartMovePoint==="mouse")return{x:d.clientX,y:d.clientY};if(typeof this.resolveStartMovePoint=="function")return this.resolveStartMovePoint(i);{let S,D=0;if(this.table){let _=i.getBoundingClientRect();S={x:_.x,y:_.y},this.rtl&&(S.x=_.right),D=_.height}else if(!this.rtl)S=i.children[0].getBoundingClientRect().toJSON(),D=S.height;else{const _=i.children[0].getBoundingClientRect();S={x:_.right,y:_.y},D=_.height}return this.btt&&(S.y+=D),S}})(),this.dragOvering=!0;const c=y.getSiblings(y.dragNode),g=c.indexOf(z);ue={tree:y,dragNode:z,parent:z.parent,siblings:c,indexBeforeDrop:g},h=this,(m=d.dataTransfer)==null||m.setData("text",`he-tree drag start at ${new Date().toISOString()}`),y._eachDroppable()||setTimeout(()=>{z.hidden=!0,t(z.parent,g+1)},0)},onEnter:d=>{this.$emit("enter",d)},onLeave:d=>{J=null,this.dragOvering=!1,X.preventDefault=!1,n(),this.$emit("leave",d)},onDragOver:et(d=>{if(!y){if(!this.onExternalDragOver||this.onExternalDragOver(d)===!1)return;X.preventDefault=!0}const a={x:d.clientX,y:d.clientY},c=e(a,l);if(l=a,!c)return;this.dragOvering=!0,h=this;const g=fe?{x:fe.x+(a.x-Ee.x),y:fe.y+(a.y-Ee.y)}:K({},a),{btt:p,rtl:m}=h;if(h.disableDrop){X.dropEffect="none";return}let S,D;const _=h.getRootEl().querySelectorAll(".tree-node"),B=[];_.forEach(w=>{!Te(w,["drag-placeholder-wrapper","dragging-node"])&&se(w,"display")!=="none"&&B.push(w)});const U=be(B,w=>ve(w)[p?"bottom":"top"]-g.y,{returnNearestIfNoHit:!0});let C=null,W,Q;U.hit||(U.greater?p||(C=U.index-1,B[C]||C++):p&&(C=U.index+1,B[C]||C--)),C==null&&(C=U.index),W=B[C],Q=p?B[C-1]:B[C+1],S=W&&h.getNodeByElement(W),D=Q&&h.getNodeByElement(Q);const{indent:j}=h,L=re(()=>{if(h.table){let w=ve(W).toJSON();const F=j*(S.level-1);return m?(w.width-=F,w.right-=F):w.x+=F,w}else return ve(W.firstElementChild)}).action,ee=re(()=>p?g.y>L().y+L().height/2:g.y<L().y+L().height/2).action,De=re(()=>p?!W||C===B.length-1&&ee():!W||C===0&&ee()).action,he=re(()=>m?g.x-(L().x+L().width):L().x-g.x).action,k=re(()=>m?g.x<L().x+L().width-j:g.x>L().x+j).action;let v;if(De())v=1,S=null;else if(S)he()>0?v=S.level-Math.ceil(he()/j):k()?v=S.level+1:v=S.level;else return;D&&v<D.level&&(v=D.level),(async()=>{let w,F,T=!1,Z=null;const te=async x=>{if(x.open)return!0;if(h.dragOpen)if(h.dragOpenDelay)if(Z=x,J===x)T=!0;else{let N=tt();J=x;const P=x;return setTimeout(async()=>{P!==J?(T=!0,N.resolve(!0)):(h.beforeDragOpen&&await h.beforeDragOpen(x),P!==J?(T=!0,N.resolve(!0)):(x.open=!0,Z=null,N.resolve(!0)))},h.dragOpenDelay),await N.promise}else return x.open=!0,!0;else return!1},ge=async()=>{if(h.isDroppable(S)&&await te(S)){if(T)return;w=S,F=null}else return!1},pe=(x=v)=>{let N=S,P=[];for(;N&&N.level>=x;)N=N.parent||null,P.unshift(N);let G=0;for(const me of P){if(h.isDroppable(me))return w=me,F=P[G+1]||S,!0;G++}return!1};S?v>S.level?await ge()===!1&&pe(S.level):pe()===!1&&await ge():h.isDroppable(null)&&(w=null),J=Z;const I=Boolean(!T&&(w||w===null));return{cancelled:T,success:I,parent:w,index:I?(()=>F?(w?w.children:h.stats).filter(x=>x.data!==h.placeholderData).indexOf(F)+1:0)():-1}})().then(w=>{if(!w.cancelled){if(!w.success){s(!1);return}if(y&&h.maxLevel!=null&&h.maxLevel>0){const F=y.dragNode;let T=0;if(V(F,te=>{te.level>T&&(T=te.level)},{childrenKey:q}),T-F.level+1+(w.parent?w.parent.level:0)>h.maxLevel){s(!1);return}}s(!0),t(w.parent,w.index)}})},()=>{}),onDrop:d=>{h=this;const a=!y;if(!h)return;const c=y==null?void 0:y.dragNode;let g,p=(()=>{var S;let m=!0;if(!h.has(h.placeholderData))m=!1;else if(a)g=(S=this.externalDataHandler)==null?void 0:S.call(this,d),m=g!=null;else if(!y.dragCopy){const D=h.getStat(h.placeholderData);y===h&&D.parent===c.parent&&Qe(c,_=>_===D)}return m})();if(p){const m=h.getStat(h.placeholderData),S=h.getSiblings(m);ae={tree:h,dragNode:c,parent:m.parent,siblings:S,indexBeforeDrop:S.indexOf(m)}}(()=>{if(u(),p){let m=ae.indexBeforeDrop;y&&!y.dragCopy&&y===h&&ue.parent==ae.parent&&ue.indexBeforeDrop<m&&m--,y&&y!==h&&!y._eachDroppable()&&y.batchUpdate(()=>{y.remove(c),y.updateCheck()}),h.batchUpdate(()=>{let S=y==null?void 0:y.dragNode,D;g?D=g:y._eachDroppable()&&(D=$e(y.dragNode.data,{childrenKey:y.childrenKey}),y.dragCopyDataHandler&&(D=y.dragCopyDataHandler(D))),D&&(h.add(D),S=h.getStat(D)),h.move(S,ae.parent,m),h.updateCheck()})}h.$emit("after-drop"),p&&(y&&(y.dragCopy||y.$emit("change")),h!==y&&h.$emit("change"))})()},onDragEnd:d=>{u(),y&&(y.dragNode&&(y.dragNode.hidden=!1),y.dragNode=null,y.dragOvering=!1,y=null),h=null,J=null,z=null}})},unmounted(){var e;(e=this.treeDraggableInstance)==null||e.destroy()}});function Nt(e,t){try{return{mixins:[He],created:new Function(Bt(e,t))()}}catch{throw new Error("he-tree-pro: wrong secret key")}}function Bt(e,t){e=encodeURIComponent(e),e.length%2===1&&(e+="h"),e=e.split("").reverse().join(""),t=atob(t);for(let n=0;n<e.length;n+=2){const r=e[n],s=e[n+1];t=Tt(t,r,s)}return Ft("arb=inowc=ocmet;etrnfucton){are=1,=tistr{evod !=b}ath(){e&(c_htreWtemak=)=e,._sMve=(=>._eteeatrmrkd.israCoy=)=d.abe,._acDrppbl=(=>.dagop)}",t)}function Tt(e,t,n){let r="";for(let s=0;s<e.length;s++){const l=e[s];l===t?r+=n:l===n?r+=t:r+=l}return r}function Ft(e,t){let n=0,r="";for(;;){let s;if(s=n,s>=t.length||(r+=t[s],s=n*2,s>=e.length)||(r+=e[s],s+=1,s>=e.length))break;r+=e[s],n++}return r}return O.BaseTree=Ae,O.Draggable=He,O.context=Me,O.dragContext=Me,O.pro=Nt,O.walkTreeData=V,Object.defineProperties(O,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),O}({},VueDemi,Vue);
